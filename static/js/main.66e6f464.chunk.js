(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{175:function(e,t,a){"use strict";a.r(t);var c=a(2),n=a.n(c),r=a(24),i=a.n(r),s=(a(82),a(13)),o=a.n(s),l=a(3),u=a(6),d=a(33);a(178),a(85),a(176);d.a.initializeApp({apiKey:"AIzaSyCSu3ggsS66Mo1OullwbFJIg9mibC9E9wY",authDomain:"todo-8303f.firebaseapp.com",projectId:"todo-8303f",storageBucket:"todo-8303f.appspot.com",messagingSenderId:"928128254937",appId:"1:928128254937:web:a3f32fafc7ca5ba6c40fc8"}),d.a.firestore();var j=d.a,b=function(e){if(null===e)return 0;var t=o.a.unix(e.seconds).startOf("days"),a=o()().startOf("days"),c=o()(t),n=o()(a),r=1,i=[!1,!0,!0,!0,!0,!0,!1],s=0;if(t.isSame(a))return 0;for(t.isBefore(a)&&(n=o()(t),c=o()(a),r=-1);!n.isSame(c);)n.add(1,"d"),i[n.day()]&&s++;return s*r},p=function(e){if(null===e.expectedUpdate)return"bg-white";var t=o()(new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate())),a=o.a.unix(e.expectedUpdate.seconds);return a.isBefore(t)&&5!==e.actionType&&6!==e.actionType?"bg-red-600 text-white":!a.isSame(t)||1!==e.actionType&&4!==e.actionType?!a.isSame(t)||2!==e.actionType&&3!==e.actionType?1===e.actionType||4===e.actionType?"bg-purple-300":2===e.actionType||3===e.actionType?"bg-gray-400":"bg-white":"bg-gray-600 text-white":"bg-purple-700 text-white"},f=a(74),m=a(26),O=a(11),h=function(e,t){switch(t.type){case"SHOW_SHEET":return Object(l.a)(Object(l.a)({},e),{},{showSheet:!0,itemID:t.itemID});case"HIDE_SHEET":return Object(l.a)(Object(l.a)({},e),{},{showSheet:!1,itemID:null});case"SETUP_IMPORTANCE_FILTERS":var a={};return t.importances.forEach((function(e){a[e.id]=!0})),Object(l.a)(Object(l.a)({},e),{},{importanceFilters:a});case"SET_IMPORTANCE_FILTER":return Object(l.a)(Object(l.a)({},e),{},{importanceFilters:Object(l.a)(Object(l.a)({},e.importanceFilters),{},Object(O.a)({},t.importance,t.value))});case"ALL_IMPORTANCE":for(var c={},n=0,r=Object.keys(t.importances);n<r.length;n++){c[r[n]]=t.value}return Object(l.a)(Object(l.a)({},e),{},{importanceFilters:c});case"SET_ACTION_FILTER":return Object(l.a)(Object(l.a)({},e),{},{actionFilters:Object(l.a)(Object(l.a)({},e.actionFilters),{},Object(O.a)({},t.actionType,t.value))});case"ALL_ACTION":for(var i={},s=0,o=Object.keys(t.actionTypes);s<o.length;s++){i[o[s]]=t.value}return Object(l.a)(Object(l.a)({},e),{},{actionFilters:i});case"SET_DAY_FILTER":return Object(l.a)(Object(l.a)({},e),{},{dayFilter:t.value});default:return e}},x=function(e){for(var t=[],a=0,c=Object.keys(e);a<c.length;a++){var n=c[a];t.push(e[n])}return t=t.sort((function(e,t){return e.id-t.id})),t},v=function(e){for(var t=[],a=0,c=Object.keys(e);a<c.length;a++){var n=c[a];t.push(e[n])}return t=t.sort((function(e,t){return e.id-t.id})),t},g=a(1),y=n.a.createContext(),N=function(e){var t=e.children,a=Object(f.a)(j.auth()),n=Object(u.a)(a,1)[0],r=n?n.uid:null,i=Object(c.useReducer)(h,{showSheet:!1,itemID:null,dayFilter:"all"}),s=Object(u.a)(i,2),o=s[0],d=s[1],O=Object(m.a)(j.firestore().collection("users/"+r+"/oneOffs").where("done","==",!1),{idField:"id"}),N=Object(u.a)(O,1)[0],w=Object(m.b)(j.firestore().collection("users").doc("/"+r),{transform:function(e){return function(e){return e.importanceArray=x(e.importanceTypes),e.actionTypeArray=v(e.actionTypes),e}({importanceTypes:e.importanceTypes,actionTypes:e.actionTypes,dayDrop:e.dayDrop,oneOff:e.oneOff})}}),T=Object(u.a)(w,1)[0],C=Object(m.a)(j.firestore().collection("users/"+r+"/items").where("deleted","==",!1),{idField:"id",transform:function(e){return function(e,t){if(t&&e){var a=t.importanceArray.filter((function(t){return t.id===e.importance}))[0],c=t.actionTypeArray.filter((function(t){return t.id===e.actionType}))[0],n=b(e.expectedUpdate),r=e.expectedUpdate?Math.max(0,1*a.weight*c.weight-n*t.dayDrop):0,i=p(e);return Object(l.a)(Object(l.a)({},e),{},{importanceName:a.name,importanceWeight:a.weight,actionTypeName:c.name,actionTypeWeight:c.weight,daysTo:n,score:r,colorClass:i})}return e}(Object(l.a)(Object(l.a)({},e),{},{score:0}),T)}}),k=Object(u.a)(C,1)[0],E=Object(m.a)(j.firestore().collection("users/"+r+"/history").orderBy("date","asc")),F=Object(u.a)(E,1)[0];return Object(g.jsx)(y.Provider,{value:{items:k,oneOffs:N,weights:T,FBuser:n,history:F,status:o,dispatch:d},children:t})},w=function(e){for(var t=e.importance,a=e.importances,c=["green","yellow","orange","red"],n=c[0],r=a.sort((function(e,t){return e.weight-t.weight})),i=1,s=1;s<=r.length;s++)r[s-1].id===t&&(i=s,n=c[s-1]);for(var o=[],l=1;l<=i;l++)o.push(l);return Object(g.jsx)("div",{className:"flex",children:o&&o.map((function(e){return Object(g.jsx)("div",{className:"h-3 w-3",children:Object(g.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(g.jsx)("circle",{cx:"12",cy:"12",r:"10",stroke:"black",strokeWidth:"1",fill:n})})},e)}))})},T=function(e){var t=e.item,a=t.expectedUpdate?o.a.unix(t.expectedUpdate.seconds).format("MM/DD/YY"):null,n=Object(c.useContext)(y),r=n.dispatch,i=n.weights;return Object(g.jsxs)("div",{onClick:function(e){r({type:"SHOW_SHEET",itemID:t.id})},className:"border-2 border-black my-2 w-full self-center grid grid-cols-12 cursor-pointer ",children:[Object(g.jsxs)("div",{className:"mainInfo flex flex-col col-span-4 p-2 bg-black text-white",children:[Object(g.jsx)("p",{className:"text-xs",children:t.score.toFixed(2)}),Object(g.jsx)("p",{className:"text-xl",children:t.name}),Object(g.jsx)(w,{importance:t.importance,importances:i.importanceArray}),Object(g.jsx)("p",{className:"text-sm",children:t.description})]}),Object(g.jsxs)("div",{className:"col-span-8 p-2 "+t.colorClass,children:[Object(g.jsx)("p",{className:"text-xl",children:t.actionTypeName}),Object(g.jsx)("p",{className:"text-sm",children:a}),Object(g.jsx)("p",{className:"text-base",children:t.action})]})]})},C=function(){var e=Object(c.useContext)(y),t=e.items,a=e.status,n=t?t.sort((function(e,t){return null===e.expectedUpdate?1:null===t.expectedUpdate?-1:t.score-e.score})):null;if(a&&a.importanceFilters&&n){var r=a.importanceFilters;n=n.filter((function(e){return void 0===r[e.importance]||r[e.importance]}))}if(a&&n&&("today"===a.dayFilter?n=n.filter((function(e){return o.a.unix(e.expectedUpdate.seconds).startOf("day").isSameOrBefore(o()().startOf("day"))})):"nextThree"===a.dayFilter?n=n.filter((function(e){return o.a.unix(e.expectedUpdate.seconds).startOf("day").isSameOrBefore(o()().add(3,"days").startOf("day"))})):"overdue"===a.dayFilter&&(n=n.filter((function(e){return o.a.unix(e.expectedUpdate.seconds).startOf("day").isBefore(o()().startOf("day"))})))),a&&a.actionFilters&&n){var i=a.actionFilters;n=n.filter((function(e){return void 0===i[e.actionType]||i[e.actionType]}))}return Object(g.jsx)("div",{className:"flex flex-col w-full col-span-6 col-start-4 p-2 h-screen overflow-hidden",children:Object(g.jsx)("div",{className:"overflow-scroll h-full hideBar",children:n&&n.map((function(e){return Object(g.jsx)(T,{item:e},e.id)}))})})},k=a(32),E=function(e){var t=e.value,a=e.change;return Object(g.jsxs)("div",{className:"mt-2",children:[Object(g.jsx)("p",{children:"Action"}),Object(g.jsx)(k.a,{id:"action",onChange:a,className:"focus:outline-none border-2 border-black ",value:t})]})},F=function(e){var t=e.value,a=e.change,n=Object(c.useContext)(y).weights,r=n?n.actionTypeArray:null;return r&&(r=r.sort((function(e,t){return t.weight-e.weight}))),Object(g.jsxs)("div",{className:"mt-2",children:[Object(g.jsx)("p",{children:"Action Type"}),Object(g.jsx)("select",{className:"border-2 border-black",onChange:a,id:"actionType",value:t,children:r&&r.map((function(e){return Object(g.jsx)("option",{value:e.id,children:e.name})}))})]})},I=function(e){var t=e.value,a=e.change;return Object(g.jsxs)("div",{className:"mt-2",children:[Object(g.jsx)("p",{children:"Description"}),Object(g.jsx)(k.a,{id:"description",onChange:a,className:"focus:outline-none border-2 border-black ",value:t})]})},A=a(75),S=a.n(A),D=(a(88),function(e){var t=e.value,a=e.change,c=t&&t.seconds?o.a.unix(t.seconds).toDate():t||null;return Object(g.jsxs)("div",{className:"mt-2",children:[Object(g.jsx)("p",{children:"Expected Update"}),Object(g.jsx)(S.a,{id:"expectedUpdate",isClearable:!1,className:"formInput",selected:c,onChange:function(e,t){null!==e&&a(e)}})]})}),L=function(e){var t=e.value,a=e.change,n=Object(c.useContext)(y).weights,r=n?n.importanceArray:null;return r&&(r=r.sort((function(e,t){return t.weight-e.weight}))),Object(g.jsxs)("div",{className:"mt-2",children:[Object(g.jsx)("p",{children:"Importance"}),Object(g.jsx)("select",{className:"border-2 border-black",id:"importance",onChange:a,value:t,children:r&&r.map((function(e){return Object(g.jsx)("option",{value:e.id,children:e.name},e.id)}))})]})},_=function(e){var t=e.value,a=e.change;return Object(g.jsxs)("div",{children:[Object(g.jsx)("p",{children:"Name"}),Object(g.jsx)("input",{className:"formInput",onChange:a,id:"name",value:t})]})},B=function(e,t){for(var a=0,c=Object.keys(e);a<c.length;a++){var n=c[a];isNaN(parseFloat(e[n].weight))||(t[n]=Object(l.a)(Object(l.a)({},e[n]),{},{weight:parseFloat(e[n].weight)}))}j.firestore().collection("users").doc(U()).get().then((function(e){j.firestore().collection("users").doc(U()).update({importanceTypes:t})}))},M=function(e,t){for(var a=0,c=Object.keys(e);a<c.length;a++){var n=c[a];isNaN(parseFloat(e[n].weight))||(t[n]=Object(l.a)(Object(l.a)({},e[n]),{},{weight:parseFloat(e[n].weight)}))}j.firestore().collection("users").doc(U()).get().then((function(e){j.firestore().collection("users").doc(U()).update({actionTypes:t})}))},U=function(){return j.auth().currentUser.uid},V=function(){var e=Object(c.useRef)(null),t=Object(c.useContext)(y),a=t.status,n=t.dispatch,r=t.items,i=Object(c.useState)({name:"",action:"",description:"",importance:3,actionType:1,expectedUpdate:new Date}),s=Object(u.a)(i,2),o=s[0],d=s[1],b=Object(c.useState)(!0),p=Object(u.a)(b,2),f=p[0],m=p[1];Object(c.useEffect)((function(){a&&a.itemID&&(r?(d(r.filter((function(e){return e.id===a.itemID}))[0]),m(!1)):m(!0))}),[a,r]),Object(c.useEffect)((function(){var t=function(t){e.current.contains(t.target)||n({type:"HIDE_SHEET"})};return document.addEventListener("mousedown",t),function(){document.removeEventListener("mousedown",t)}}),[n]);var h=function(e){d(Object(l.a)(Object(l.a)({},o),{},Object(O.a)({},e.target.id,e.target.value)))},x=function(e){n({type:"HIDE_SHEET"})};return Object(g.jsxs)("div",{ref:e,className:"overflow-scroll bg-white h-5/6 w-1/4 mt-10 p-5",children:[f?Object(g.jsx)("p",{className:"text-xl font-bold",children:"New Item"}):Object(g.jsx)("p",{className:"text-xl font-bold",children:"Edit Item"}),Object(g.jsx)(_,{value:o.name,change:h}),Object(g.jsx)(L,{value:o.importance,change:h}),Object(g.jsx)(I,{value:o.description,change:h}),Object(g.jsx)(F,{value:o.actionType,change:h}),Object(g.jsx)(D,{value:o.expectedUpdate,change:function(e){d(Object(l.a)(Object(l.a)({},o),{},{expectedUpdate:e}))}}),Object(g.jsx)(E,{value:o.action,change:h}),f?Object(g.jsxs)("div",{className:"flex space-x-2 mt-5",children:[Object(g.jsx)("button",{onClick:x,className:"btn",children:"Cancel"}),Object(g.jsx)("button",{onClick:function(e){!function(e){j.firestore().collection("users/"+U()+"/items").add({action:e.action,actionType:parseInt(e.actionType),description:e.description,expectedUpdate:e.expectedUpdate,importance:parseInt(e.importance),name:e.name,deleted:!1})}(o),n({type:"HIDE_SHEET"})},className:"doneBtn",children:"Add"})]}):Object(g.jsxs)("div",{children:[Object(g.jsxs)("div",{className:"flex space-x-2 mt-5",children:[Object(g.jsx)("button",{onClick:x,className:"btn",children:"Cancel"}),Object(g.jsx)("button",{onClick:function(e){!function(e){j.firestore().collection("users/"+U()+"/items").doc(e.id).update({action:e.action,actionType:parseInt(e.actionType),description:e.description,expectedUpdate:e.expectedUpdate,importance:parseInt(e.importance),name:e.name,new:!1})}(o),n({type:"HIDE_SHEET"})},className:"doneBtn",children:"Done"})]}),Object(g.jsx)("div",{children:Object(g.jsx)("button",{onClick:function(e){var t;!0===window.confirm("Are you sure you want to delete?")&&(t=o.id,j.firestore().collection("users/"+U()+"/items").doc(t).update({deleted:!0})),n({type:"HIDE_SHEET"})},className:"importantBtn mt-5",children:"Delete Item"})})]})]})},H=function(){var e=Object(c.useContext)(y).status;return!1===e.showSheet||null===e.item?(document.body.style.overflow="unset",null):(document.body.style.overflow="hidden",Object(g.jsx)("div",{className:"flex justify-center w-screen h-screen bg-gray-400 bg-opacity-40 fixed inset-0",children:Object(g.jsx)(V,{})}))},R=function(){var e=Object(c.useContext)(y),t=e.FBuser,a=e.dispatch;return null!==t&&Object(g.jsx)("button",{className:"ml-10 mt-5 mb-10 btn",onClick:function(){a({type:"SHOW_SHEET"})},children:"Add Item"})},P=function(){var e=Object(c.useContext)(y).FBuser,t=Object(c.useState)({email:"",pass:""}),a=Object(u.a)(t,2),n=a[0],r=a[1];if(e)return Object(g.jsx)("button",{onClick:function(e){j.auth().signOut()},className:"btn",children:"Logout"});var i=function(e){r(Object(l.a)(Object(l.a)({},n),{},Object(O.a)({},e.target.id,e.target.value)))};return Object(g.jsx)("div",{children:Object(g.jsxs)("form",{onSubmit:function(e){var t,a;e.preventDefault(),t=n.email,a=n.pass,j.auth().signInWithEmailAndPassword(t,a),r({email:"",pass:""})},children:[Object(g.jsx)("input",{onChange:i,value:n.email,id:"email",className:"formInput",type:"email"}),Object(g.jsx)("input",{onChange:i,value:n.pass,id:"pass",className:"formInput",type:"password"}),Object(g.jsx)("button",{className:"btn",type:"submit",children:"Login"})]})})},W=function(){var e=Object(c.useState)(""),t=Object(u.a)(e,2),a=t[0],n=t[1];return Object(g.jsx)("form",{onSubmit:function(e){e.preventDefault(),function(e){var t=U();j.firestore().collection("users/"+U()+"/oneOffs").add({name:e,done:!1,userID:t})}(a),n("")},children:Object(g.jsx)("input",{className:"formInput mt-2",placeholder:"Add One Off",value:a,onChange:function(e){n(e.target.value)}})})},Y=function(e){var t=e.oneOff;return Object(g.jsxs)("div",{className:"flex space-x-2",children:[Object(g.jsx)("input",{className:"self-center",onChange:function(){var e;e=t.id,j.firestore().collection("users/"+U()+"/oneOffs").doc(e).update({done:!0})},type:"checkbox"}),Object(g.jsx)("label",{className:"self-center",children:t.name})]})},z=function(){var e=Object(c.useContext)(y).oneOffs;return Object(g.jsx)("div",{className:"w-full",children:Object(g.jsxs)("div",{className:"m-auto w-48",children:[Object(g.jsx)("h1",{className:"text-lg font-bold",children:"One Off Items"}),e&&e.map((function(e){return Object(g.jsx)(Y,{oneOff:e},e.id)})),Object(g.jsx)(W,{})]})})},J=function(e){var t=e.actionTypes,a=Object(c.useState)([]),n=Object(u.a)(a,2),r=n[0],i=n[1];Object(c.useEffect)((function(){t&&i(t)}),[t]);for(var s=function(e){i(Object(l.a)(Object(l.a)({},r),{},Object(O.a)({},e.target.attributes.actionid.nodeValue,Object(l.a)(Object(l.a)({},r[e.target.attributes.actionid.nodeValue]),{},{weight:e.target.value}))))},o=function(e){i(Object(l.a)(Object(l.a)({},r),{},Object(O.a)({},e.target.attributes.actionid.nodeValue,Object(l.a)(Object(l.a)({},r[e.target.attributes.actionid.nodeValue]),{},{name:e.target.value}))))},d=function(e){var a=isNaN(parseFloat(e.target.value))?t[e.target.attributes.actionid.nodeValue].weight:parseFloat(e.target.value);M(Object(l.a)(Object(l.a)({},r),{},Object(O.a)({},e.target.attributes.actionid.nodeValue,Object(l.a)(Object(l.a)({},r[e.target.attributes.actionid.nodeValue]),{},{weight:a}))),t)},b=function(e){var a=""===e.target.value?t[e.target.attributes.actionid.nodeValue].name:e.target.value;a!==t[e.target.attributes.actionid.nodeValue].name&&M(Object(l.a)(Object(l.a)({},r),{},Object(O.a)({},e.target.attributes.actionid.nodeValue,Object(l.a)(Object(l.a)({},r[e.target.attributes.actionid.nodeValue]),{},{name:a}))),t)},p=[],f=0,m=Object.keys(r);f<m.length;f++){var h=m[f];p.push(r[h])}return p=p.sort((function(e,t){return t.weight-e.weight})),Object(g.jsxs)("div",{className:"m-auto w-56 mt-10",children:[Object(g.jsx)("p",{className:"text-lg font-bold",children:"Action Type Weights"}),Object(g.jsx)("div",{className:"flex flex-col space-y-1",children:p&&p.map((function(e){return Object(g.jsxs)("div",{className:"grid grid-cols-12",children:[Object(g.jsx)("input",{onBlur:b,onChange:o,actionid:e.id,value:e.name,className:"col-span-7 formInput"}),Object(g.jsx)("input",{onBlur:d,value:e.weight,actionid:e.id,id:e.id,onChange:s,className:"formInputSmall col-span-4 col-start-9"})]},e.id)}))}),Object(g.jsx)("button",{className:"btn mt-2",onClick:function(e){!function(e){var t=Object.keys(e).length+1,a="actionTypes."+t;j.firestore().collection("users").doc(U()).update(Object(O.a)({},a,{id:t,name:"New",weight:0}))}(t)},children:"Add"})]})},K=function(e){var t=e.importanceTypes,a=Object(c.useState)([]),n=Object(u.a)(a,2),r=n[0],i=n[1];Object(c.useEffect)((function(){t&&i(t)}),[t]);for(var s=function(e){i(Object(l.a)(Object(l.a)({},r),{},Object(O.a)({},e.target.attributes.importanceid.nodeValue,Object(l.a)(Object(l.a)({},r[e.target.attributes.importanceid.nodeValue]),{},{weight:e.target.value}))))},o=function(e){i(Object(l.a)(Object(l.a)({},r),{},Object(O.a)({},e.target.attributes.importanceid.nodeValue,Object(l.a)(Object(l.a)({},r[e.target.attributes.importanceid.nodeValue]),{},{name:e.target.value}))))},d=function(e){var a=isNaN(parseFloat(e.target.value))?t[e.target.attributes.importanceid.nodeValue].weight:parseFloat(e.target.value);B(Object(l.a)(Object(l.a)({},r),{},Object(O.a)({},e.target.attributes.importanceid.nodeValue,Object(l.a)(Object(l.a)({},r[e.target.attributes.importanceid.nodeValue]),{},{weight:a}))),t)},b=function(e){var a=""===e.target.value?t[e.target.attributes.importanceid.nodeValue].name:e.target.value;B(Object(l.a)(Object(l.a)({},r),{},Object(O.a)({},e.target.attributes.importanceid.nodeValue,Object(l.a)(Object(l.a)({},r[e.target.attributes.importanceid.nodeValue]),{},{name:a}))),t)},p=[],f=0,m=Object.keys(r);f<m.length;f++){var h=m[f];p.push(r[h])}return p=p.sort((function(e,t){return t.weight-e.weight})),Object(g.jsxs)("div",{className:"m-auto w-56 mt-10",children:[Object(g.jsx)("p",{className:"text-lg font-bold",children:"Importance Weights"}),Object(g.jsx)("div",{className:"flex flex-col space-y-1",children:p&&p.map((function(e){return Object(g.jsxs)("div",{className:"grid grid-cols-12",children:[Object(g.jsx)("input",{onBlur:b,value:e.name,onChange:o,importanceid:e.id,className:"col-span-7 formInput"}),Object(g.jsx)("input",{onBlur:d,value:e.weight,importanceid:e.id,onChange:s,className:"formInputSmall col-span-4 col-start-9"})]},e.id)}))}),Object(g.jsx)("button",{onClick:function(e){!function(e){var t=Object.keys(e).length+1,a="importanceTypes."+t;j.firestore().collection("users").doc(U()).update(Object(O.a)({},a,{id:t,name:"New",weight:0}))}(t)},className:"btn mt-2",children:"Add"})]})},q=function(){var e=Object(c.useContext)(y).weights;return Object(g.jsx)("div",{className:"w-full",children:Object(g.jsx)("div",{children:e?Object(g.jsxs)("div",{children:[Object(g.jsx)(K,{importanceTypes:e.importanceTypes}),Object(g.jsx)(J,{actionTypes:e.actionTypes})]}):null})})},G=a(30),Q=a(31),X=Object(l.a)(Object(l.a)({},G),{},{tip:Q.a}),Z=function(e){var t=[];t.push(e[0]);for(var a=1;a<e.length;a++)e[a].score!==e[a-1].score&&t.push(e[a]);return t},$=function(e){var t=[];return e.forEach((function(e){t.push({x:o.a.unix(e.date.seconds).toDate(),y:e.score})})),{lines:[{name:"Score History",data:t}],minY:0,xTicks:6,yTicks:7,dots:!0,dotSize:2}},ee=function(e){return o()(e).format("MM/DD/YY")},te=function(e){return e.toFixed(2)},ae=function(e,t){var a=function(e){var t=0,a=null;return e.lines.forEach((function(e){e.data.forEach((function(e){t=Math.max(e.y,t),a=a?Math.min(e.y,a):e.y}))})),{max:t,min:a-=.1*(t-a)}}(e);return X.scaleLinear().range([0,t]).domain([a.max,a.min])},ce=function(e,t){var a=function(e){var t=new Date,a=0;return e.lines.forEach((function(e){e.data.forEach((function(e){a=Math.max(e.x,a),t=Math.min(e.x,t)}))})),{max:a,min:t}}(e);return X.scaleTime().range([0,t]).domain([a.min,a.max])},ne=function(){return X.tip().attr("class","tip card").html((function(e,t){var a=ee(t.x),c=te(t.y),n=function(e){return o()(e).format("h:mm a")}(t.x),r="";return r+='<div class="score">'.concat(c,"</div>"),r+='<div class="name">'.concat(a,"</div>"),r+='<div class="cost">'.concat(n,"</div>")}))},re=Object(l.a)(Object(l.a)({},G),{},{tip:Q.a}),ie=function(e){var t=e.chartClass,a=Object(c.useContext)(y),n=a.history,r=a.FBuser,i=null;i=function(e){return e&&e.length>0?$(Z(e)):null}(n);var s=Object(c.useRef)();return Object(c.useEffect)((function(){var e=10,t=35,a=500-t-20,c=200-e-20,n=re.select(s.current).attr("viewBox","0 0 ".concat(500," ").concat(200)).select(".chartArea").attr("height",200).attr("class","chartArea").attr("width",500).attr("transform","translate(".concat(t,",").concat(e,")"));n.selectAll("g").remove();var r=n.append("g").attr("transform","translate(-".concat(t,",-").concat(e,")"));if(r.selectAll("g").remove(),r.selectAll("path").remove(),i){var o=r.append("g").style("opacity",0).attr("transform","translate(".concat(t,",").concat(e,")")),l=o.append("line").attr("stroke","#aaa").attr("stroke-width",1).attr("stroke-dasharray",4),u=o.append("line").attr("stroke","#aaa").attr("stroke-width",1).attr("stroke-dasharray",4),d=n.append("g").attr("transform","translate(0,".concat(c,")")),j=n.append("g").attr("transform","translate(0, 0)"),b=ce(i,a),p=ae(i,c),f=re.line().x((function(e){return b(e.x)})).y((function(e){return p(e.y)}));i.lines.forEach((function(a){var n=ne();r.call(n);var s=r.append("path").attr("transform","translate(".concat(t,",").concat(e,")")),d=r.selectAll("circle."+a.name).data(a.data),j=i.dotSize?i.dotSize:5;d.exit().remove(),d.attr("r",j).attr("fill","black").attr("cx",(function(e){return b(e.x)})).attr("cy",(function(e){return p(e.y)})).attr("transform","translate(".concat(t,",").concat(e,")")).on("mouseover",n.show).on("mouseout",n.hide),d.enter().append("circle").attr("fill","black").attr("cx",(function(e){return b(e.x)})).attr("cy",(function(e){return p(e.y)})).attr("r",j).attr("transform","translate(".concat(t,",").concat(e,")")).attr("opacity",1).on("mouseover.tip",n.show).on("mouseover.lines",(function(e,t){l.attr("x1",b(t.x)).attr("x2",b(t.x)).attr("y1",p(t.y)).attr("y2",c),u.attr("x1",0).attr("x2",b(t.x)).attr("y1",p(t.y)).attr("y2",p(t.y)),o.style("opacity",1)})).on("mouseout.tip",n.hide).on("mouseout.lines",(function(e,t){o.style("opacity",0)}));var m=s.node().getTotalLength();s.data([a.data]).attr("fill","none").attr("stroke","black").attr("stroke-width",2).attr("d",f).style("opacity",.75).attr("stroke-dasharray",m+" "+m)}));var m=i.xTicks?i.xTicks:5,O=i.yTicks?i.yTicks:5,h=i?ee:function(e){return e},x=i?te:function(e){return e},v=re.axisBottom(b).tickFormat((function(e){return h(e)})).ticks(m),g=re.axisLeft(p).tickFormat((function(e){return x(e)})).ticks(O);d.call(v).attr("class","chartAxis"),j.call(g).attr("class","chartAxis")}}),[r,i]),Object(g.jsx)("div",{className:"flex justify-center",children:Object(g.jsx)("div",{className:t+" w-full",children:Object(g.jsx)("svg",{ref:s,children:Object(g.jsx)("g",{className:"chartArea"})})})})},se=function(){var e=Object(c.useContext)(y),t=e.items,a=e.oneOffs,n=e.weights,r=e.FBuser,i=n?n.oneOff:0,s=Object(c.useState)(0),o=Object(u.a)(s,2),l=o[0],d=o[1],b=Object(c.useState)(!1),p=Object(u.a)(b,2),f=p[0],m=p[1],O=f?"block":"hidden";Object(c.useEffect)((function(){var e=0,c=!1;if(t&&a){for(var n=0;n<t.length;n++)e+=t[n].score;e>0&&(c=!0),e+=a.length*i}e!==l&&t&&a&&c&&r&&function(e){var t=new Date;j.firestore().collection("users").doc(U()).get().then((function(a){a.data().currentScore.toFixed(2)!==e.toFixed(2)&&(console.log("log history. current:",a.data().currentScore,"new",e),j.firestore().collection("users").doc(U()).update({currentScore:parseFloat(e.toFixed(2))}).then((function(a){j.firestore().collection("users/"+U()+"/history").add({date:t,score:parseFloat(e.toFixed(2))})})))}))}(e),d(e)}),[t,a,i,l,r]);return Object(g.jsxs)("div",{className:"my-5",children:[Object(g.jsxs)("div",{className:"flex justify-center space-x-1",children:[Object(g.jsx)("h1",{className:"text-center text-4xl scoreLabel",children:l.toFixed(2)}),Object(g.jsx)("svg",{onClick:function(e){m(!f)},className:"w-5 cursor-pointer",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(g.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 12l3-3 3 3 4-4M8 21l4-4 4 4M3 4h18M4 4h16v12a1 1 0 01-1 1H5a1 1 0 01-1-1V4z"})})]}),Object(g.jsx)(ie,{chartClass:O})]})},oe=function(){var e=Object(c.useState)(!1),t=Object(u.a)(e,2),a=t[0],n=t[1];return Object(g.jsx)("div",{className:"col-span-3 h-screen overflow-hidden",children:Object(g.jsxs)("div",{className:"h-full overflow-scroll hideBar pb-10",children:[Object(g.jsx)(P,{}),Object(g.jsx)(R,{}),Object(g.jsx)(se,{}),Object(g.jsx)(z,{}),Object(g.jsx)("p",{className:"mt-10 cursor-pointer underline m-auto w-56",onClick:function(e){n(!a)},children:a?"Hide Config":"Show Config"}),a?Object(g.jsx)("div",{children:Object(g.jsx)(q,{})}):null]})})},le=function(){var e=Object(c.useContext)(y),t=e.dispatch,a=e.status,n=e.weights,r=[];if(!n)return null;n.actionTypeArray.forEach((function(e){r.push({id:e.id,name:e.name})}));var i=function(e){t({type:"SET_ACTION_FILTER",actionType:e.target.id,value:e.target.checked})};return Object(g.jsxs)("div",{className:"mt-5",children:[Object(g.jsx)("p",{className:"text-xl font-bold",children:"Filter Action Type"}),Object(g.jsx)("div",{className:"flex flex-col",children:r.map((function(e){return Object(g.jsxs)("div",{className:"flex space-x-1",children:[Object(g.jsx)("input",{className:"self-center",id:e.id,onChange:i,checked:!a.actionFilters||void 0===a.actionFilters[e.id]||a.actionFilters[e.id],type:"checkbox"}),Object(g.jsx)("label",{className:"self-center",children:e.name})]},e.id)}))}),Object(g.jsxs)("div",{className:"flex space-x-2",children:[Object(g.jsx)("button",{className:"btn mt-2",onClick:function(e){t({type:"ALL_ACTION",value:!0,actionTypes:n.actionTypes})},children:"Select All"}),Object(g.jsx)("button",{className:"btn mt-2",onClick:function(e){t({type:"ALL_ACTION",value:!1,actionTypes:n.actionTypes})},children:"De-select All"})]})]})},ue=function(){var e=Object(c.useContext)(y),t=e.status,a=e.dispatch,n=Object(c.useState)("all"),r=Object(u.a)(n,2),i=r[0],s=r[1];Object(c.useEffect)((function(){t&&s(t.dayFilter)}),[t]);var o=function(e){a({type:"SET_DAY_FILTER",value:e.target.value})};return Object(g.jsxs)("div",{className:"mt-5",children:[Object(g.jsx)("p",{className:"text-xl font-bold",children:"Filter Date"}),Object(g.jsx)("div",{children:[{name:"dateFilter",value:"all",label:"All"},{name:"dateFilter",value:"today",label:"Today"},{name:"dateFilter",value:"nextThree",label:"Next 3 Days"},{name:"dateFilter",value:"overdue",label:"Overdue"}].map((function(e){return Object(g.jsxs)("div",{className:"flex space-x-1",children:[Object(g.jsx)("input",{className:"self-center",onChange:o,type:"radio",name:e.name,value:e.value,id:e.value,checked:i===e.value}),Object(g.jsx)("label",{className:"self-center",children:e.label})]},e.value)}))})]})},de=function(){var e=Object(c.useContext)(y),t=e.dispatch,a=e.status,n=e.weights,r=[];if(!n)return null;n.importanceArray.forEach((function(e){r.push({id:e.id,name:e.name,weight:e.weight})})),r=r.sort((function(e,t){return t.weight-e.weight}));var i=function(e){t({type:"SET_IMPORTANCE_FILTER",importance:e.target.id,value:e.target.checked})};return Object(g.jsxs)("div",{children:[Object(g.jsx)("p",{className:"text-xl font-bold",children:"Filter Importance"}),Object(g.jsx)("div",{className:"flex flex-col",children:r.map((function(e){return Object(g.jsxs)("div",{className:"flex space-x-1",children:[Object(g.jsx)("input",{className:"self-center",id:e.id,onChange:i,checked:!a.importanceFilters||void 0===a.importanceFilters[e.id]||a.importanceFilters[e.id],type:"checkbox"}),Object(g.jsx)("label",{className:"self-center",children:e.name})]},e.id)}))}),Object(g.jsxs)("div",{className:"flex space-x-2",children:[Object(g.jsx)("button",{className:"btn mt-2",onClick:function(e){t({type:"ALL_IMPORTANCE",value:!0,importances:n.importanceTypes})},children:"Select All"}),Object(g.jsx)("button",{className:"btn mt-2",onClick:function(e){t({type:"ALL_IMPORTANCE",value:!1,importances:n.importanceTypes})},children:"De-select All"})]})]})},je=function(){var e=Object(c.useContext)(y).dispatch;return Object(g.jsxs)("div",{className:"col-span-3 p-5 h-screen overflow-hidden",children:[Object(g.jsx)(de,{}),Object(g.jsx)(ue,{}),Object(g.jsx)(le,{}),Object(g.jsx)("button",{onClick:function(t){e({type:"ALL_IMPORTANCE",value:!0}),e({type:"ALL_ACTION",value:!0}),e({type:"SET_DAY_FILTER",value:"all"})},className:"importantBtn mt-10",children:"Remove All Filters"})]})};var be=function(){return Object(g.jsx)(N,{children:Object(g.jsxs)("div",{className:"App",children:[Object(g.jsxs)("div",{className:"grid grid-cols-12",children:[Object(g.jsx)(oe,{}),Object(g.jsx)(C,{}),Object(g.jsx)(je,{})]}),Object(g.jsx)(H,{})]})})};i.a.render(Object(g.jsx)(n.a.StrictMode,{children:Object(g.jsx)(be,{})}),document.getElementById("root"))},82:function(e,t,a){}},[[175,1,2]]]);
//# sourceMappingURL=main.66e6f464.chunk.js.map