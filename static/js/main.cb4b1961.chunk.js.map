{"version":3,"sources":["store/reducers/modalReducer.js","store/contexts/modalContext.js","components/modals/EditSheet/EditAction.js","store/reducers/dataReducer.js","store/contexts/dataContext.js","components/modals/EditSheet/EditActionType.js","components/modals/EditSheet/EditExpectedUpdate.js","config/fbConfig.js","store/actions.js","components/modals/EditSheet/EditProject.js","components/icons/ExitIcon.js","components/modals/EditSheet/EditNotes.js","components/icons/PencilIcon.js","components/modals/EditSheet/EditLink.js","components/modals/EditSheet/EditModal.js","components/modals/EditSheet/EditSheet.js","store/contexts/fbContext.js","store/contexts/configContext.js","store/reducers/stateReducer.js","store/contexts/stateContext.js","components/planningView/PlanningDayItem.js","components/planningView/PlanningDay.js","components/planningView/PlanningWeek.js","components/PlanningView.js","components/leftBar/LineChart.js","chartHelper.js","components/icons/ImportanceIcon.js","components/itemCards/ItemCardWithProject.js","components/itemCards/ItemCard.js","components/itemCards/ItemCardContainer.js","store/reducers/filterReducer.js","store/contexts/filterContext.js","UseFilteredItems.js","components/centerColumn/CardCollection.js","store/contexts/completedItemsContext.js","UseMetrics.js","components/centerColumn/UpcomingWork.js","components/centerColumn/CenterColumn.js","components/leftBar/OneOffs/AddOneOff.js","components/leftBar/OneOffs/OneOffItem.js","components/leftBar/OneOffs/OneOffs.js","components/leftBar/todoConfig/ActionConfig.js","components/leftBar/todoConfig/ImportanceConfig.js","components/leftBar/todoConfig/Config.js","components/leftBar/TotalScore.js","components/leftBar/ProjectListItem.js","components/icons/PlusIcon.js","components/leftBar/ProjectList.js","components/leftBar/CompletedToday.js","components/leftBar/LeftBar.js","components/rightBar/ActionTypeFilter.js","components/rightBar/DayFilter.js","components/rightBar/ImportanceFilters.js","components/rightBar/RightBar.js","components/WorkingView.js","components/Main.js","components/modals/projectEdit/EditDescription.js","components/modals/projectEdit/EditImportance.js","components/modals/projectEdit/EditName.js","components/modals/projectEdit/ProjectEditModal.js","components/modals/projectEdit/ProjectEditSheet.js","components/EscDetect.js","store/contexts/itemsContext.js","store/contexts/oneOffsContext.js","store/contexts/projectsContext.js","store/contexts/weightsContext.js","store/contexts/historyContext.js","store/hydrateData.js","components/DataHydrator.js","components/auth/Login.js","components/leftBar/AddItem.js","components/Nav.js","App.js","index.js"],"names":["modalReducer","state","action","type","showSheet","itemID","itemProjectID","showProjectSheet","projectID","showChart","ModalContext","React","createContext","ModalProvider","children","useReducer","modalStatus","modalDispatch","Provider","value","EditAction","change","useState","editing","setEditing","click","e","className","onFocus","target","select","onBlur","autoFocus","id","onChange","onClick","dataReducer","items","data","projects","weights","totalScore","allDataPulled","history","oneOffs","allLoaded","DataContext","DataContextProvider","dataDispatch","EditActionType","useContext","actionTypes","actionTypeArray","sort","a","b","weight","actionType","filter","aType","parseInt","size","map","name","EditExpectedUpdate","expectedUpdate","seconds","moment","unix","toDate","isClearable","selected","newDate","g","firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","firestore","updateImportanceTypes","newITypes","oldITypes","Object","keys","key","isNaN","parseFloat","collection","doc","currentUserID","get","then","userDoc","update","importanceTypes","updateActionTypes","newATypes","oldATypes","auth","currentUser","uid","EditProject","sortedProjects","project","proj","disabled","ExitIcon","xmlns","fill","viewBox","stroke","strokeLinecap","strokeLinejoin","strokeWidth","d","EditNotes","PencilIcon","EditLink","toggleEditing","placeholder","rel","href","EditModal","node","useRef","Date","notes","link","newItem","setNewItem","changed","setChanged","isNew","setNew","useEffect","item","ref","now","add","deleted","completed","created","addNewItem","updateItem","window","confirm","i","completedDate","actionTypeWeightEnd","actionTypeWeight","importanceWeightEnd","importanceWeight","dayDropEnd","dayDrop","scoreOnComplete","score","completeItem","deletedDate","scoreOnDelete","deleteItem","EditSheet","FbContext","FbProvider","useAuthState","FBuser","ConfigContext","ConfigProvider","docRef","useDocumentData","config","loading","configLoading","stateReducer","workingView","StateContext","StateProvider","stateStatus","stateDispatch","PlanningDayItem","daysItem","useDrag","collect","monitor","isDragging","drag","opacityClass","itemScore","newScore","Math","max","colorClass","toFixed","actionTypeName","PlanningDay","props","day","useDrop","accept","drop","m","startOf","isSame","date","dropped","getItem","isOver","hovered","diff","cp","daysItems","addOnID","same","forEach","push","overdueItems","currentCheck","previousMonday","subtract","getPreviousMonday","isBefore","daysScore","bgClass","today","weekday","format","length","overdueItem","PlanningWeek","week","days","todaysDate","isAfter","PlanningView","DndProvider","backend","HTML5Backend","d3","d3module","tip","d3tip","LineChart","chartData","chartClass","margin","chartArea","current","attr","selectAll","remove","graph","append","interpolate","require","ImportanceIcon","importance","importances","importanceArray","colors","color","totalImportances","sortedImportances","numberOfDots","dots","dot","cx","cy","r","ItemCardWithProject","daysToText","daysTo","data-tip","description","delayShow","ItemCard","ItemCardContainer","showProject","filterReducer","importanceFilters","newImportanceFilters","actionFilters","newActionFilters","dayFilter","FilterContext","FilterContextProvider","dayFilters","filtName","filterData","filterDispatch","useFilteredItems","sortedItems","undefined","filterNumber","CardCollection","newItems","CompletedItemsContext","CompltetedItemsProvider","userID","useCollectionData","where","idField","completedItems","completedItemsLoading","useMetrics","filteredItems","todaysScore","setTodaysScore","todaysItems","addScores","oneOff","tomorrowsScore","setTomorrowsScore","tomorrowsItems","thisWeeksScore","setThisWeeksScore","thisWeeksItems","getNextMonday","completedScore","setCompletedScore","createdScore","setCreatedScore","filteredScore","setFilteredScore","itemsToAdd","nextMonday","UpcomingWork","CenterColumn","AddOneOff","newOneOff","setNewOneOff","onSubmit","preventDefault","done","addOneOff","OneOffItem","inputValue","setInputValue","onDoubleClick","newName","OneOffs","sortedOneOffs","ActionConfig","setNewATypes","inputChangeWeight","attributes","actionid","nodeValue","inputChangeName","onBlurWeight","newValue","onBlurName","actionArray","newID","newKey","addActionType","ImportanceConfig","setNewITypes","importanceid","iType","addImportance","Config","TotalScore","currentUserScore","currentScore","console","log","t","logHistory","ProjectListItem","PlusIcon","ProjectList","newProjects","itemsInProj","projScore","CompletedToday","formattedCompletedScore","formattedCreatedScore","LeftBar","showConfig","setShowConfig","ActionTypeFilter","filters","onCheck","checked","filt","DayFilter","setValue","filterTypes","ImportanceFilters","RightBar","WorkingView","Main","downForMaintenance","EditDescription","EditImportance","EditName","ProjectEditModal","newProject","setNewProject","addProject","updateProject","itemSnap","batch","docs","itemDoc","itemRef","commit","ProjectEditSheet","EscDetect","keyEvent","code","document","addEventListener","removeEventListener","ItemsContext","ItemsProvider","itemsLoading","OneOffsContext","OneOffsProvider","oneOffsLoading","ProjectsContext","ProjectsProvider","projectsLoading","WeightsContext","WeightsProvider","userData","weightsLoading","HistoryContext","HistoryProvider","setHistory","user","req","XMLHttpRequest","onload","JSON","parse","response","onerror","params","open","send","stringify","historyLoading","hydrateData","newWeights","hydrateWeights","hydrateItems","hydrateProjects","itemsInProject","hydrateItem","itemDeleted","weekDaysBetween","itemColorClass","importanceName","timestamp","end","start","multiplier","dailyInfo","totalDays","DataHydrator","Login","email","pass","creds","setCreds","signOut","handleChange","signInWithEmailAndPassword","AddItem","Nav","App","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.cb4b1961.chunk.js","sourcesContent":["\nexport const modalReducer = (state, action) => {\n  switch(action.type){\n    case 'SHOW_SHEET':\n      return {\n        ...state,\n        showSheet: true,\n        itemID: action.itemID,\n        itemProjectID: action.itemProjectID\n      }\n    case 'SHOW_PROJECT_SHEET':\n      return {\n        ...state,\n        showProjectSheet: true,\n        projectID: action.projectID\n      }\n    case 'HIDE_SHEET':\n      return{\n        ...state,\n        showSheet: false,\n        itemID: null,\n        itemProjectID: null\n      }\n    case 'HIDE_PROJECT_SHEET':\n      return{\n        ...state,\n        showProjectSheet: false,\n        projectID: null\n      }\n    case 'TOGGLE_CHART':\n      return{\n        ...state,\n        showChart: !state.showChart\n      }\n    default: \n      return state\n  }\n}","import React, { useReducer } from \"react\";\nimport { modalReducer } from '../reducers/modalReducer'\n\nexport const ModalContext = React.createContext();\n\n\nexport const ModalProvider = ({ children }) => {\n\n  const [modalStatus, modalDispatch] = useReducer(modalReducer, {\n    showSheet: false,\n    showProjectSheet: false,\n    itemID: null,\n    showChart: false\n  });\n\n\n\n\n  return (\n    <ModalContext.Provider value={{ modalStatus, modalDispatch }}>{children}</ModalContext.Provider>\n  );\n};\n\n","import React, { useState } from 'react'\nimport TextareaAutosize from 'react-textarea-autosize';\n\n\nconst EditAction = ({value, change}) => {\n  const [editing, setEditing] = useState(false)\n\n  const click = (e) => {\n    setEditing(!editing)\n  }\n\n  const focus = (e) => {\n    e.target.select()\n  }\n\n  return ( \n    <div className=\"\">\n      { editing ? \n        <TextareaAutosize onFocus={focus} onBlur={click} autoFocus id='action' onChange={change} className={'focus:outline-none border-2 border-black '} value={value}></TextareaAutosize>\n        :\n        value === \"\" ? \n        <p className=\"italic text-gray-500 cursor-pointer underline inline-block\" onClick={click}>{\"Add Action\"}</p>\n        :\n        <p className=\"cursor-pointer hover:underline inline-block\" onClick={click}>{value}</p>\n      }\n    </div>\n   );\n}\n \nexport default EditAction;","\nexport const dataReducer = (state, action) => {\n  switch(action.type){\n    case 'SET_DATA':\n      return{\n        ...state,\n        items: action.data.items,\n        projects: action.data.projects,\n        weights: action.data.weights,\n        totalScore: action.data.totalScore,\n        allDataPulled: action.data.allDataPulled\n      }\n    case 'SET_HISTORY':\n      return{\n        ...state,\n        history: action.history\n      }\n    case 'SET_ONE_OFFS':\n      return{\n        ...state,\n        oneOffs: action.oneOffs\n      }\n    case 'SET_ALL_LOADED':\n      return{\n        ...state,\n        allLoaded: action.allLoaded\n      }\n    default: \n      return state\n  }\n}","import React, { useReducer } from \"react\";\nimport { dataReducer } from '../reducers/dataReducer'\n\n\nexport const DataContext = React.createContext();\n\n\nexport const DataContextProvider = ({ children }) => {\n\n\n  const [data, dataDispatch] = useReducer(dataReducer, {\n    projects: null,\n    items: null,\n    weights: null,\n    oneOffs: null,\n    history: null,\n    totalScore: 0,\n    allLoaded: false\n  });\n\n\n  return (\n    <DataContext.Provider value={{ projects: data.projects, items: data.items, weights: data.weights, oneOffs: data.oneOffs, history: data.history, totalScore: data.totalScore, allLoaded: data.allLoaded, dataDispatch }}>{children}</DataContext.Provider>\n  );\n};\n\n","import React, { useContext, useState } from 'react';\nimport { DataContext } from '../../../store/contexts/dataContext';\n\nconst EditActionType = ({value, change}) => {\n\n  const { weights } = useContext(DataContext)\n  const [editing, setEditing] = useState(false)\n\n\n  var actionTypes = weights ? weights.actionTypeArray : null\n  if(actionTypes){\n    actionTypes = actionTypes.sort((a,b) => {\n      return b.weight - a.weight\n    })\n  }\n\n  const actionType = actionTypes ? actionTypes.filter(aType => {\n    return aType.id === parseInt(value)\n  })[0] : null;\n\n\n  const click = (e) => {\n    setEditing(!editing)\n  }\n\n  const changed = (e) => {\n    change(e)\n\n    setEditing(false)\n  }\n\n  return ( \n    <div className=\"mt-5\">\n      { editing ? \n        <select autoFocus onBlur={click} onClick={click} size={5} className='border-2 border-black' onChange={changed} id='actionType' value={value}>\n          { actionTypes && actionTypes.map(aType => {\n            return <option key={aType.id} value={aType.id}>{aType.name}</option> \n          })}\n        </select>\n        :\n        <p className=\"font-bold text-md inline-block cursor-pointer hover:underline\" onClick={click} >{actionType ? actionType.name : \"\"}:</p>\n      }\n\n    </div>\n   );\n}\n \nexport default EditActionType;","import React from 'react'\nimport moment from 'moment'\nimport DatePicker from \"react-datepicker\";\nimport \"react-datepicker/dist/react-datepicker.css\";\n\n\nconst EditExpectedUpdate = ({value, change}) => {\n\n  const expectedUpdate = value && value.seconds ? moment.unix(value.seconds).toDate() : value ? value : null\n\n  const dateChange = (newDate,g) => {\n    var dateToSend = newDate\n    if(dateToSend !== null){\n      change(dateToSend)\n    }\n  }\n\n  const focus = (e) => {\n    e.target.select()\n  }\n\n  return ( \n    <div className=\"mt-2 flex space-x-2\">\n      <p className=\"font-bold text-md\">Due:</p>\n      <DatePicker id='expectedUpdate' isClearable={false} className='cursor-pointer hover:underline' selected={expectedUpdate} onFocus={focus} onChange={dateChange} />\n    </div>\n   );\n}\n \nexport default EditExpectedUpdate;","import firebase from 'firebase/app';\nimport 'firebase/firestore';\nimport 'firebase/auth';\nimport 'firebase/analytics'\n\n// Replace this with your own config details\nvar config = {\n  apiKey: \"AIzaSyCSu3ggsS66Mo1OullwbFJIg9mibC9E9wY\",\n  authDomain: \"todo-8303f.firebaseapp.com\",\n  projectId: \"todo-8303f\",\n  storageBucket: \"todo-8303f.appspot.com\",\n  messagingSenderId: \"928128254937\",\n  appId: \"1:928128254937:web:a3f32fafc7ca5ba6c40fc8\"\n};\n\nfirebase.initializeApp(config);\nfirebase.firestore()\n\nexport default firebase ","import firebase from '../config/fbConfig'\nimport moment from 'moment'\n\n\n\nexport const completeOneOff = (id) => {\n  firebase.firestore().collection('users/' + currentUserID() + '/oneOffs').doc(id).update({\n    done: true\n  })\n}\n\nexport const addOneOff = (oneOff) => {\n  const userID = currentUserID()\n  const now = new Date()\n  firebase.firestore().collection('users/' + currentUserID() + '/oneOffs').add({\n    name: oneOff,\n    done: false,\n    userID,\n    created: now\n  })\n}\n\nexport const updateOneOff = (newName, id) => {\n  firebase.firestore().collection('users/' + currentUserID() + '/oneOffs').doc(id).update({\n    name: newName\n  })\n}\n\nexport const login = (email, pass) => {\n  firebase.auth().signInWithEmailAndPassword(\n    email,\n    pass\n  )\n}\n\nexport const logout = () => {\n  firebase.auth().signOut()\n}\n\n\nexport const addNewItem = (newItem) => {\n  const now = new Date()\n  firebase.firestore().collection('users/' + currentUserID() + '/items').add({\n    action: newItem.action,\n    actionType: parseInt(newItem.actionType),\n    expectedUpdate: newItem.expectedUpdate,\n    deleted: false,\n    completed: false,\n    projectID: newItem.projectID,\n    created: now,\n    notes: newItem.notes,\n    link: newItem.link\n  })\n}\n\nexport const deleteItem = (itemID, items, weights) => {\n  const item = items.filter(i => {\n    return i.id === itemID\n  })[0]\n  const now = new Date()\n  firebase.firestore().collection('users/' + currentUserID() + '/items').doc(itemID).update({\n    deleted: true,\n    deletedDate: now,\n    actionTypeWeightEnd: item.actionTypeWeight,\n    importanceWeightEnd: item.importanceWeight,\n    dayDropEnd: item.dayDrop,\n    scoreOnDelete: item.score\n  })\n}\n\nexport const completeItem = (itemID, items, weights) => {\n  const item = items.filter(i => {\n    return i.id === itemID\n  })[0]\n  const now = new Date()\n  firebase.firestore().collection('users/' + currentUserID() + '/items').doc(itemID).update({\n    completed: true,\n    completedDate: now,\n    actionTypeWeightEnd: item.actionTypeWeight,\n    importanceWeightEnd: item.importanceWeight,\n    dayDropEnd: item.dayDrop,\n    scoreOnComplete: item.score\n  })\n}\n\nexport const updateImportanceTypes = (newITypes, oldITypes) => {\n  const keys = Object.keys(newITypes)\n  for (const key of keys) {\n    if(!isNaN(parseFloat(newITypes[key].weight))){\n      oldITypes[key] = {\n        ...newITypes[key],\n        weight: parseFloat(newITypes[key].weight)\n      }\n    }\n  }\n  firebase.firestore().collection('users').doc(currentUserID()).get().then(userDoc => {\n    firebase.firestore().collection('users').doc(currentUserID()).update({\n      importanceTypes: oldITypes\n    })\n  })\n}\n\nexport const updateActionTypes = (newATypes, oldATypes) => {\n  const keys = Object.keys(newATypes)\n  for (const key of keys) {\n    if(!isNaN(parseFloat(newATypes[key].weight))){\n      oldATypes[key] = {\n        ...newATypes[key],\n        weight: parseFloat(newATypes[key].weight)\n      }\n    }\n  }\n  firebase.firestore().collection('users').doc(currentUserID()).get().then(userDoc => {\n    firebase.firestore().collection('users').doc(currentUserID()).update({\n      actionTypes: oldATypes\n    })\n  })\n}\n\nexport const logHistory = (newScore) => {\n  const now = new Date()\n  firebase.firestore().collection('users').doc(currentUserID()).get().then(userDoc => {\n    if(userDoc.data().currentScore.toFixed(2) !== newScore.toFixed(2)){\n      console.log('log history. current:', userDoc.data().currentScore, 'new', newScore)\n      firebase.firestore().collection('users').doc(currentUserID()).update({\n        currentScore: parseFloat(newScore.toFixed(2))\n      }).then(t => {\n        firebase.firestore().collection('users/' + currentUserID() + '/history').add({\n          date: now,\n          score: parseFloat(newScore.toFixed(2))\n        })\n      })\n    }\n  })\n\n}\n\nexport const updateItem = (newItem) => {\n  firebase.firestore().collection('users/' + currentUserID() + '/items').doc(newItem.id).update({\n    action: newItem.action,\n    actionType: parseInt(newItem.actionType),\n    expectedUpdate: newItem.expectedUpdate,\n    projectID: newItem.projectID,\n    notes: newItem.notes,\n    link: newItem.link\n  })\n}\n\nexport const addImportance = (importanceTypes) => {\n  const keys = Object.keys(importanceTypes)\n  const newID = keys.length + 1;\n  const newKey = \"importanceTypes.\" + newID\n  firebase.firestore().collection('users').doc(currentUserID()).update({\n    [newKey]: {id: newID, name: \"New\", weight: 0}\n  })\n}\n\nexport const addActionType = (actionTypes) => {\n  const keys = Object.keys(actionTypes)\n  const newID = keys.length + 1;\n  const newKey = \"actionTypes.\" + newID\n  firebase.firestore().collection('users').doc(currentUserID()).update({\n    [newKey]: {id: newID, name: \"New\", weight: 0}\n  })\n}\n\nexport const updateProject = (newProject) => {\n  firebase.firestore().collection('users/' + currentUserID() + '/projects').doc(newProject.id).update({\n    description: newProject.description,\n    importance: parseInt(newProject.importance),\n    name: newProject.name\n  })\n}\n\nexport const addProject = (newProject) => {\n  firebase.firestore().collection('users/' + currentUserID() + '/projects').add({\n    description: newProject.description,\n    importance: parseInt(newProject.importance),\n    name: newProject.name,\n    deleted: false\n  })\n}\n\nexport const deleteProject = (projectID) => {\n  const projectRef = firebase.firestore().collection('users/' + currentUserID() + '/projects').doc(projectID)\n  projectRef.update({\n    deleted: true\n  }).then(t => {\n    firebase.firestore().collection('users/' + currentUserID() + '/items').where('project','==',projectID).where('deleted','!=',true).get().then(itemSnap => {\n\n      var batch = firebase.firestore().batch();\n\n      itemSnap.docs.forEach(itemDoc => {\n        var itemRef = firebase.firestore().collection('users/' + currentUserID() + '/items').doc(itemDoc.id)\n        batch.update(itemRef, {\"deleted\": true});\n      })\n\n      // Commit the batch\n      batch.commit()\n    })\n  })\n}\n\nexport const dropped = (item,day) => {\n  if(moment.unix(item.expectedUpdate.seconds).startOf('days').isSame(moment(day.date).startOf('days'))){\n    return\n  }else{\n    const newDate = moment(day.date).startOf('days').toDate()\n    firebase.firestore().collection('users/' + currentUserID() + '/items').doc(item.id).update({\n      expectedUpdate: newDate,\n    })\n  }\n}\n\nconst currentUserID = () => {\n  return firebase.auth().currentUser.uid\n}","import React, { useContext, useState } from 'react'\nimport { DataContext } from '../../../store/contexts/dataContext'\n\nconst EditProject = ({value, change}) => {\n\n  const { projects } = useContext(DataContext)\n  const [editing, setEditing] = useState(false)\n\n  var sortedProjects = []\n  if(projects){\n    sortedProjects  = projects.sort((a,b) => {\n      return b.totalScore - a.totalScore\n    })\n  }\n\n  const project = projects ? projects.filter(proj => {\n    return proj.id === value\n  })[0] : null\n\n\n  const click = (e) => {\n    setEditing(!editing)\n  }\n\n  const changed = (e) => {\n    change(e)\n    setEditing(false)\n  }\n\n  return ( \n    <div className=\"mt-2\">\n      { editing ? \n        <select autoFocus onBlur={click} onClick={click} size={10} className='border-2 border-black text-xl font-bold' id='projectID' value={value} onChange={changed}>\n            <option disabled value={''}>Select a Project</option>\n          { sortedProjects && sortedProjects.map(project => {\n            return <option key={project.id} value={project.id}>{project.name}</option> \n          })}\n        </select>\n        :\n        <p className=\"text-xl font-bold hover:underline cursor-pointer\" onClick={click}>{project ? project.name : ''}</p>\n      }\n\n    </div>\n   );\n}\n \nexport default EditProject;","import React from 'react'\n\n\nconst ExitIcon = () => {\n  return ( \n    <svg className=\"cursor-pointer\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M6 18L18 6M6 6l12 12\" />\n    </svg>\n   );\n}\n \nexport default ExitIcon;","import React, { useState } from 'react'\nimport TextareaAutosize from 'react-textarea-autosize';\n\n\nconst EditNotes = ({value, change}) => {\n  const [editing, setEditing] = useState(false)\n\n  const click = (e) => {\n    setEditing(!editing)\n  }\n\n  const focus = (e) => {\n    e.target.select()\n  }\n\n\n\n  return ( \n    <div className=\"mt-2\">\n      <p className=\"text-md font-bold\">Notes</p>\n      { editing ?\n        <TextareaAutosize id='notes' autoFocus onBlur={click} onFocus={focus} onChange={change} className={'focus:outline-none border-2 border-black '} value={value}></TextareaAutosize>\n        :\n        value === \"\" ? \n        <p className=\"italic text-gray-500 cursor-pointer underline inline-block\" onClick={click}>{\"Add Note\"}</p>\n        :\n        <p className=\"cursor-pointer hover:underline inline-block\" onClick={click}>{value}</p>\n      }\n    </div>\n   );\n}\n \nexport default EditNotes;","import React from 'react';\n\nconst PencilIcon = () => {\n  return (\n    <div>\n      <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z\" />\n      </svg>\n    </div>\n   );\n}\n \nexport default PencilIcon;","import React, { useState } from 'react'\nimport PencilIcon from '../../icons/PencilIcon'\n\n\n\nconst EditLink = ({value, change}) => {\n\n  const [editing, setEditing] = useState(false)\n\n  const toggleEditing = (e) => {\n    setEditing(!editing)\n  }\n\n  const focus = (e) => {\n    e.target.select()\n  }\n\n  if(value === \"\" && !editing){\n    return(\n      <div className=\"mt-2\">\n        <p className=\"italic text-gray-500 cursor-pointer underline inline-block\" onClick={toggleEditing}>{\"Add Link\"}</p>\n      </div>\n    )\n  }\n\n  if(editing){\n    return(\n      <div className=\"mt-2\">\n        <input placeholder=\"Enter URL\" id='link' autoFocus onFocus={focus} onBlur={toggleEditing} onChange={change} value={value} />\n      </div>\n    )\n  }\n\n  return ( \n    <div className=\"mt-2\">\n      <div className=\"flex space-x-1\">\n        <a target=\"_blank\" rel=\"noreferrer\" href={value} className=\"text-blue-500 underline text-md font-bold\">Link</a>\n        <div onClick={toggleEditing} className=\"w-4 h-4 cursor-pointer self-center\">\n          <PencilIcon />\n        </div>\n      </div>\n    </div>\n   );\n}\n \nexport default EditLink;","import React, { useState, useContext, useEffect, useRef } from 'react'\nimport EditAction from './EditAction';\nimport EditActionType from './EditActionType';\nimport EditExpectedUpdate from './EditExpectedUpdate';\nimport { updateItem, deleteItem, addNewItem, completeItem } from '../../../store/actions';\nimport EditProject from './EditProject';\nimport ExitIcon from '../../icons/ExitIcon';\nimport { ModalContext } from '../../../store/contexts/modalContext';\nimport { DataContext } from '../../../store/contexts/dataContext';\nimport EditNotes from './EditNotes';\nimport EditLink from './EditLink';\n\n\nconst EditModal = () => {\n\n  const node = useRef(null)\n  const { items, weights } = useContext(DataContext)\n  const { modalStatus, modalDispatch } = useContext(ModalContext)\n\n  const [newItem, setNewItem] = useState({\n    action: '',\n    actionType: 1,\n    expectedUpdate: new Date(),\n    projectID: '',\n    notes: '',\n    link: ''\n  })\n\n  const [changed, setChanged] = useState(false)\n\n  const [isNew, setNew] = useState(true)\n\n  useEffect(() => {\n    if(modalStatus && modalStatus.itemID){\n      if(items){\n        setNewItem(items.filter(item => {return item.id === modalStatus.itemID})[0])\n        setNew(false)\n      }else{\n        setNew(true)\n      }\n    }\n    if(modalStatus.itemProjectID){\n      setNewItem({\n        action: '',\n        actionType: 1,\n        expectedUpdate: new Date(),\n        projectID: modalStatus.itemProjectID,\n        notes: '',\n        link: ''\n      })\n    }\n  }, [modalStatus, items])\n\n\n  useEffect(() => {\n    if(newItem.projectID === '' || newItem.action === ''){\n      setChanged(false)\n    }else{\n      setChanged(true)\n    }\n  },[newItem.projectID, newItem.action])\n\n  const change = (e) => {\n    setNewItem({\n      ...newItem,\n      [e.target.id]: e.target.value\n    })\n  }\n\n  const dateChange = (newDate) => {\n    setNewItem({\n      ...newItem,\n      expectedUpdate: newDate\n    })\n  }\n\n  const exitClick = (e) => {\n    modalDispatch({type:'HIDE_SHEET'})\n  }\n\n  const deleteClicked = (e) => {\n    if(window.confirm('Are you sure you want to delete?') === true){\n      deleteItem(newItem.id, items, weights)\n      modalDispatch({type:'HIDE_SHEET'})\n    }\n  }\n\n\n  const doneClick = (e) => {\n    if(!changed) return;\n    updateItem(newItem)\n    modalDispatch({type:'HIDE_SHEET'})\n  }\n\n  const addClick = (e) => {\n    if(!changed) return;\n    addNewItem(newItem)\n    modalDispatch({type:'HIDE_SHEET'})\n  }\n\n  const completeClick = (e) => {\n    if(window.confirm('Are you sure you want to complete?') === true){\n      completeItem(newItem.id, items, weights)\n      modalDispatch({type:'HIDE_SHEET'})\n    }\n  }\n\n\n  return ( \n      <div ref={node} id=\"modal\" className=\"relative overflow-scroll bg-white h-2/4 mt-10 p-5\">\n        <div onClick={exitClick} className=\"h-10 w-10 absolute top-0 right-0\">\n          <ExitIcon />\n        </div>\n        { isNew ? (\n          <p className=\"text-xl font-bold\">New Item</p>\n        ) : null\n          //<p className=\"text-xl font-bold\">Edit Item</p>\n        }\n        <EditProject value={newItem.projectID} change={change} />\n        <EditExpectedUpdate value={newItem.expectedUpdate} change={dateChange} />\n        <EditActionType value={newItem.actionType} change={change} />\n        <EditAction value={newItem.action} change={change} />\n        <EditNotes value={newItem.notes} change={change} />\n        <EditLink value={newItem.link} change={change} />\n        {\n          isNew ? (\n            <div className=\"flex space-x-2 mt-5\">\n              <button onClick={addClick} className={changed ? \"doneBtn\" : \"inactiveBtn\"}>Add</button>\n            </div>\n          ) : (\n            <div>\n              <div className=\"flex space-x-2 mt-5\">\n                <button onClick={doneClick} className={changed ? \"doneBtn\" : \"inactiveBtn\"}>Save</button>\n                <button onClick={completeClick} className=\"completeBtn\">Complete Task</button>\n                <button onClick={deleteClicked} className=\"importantBtn\">Delete Item</button>\n              </div>\n              <div>\n              </div>\n            </div>\n          )\n        }\n      </div>\n   );\n}\n \nexport default EditModal;","import React, { useContext } from 'react'\nimport { ModalContext } from '../../../store/contexts/modalContext';\nimport EditModal from './EditModal';\n\n\n\n\nconst EditSheet = () => {\n\n  const { modalStatus, modalDispatch } = useContext(ModalContext)\n\n  const onClick = (e) => {\n    if(e.target.id === \"edit-bg\"){\n      modalDispatch({type:'HIDE_SHEET'})\n    }\n  }\n\n\n  if(modalStatus.showSheet === false){\n    return null\n  }\n\n  return ( \n    <div onClick={onClick} id=\"edit-bg\" className='flex justify-center w-screen h-screen bg-gray-400 bg-opacity-50 fixed inset-0'>\n      <EditModal />\n    </div>\n   );\n}\n \nexport default EditSheet;","import React from \"react\";\nimport firebase from '../../config/fbConfig'\nimport { useAuthState } from 'react-firebase-hooks/auth';\n\n\nexport const FbContext = React.createContext();\n\n\nexport const FbProvider = ({ children }) => {\n\n  const [FBuser] = useAuthState(firebase.auth());\n\n\n  return (\n    <FbContext.Provider value={{ FBuser }}>{children}</FbContext.Provider>\n  );\n};\n\n","import React from \"react\";\nimport { useDocumentData } from 'react-firebase-hooks/firestore';\nimport firebase from '../../config/fbConfig'\n\n\nexport const ConfigContext = React.createContext();\n\n\nexport const ConfigProvider = ({ children }) => {\n\n  const docRef = firebase.firestore().collection('config').doc('2TttT72yuM5PAvGMjgJT')\n\n  const [config, loading] = useDocumentData(docRef);\n\n\n  return (\n    <ConfigContext.Provider value={{ config, configLoading: loading }}>{children}</ConfigContext.Provider>\n  );\n};\n\n","\nexport const stateReducer = (state, action) => {\n  switch(action.type){\n    case 'TOGGLE':\n      return {\n        ...state,\n        workingView: !state.workingView\n      }\n    default: \n      return state\n  }\n}","import React, { useReducer } from \"react\";\nimport { stateReducer } from '../reducers/stateReducer'\n\nexport const StateContext = React.createContext();\n\n\nexport const StateProvider = ({ children }) => {\n\n  const [stateStatus, stateDispatch] = useReducer(stateReducer, {\n    workingView: true\n  });\n\n\n\n\n  return (\n    <StateContext.Provider value={{ workingView: stateStatus.workingView, stateDispatch }}>{children}</StateContext.Provider>\n  );\n};\n\n","import React, { useContext } from 'react'\nimport { ModalContext } from '../../store/contexts/modalContext'\nimport { useDrag } from 'react-dnd'\n\n\nconst PlanningDayItem = ({daysItem}) => {\n\n  const [{isDragging}, drag] = useDrag(() => ({\n    type: 'ITEM',\n    item: {...daysItem},\n    collect: monitor => ({\n      isDragging: !!monitor.isDragging(),\n    })\n  }))\n\n  const { modalDispatch } = useContext(ModalContext)\n\n  const opacityClass = isDragging ? 'opacity-50' : 'opacity-100'\n\n  const itemClick = (e) => {\n    modalDispatch({type: 'SHOW_SHEET', itemID: daysItem.id})\n  }\n\n  const itemScore = daysItem.newScore ? Math.max(daysItem.newScore + daysItem.score,0) : daysItem.score\n\n  return ( \n    <div ref={drag} onClick={itemClick} className={\"cursor-pointer my-1 overflow-hidden \" + daysItem.colorClass + \" \" + opacityClass} key={daysItem.id}>\n      <p className=\"\">({itemScore.toFixed(2)}) {daysItem.action}</p>\n      <p className=\"text-xs\">{daysItem.actionTypeName} - {daysItem.project.name}</p>\n    </div>\n   );\n}\n \nexport default PlanningDayItem;","import React, { useContext } from 'react'\nimport { DataContext } from '../../store/contexts/dataContext';\nimport moment from 'moment'\nimport PlanningDayItem from './PlanningDayItem';\nimport { useDrop } from 'react-dnd'\nimport { dropped } from '../../store/actions'\n\nconst PlanningDay = (props) => {\n\n  const day = props.day\n\n  const [cp, drop] = useDrop(\n    () => ({\n      accept: 'ITEM',\n      drop: (i,m) => {\n        dropped(m.getItem(),day)\n      },\n      collect: (monitor) => {\n        const item = monitor.getItem();\n        if(!item || monitor.isOver() === false){\n          return {\n            hovered: false,\n            item: null\n          }\n        }\n\n        if(!moment.unix(item.expectedUpdate.seconds).startOf('days').isSame(day.date.startOf('days'))){\n          const diff = moment.unix(item.expectedUpdate.seconds).startOf('days').diff(day.date.startOf('days'))\n          item.newScore = (item.dayDrop * (diff/1000/60/60/24))\n          \n        }else{\n          item.newScore = 0\n        }\n        \n        return {\n          hovered: monitor.isOver(),\n          item\n        }\n      }\n    }),\n    [day]\n  )\n\n  const { items } = useContext(DataContext)\n\n  const getPreviousMonday = () => {\n    const currentCheck = moment().startOf('day')\n    var previousMonday = null;\n    while (previousMonday === null){\n      if(currentCheck.day() === 1){\n        previousMonday = currentCheck\n      }else{\n        currentCheck.subtract(1,'d')\n      }\n    }\n    return previousMonday;\n  }\n\n\n  const daysItems = items ? items.filter(item => {\n    return moment.unix(item.expectedUpdate.seconds).startOf('days').isSame(day.date.startOf('day'))\n  }).sort((a,b) => {\n    return b.score - a.score\n  }) : null\n\n  if(cp.item && cp.hovered === true){\n    const addOnID = cp.item.id\n    var same = false\n    daysItems.forEach(item => {\n      if(item.id === addOnID){\n        same = true;\n      }\n    })\n    if(!same){\n      daysItems.push(cp.item)\n      daysItems.sort((a,b) => {\n        const bS = b.newScore ? Math.max(b.newScore + b.score,0) : b.score;\n        const aS = a.newScore ? Math.max(a.newScore + a.score,0) : a.score;\n        return bS - aS\n      });\n    }\n  }\n\n  var overdueItems = items ? items.filter(item => {\n    if(day.date.isSame(getPreviousMonday()) && moment.unix(item.expectedUpdate.seconds).startOf('days').isBefore(day.date)){\n      return true\n    }\n    return false\n  }) : null\n\n  var daysScore = 0;\n\n  if(daysItems){\n    daysItems.forEach(item => {\n      if(item.newScore && item.newScore !== 0){\n        daysScore += Math.max((item.score + item.newScore),0)\n      }else{\n        daysScore += item.score\n      }\n    })\n  }\n\n\n  const bgClass = day.today === 0 ? 'bg-green-200' : day.today === -1 ? 'bg-gray-400' : ''\n\n  return ( \n    <div ref={drop} className={\" h-full border-r-2 border-black \" + bgClass}>\n      <div className=\"border-b-4 border-black\">\n        <p className={\"text-center font-bold \"}>{day.weekday}</p>\n        <p className=\"text-center\">{day.date.format(\"MM/DD/YYYY\")}</p>\n        <p className=\"text-center\">{daysScore.toFixed(2)}</p>\n      </div>\n      <div className=\"px-1 h-full\">\n      { overdueItems && overdueItems.length > 0 ? \n          <p className=\"font-bold\">Past Weeks:</p>\n          :\n          null\n        }\n        {overdueItems && overdueItems.length > 0 && overdueItems.map(overdueItem => {\n          return(\n            <PlanningDayItem daysItem={overdueItem} key={overdueItem.id} />\n          )\n        })\n        }\n        { overdueItems && overdueItems.length > 0 ? \n          <hr className=\"border-4 border-black\"></hr>\n          :\n          null\n        }\n        { daysItems && daysItems.map(daysItem => {\n          return(\n            <PlanningDayItem daysItem={daysItem} key={daysItem.id} />\n          )\n        })}\n      </div>\n    </div>\n   );\n}\n \nexport default PlanningDay;","import React from 'react'\nimport PlanningDay from './PlanningDay'\nimport moment from 'moment'\n\nconst PlanningWeek = ({week}) => {\n\n  const getPreviousMonday = () => {\n    const currentCheck = moment().startOf('day')\n    var previousMonday = null;\n    while (previousMonday === null){\n      if(currentCheck.day() === 1){\n        previousMonday = currentCheck\n      }else{\n        currentCheck.subtract(1,'d')\n      }\n    }\n    return previousMonday;\n  }\n\n  const days = []\n  for(var i = 0; i<7; i++){\n    const day = getPreviousMonday().startOf('day').add(i,'d').add(week,'w');\n    const todaysDate = moment().startOf('day')\n    const today = todaysDate.isSame(day) ? 0 : todaysDate.isBefore(day) ? 1 : todaysDate.isAfter(day) ? -1 : 0;\n    if(day.day() !== 0 && day.day() !== 6){\n      days.push({\n        weekday: day.format('dddd'),\n        date: day,\n        today\n      })\n    }\n  }\n\n\n  return ( \n    <div className=\"grid grid-cols-5 w-full border-b-8 border-black\">\n      { days && days.map(day => {\n        return(\n          <PlanningDay key={day.weekday} day={day} />\n        )\n      })}\n    </div>\n   );\n}\n \nexport default PlanningWeek;","import React from 'react'\nimport PlanningWeek from './planningView/PlanningWeek'\nimport { DndProvider } from 'react-dnd'\nimport { HTML5Backend } from 'react-dnd-html5-backend'\n\nconst PlanningView = () => {\n\n\n  return ( \n    <div className=\"overflow-scroll h-screen\">\n      <DndProvider backend={HTML5Backend}>\n        <PlanningWeek week={0} />\n        <PlanningWeek week={1} />\n      </DndProvider>\n    </div>\n   );\n}\n \nexport default PlanningView;","import React, { useRef, useEffect, useContext } from 'react';\nimport * as d3module from 'd3'\nimport d3tip from 'd3-tip'\nimport { FbContext } from '../../store/contexts/fbContext';\nimport { dateFormatter, decimalFormatter, xScaleTime, yScaleLinear, getToolTip } from '../../chartHelper'\nimport { ModalContext } from '../../store/contexts/modalContext';\nimport moment from 'moment'\n// import { HistoryContext } from '../../store/contexts/historyContext';\n\nconst d3 = {\n  ...d3module,\n  tip: d3tip\n}\n\n\nconst LineChart = () => {\n\n    const { FBuser } = useContext(FbContext)\n    const { modalStatus } = useContext(ModalContext)\n    var chartData = null\n\n    const chartClass = modalStatus.showChart ? 'block' : 'hidden'\n    // const { history } = useContext(HistoryContext)\n\n\n    chartData = null\n    // chartData = history\n    if(chartData){\n      chartData.lines.forEach(line => {\n        line.data.forEach(point => {\n          point.x = moment(point.x).toDate()\n        })\n      })\n    }\n\n\n    //ref to root svg\n    const ref = useRef()\n\n\n    useEffect(() => {\n\n      //graph size\n      const graphHeight = 200\n      const graphWidth = 500\n      const margin = { top: 10, bottom: 20, left: 35, right: 20 };\n      const width = graphWidth - margin.left - margin.right;\n      const height = graphHeight - margin.top - margin.bottom;\n\n      //select root svg\n      const svg = d3.select(ref.current)\n          .attr(\"viewBox\", `0 0 ${graphWidth} ${graphHeight}`)\n          \n      //select group for graph\n      const chartArea = svg.select('.chartArea')\n          .attr('height', graphHeight)\n          .attr('class','chartArea')\n          .attr('width', graphWidth)\n          .attr(\"transform\", `translate(${margin.left},${margin.top})`);\n      \n      chartArea.selectAll('g').remove();\n\n      //add group for data points\n      const graph = chartArea\n      .append(\"g\")\n      .attr(\"transform\", `translate(-${margin.left},-${margin.top})`);\n\n      //remove all current groups within graph\n      graph.selectAll('g').remove();\n      graph.selectAll('path').remove();\n\n      if(chartData){\n\n        //create dotted line group and append to graph\n        const hoverLineGroup = graph.append('g')\n            .style('opacity',0)\n            .attr(\"transform\", `translate(${margin.left},${margin.top})`)\n\n        //create x line and append\n        const xHoverLine = hoverLineGroup.append('line')\n        .attr('stroke','#aaa')\n        .attr('stroke-width', 1)\n        .attr('stroke-dasharray',4)\n\n        //create y line and append\n        const yHoverLine = hoverLineGroup.append('line')\n        .attr('stroke','#aaa')\n        .attr('stroke-width', 1)\n        .attr('stroke-dasharray',4)\n\n        //add group for x axis and move it to the bottom\n        const xAxisGroup = chartArea.append('g')\n            .attr('transform', `translate(0,${height})`);\n      \n        //add group for y axis\n        const yAxisGroup = chartArea.append('g')\n            .attr(\"transform\", `translate(0, 0)`)\n\n        //scales\n        const xScale = xScaleTime(chartData, width)\n        const yScale = yScaleLinear(chartData, height)\n\n        //d3 line path generator\n        const pathGenerator = d3.line()\n          .x(function(d){ return xScale(d.x) })\n          .y(function(d){ return yScale(d.y) })\n\n\n        //build each line dynamically\n        chartData.lines.forEach(line => {\n\n          //tooltip\n          const ttip = getToolTip()\n          graph.call(ttip);\n\n          const path = graph.append('path')\n              .attr(\"transform\", `translate(${margin.left},${margin.top})`)\n\n          //add circles\n          const circs = graph.selectAll('circle.' + line.name)\n              .data(line.data)\n              \n          const circSize = chartData.dotSize ? chartData.dotSize : 5\n\n          //remove exit selction for circles\n          circs.exit().remove()\n\n          //update current circs\n          circs.attr('r', circSize)\n              .attr('fill', 'black')\n              .attr('cx', d => xScale(d.x))\n              .attr('cy', d => yScale(d.y))\n              .attr(\"transform\", `translate(${margin.left},${margin.top})`)\n              .on('mouseover', ttip.show)\n              .on('mouseout', ttip.hide)\n\n\n\n          //append the enter selection to the DOM\n          circs.enter()\n              .append('circle')\n              .attr('fill', 'black')\n              .attr('cx', d => xScale(d.x))\n              .attr('cy', d => yScale(d.y))\n              .attr('r', circSize)\n              .attr(\"transform\", `translate(${margin.left},${margin.top})`)\n              .attr('opacity',1)\n              .on('mouseover.tip', ttip.show)\n              .on('mouseover.lines', (e,d) => {\n              xHoverLine\n                  .attr('x1',xScale(d.x))\n                  .attr('x2',xScale(d.x))\n                  .attr('y1',yScale(d.y))\n                  .attr('y2',height)\n\n              yHoverLine\n                  .attr('x1',0)\n                  .attr('x2',xScale(d.x))\n                  .attr('y1',yScale(d.y))\n                  .attr('y2',yScale(d.y))\n\n              hoverLineGroup.style('opacity', 1)\n              })\n              .on('mouseout.tip', ttip.hide)\n              .on('mouseout.lines', (e,d) => {\n                  hoverLineGroup.style('opacity', 0)\n              })\n          \n              const pathLength = path.node().getTotalLength();\n\n          // update path data\n          path.data([line.data])\n              .attr('fill', 'none')\n              .attr('stroke', line.color)\n              .attr('stroke-width', 2)\n              .attr('d', pathGenerator)\n              .style('opacity',0.75)\n              .attr(\"stroke-dasharray\", pathLength + \" \" + pathLength)\n\n        \n\n        })\n\n        const xTicks = chartData.xTicks ? chartData.xTicks : 5\n        const yTicks = chartData.yTicks ? chartData.yTicks : 5\n\n        //axis label formatting functions\n        var xFormat = chartData ? dateFormatter : (d) => d\n        var yFormat = chartData ? decimalFormatter : (d) => d\n\n        //create and call the axes\n        const xAxis = d3.axisBottom(xScale)\n            .tickFormat(d => xFormat(d))\n            .ticks(xTicks)\n\n        const yAxis = d3.axisLeft(yScale)\n            .tickFormat(d => yFormat(d))\n            .ticks(yTicks)\n\n\n        xAxisGroup.call(xAxis)\n            .attr('class','chartAxis')\n        yAxisGroup.call(yAxis)\n            .attr('class','chartAxis')\n\n      }\n    }, [FBuser, chartData])\n\n    return (\n        <div className=\"flex justify-center\">\n          <div className={chartClass + ' w-full'}>\n              <svg ref={ref}>\n                  <g className=\"chartArea\">\n\n                  </g>\n              </svg>\n          </div>\n        </div>\n    )\n  }\n \nexport default LineChart;","import moment from 'moment'\nimport * as d3module from 'd3'\nimport d3tip from 'd3-tip'\n\nconst d3 = {\n  ...d3module,\n  tip: d3tip\n}\n\n\nexport const cleanHistory = (history) => {  \n  if(history && history.length > 0){\n    return buildChartData(cleanDays(removeDuplicates(history)))\n  }else{\n    return null\n  }\n}\n\nconst cleanDays = (history) => {\n  var newHistory = [];\n  const uniqueDays = [...new Set(history.map(hist => moment.unix(hist.date.seconds).startOf('days').format('MM/DD/YY')))];\n\n  uniqueDays.forEach(day => {\n    var firstScore = 0;\n    var firstTimestamp = null;\n    var lastScore = 0;\n    var lastTimestamp = null;\n    history.forEach(hist => {\n      if(day === moment.unix(hist.date.seconds).startOf('days').format('MM/DD/YY')){\n        if(firstTimestamp === null){\n          firstTimestamp = hist.date;\n          firstScore = hist.score\n        }else if(moment.unix(hist.date.seconds).isBefore(moment.unix(firstTimestamp))){\n          firstTimestamp = hist.date;\n          firstScore = hist.score\n        }\n\n        if(lastTimestamp === null){\n          lastTimestamp = hist.date;\n          lastScore = hist.score\n        }else if(moment.unix(hist.date.seconds).isAfter(moment.unix(lastTimestamp))){\n          lastTimestamp = hist.date;\n          lastScore = hist.score\n        }\n      }\n    })\n\n    //log first/last\n    newHistory.push({\n      date: firstTimestamp,\n      score: firstScore\n    })\n    if(firstTimestamp.seconds !== lastTimestamp.seconds){\n      newHistory.push({\n        date: lastTimestamp,\n        score: lastScore\n      })\n    }\n\n  })\n\n  return newHistory.sort((a,b) => {\n    return a.date.seconds - b.date.seconds\n  })\n\n}\n\n\nconst removeDuplicates = (history) => {\n  var newHistory = []\n  newHistory.push(history[0])\n  for(var i = 1; i < history.length; i++){\n    if(history[i].score !== history[i-1].score){\n      newHistory.push(history[i])\n    }\n  }\n  return newHistory\n}\n\nconst buildChartData = (history) => {\n  var lineData = []\n  history.forEach(hist => {\n    lineData.push({\n      \"x\": moment.unix(hist.date.seconds).toDate(),\n      \"y\": hist.score\n    })\n  })\n\n  // return lineData\n\n  return {\n    \"lines\":[\n      {\n        \"name\": \"Score History\",\n        \"data\": lineData,\n        \"color\": \"black\"\n      }\n    ],\n    \"minY\":0,\n    \"xTicks\":6,\n    \"yTicks\":7,\n    \"dots\":true,\n    \"dotSize\":2\n  }\n}\n\n\nexport const dateFormatter = (d) => {\n  return moment(d).format('MM/DD/YY')\n}\n\nexport const decimalFormatter = (d) => {\n  return d.toFixed(2)\n}\n\nexport const timeOnlyFormatter = (d) => {\n  return moment(d).format('h:mm a')\n}\n\n\nconst xMinMax = (chartData) => {\n  var minX = new Date();\n  var maxX = 0\n  chartData.lines.forEach(line => {\n    line.data.forEach(point => {\n        maxX = Math.max(point.x,maxX)\n        minX = Math.min(point.x,minX)\n    })\n  });\n  return {\n    \"max\": maxX,\n    \"min\": minX\n  }\n}\n\nconst yMinMax = (chartData) => {\n  var maxY = 0\n  var minY = null\n  chartData.lines.forEach(line => {\n    line.data.forEach(point => {\n        maxY = Math.max(point.y,maxY)\n        minY = minY ? Math.min(point.y,minY) : point.y\n    })\n  });\n  minY = minY - ((maxY - minY) * 0.1)\n\n  return {\n    \"max\": maxY,\n    \"min\": minY\n  }\n}\n\n\nexport const yScaleLinear = (chartData, height) => {\n  const yRange = yMinMax(chartData)\n\n  return d3.scaleLinear()\n    .range([0,height])\n    .domain([yRange.max,yRange.min])\n}\n\nexport const xScaleTime = (chartData, width) => {\n  const xRange = xMinMax(chartData)\n\n  return d3.scaleTime()\n    .range([0,width])\n    .domain([xRange.min,xRange.max])\n}\n\n\nexport const getToolTip = () => {\n  return d3.tip()\n    .attr('class', 'tip card')\n    .html((e,d) => {\n        const xLabel = dateFormatter(d.x)\n        const yLabel = decimalFormatter(d.y)\n        const xTimeLabel = timeOnlyFormatter(d.x)\n        let content = ''\n        content += `<div class=\"score\">${yLabel}</div>`;\n        content += `<div class=\"name\">${xLabel}</div>`;\n        content += `<div class=\"cost\">${xTimeLabel}</div>`;\n        return content;\n    })\n    .direction('s')\n    .offset([15, 0]);\n}","import React, { useContext } from 'react';\nimport { DataContext } from '../../store/contexts/dataContext';\nconst interpolate = require('color-interpolate');\n\nconst ImportanceIcon = ({importance}) => {\n\n  const { weights } = useContext(DataContext)\n  const importances = weights ? weights.importanceArray : null\n\n  // const colors = interpolate([[0, 255, 0],[127,255,0],[255,255,0],[255,127,0],[255,0,0]])\n  const colors = interpolate([[255, 255, 255],[255,0,0]])\n  var color = colors(0)\n  const totalImportances = importances.length\n\n  const sortedImportances = importances.sort((a,b) => {\n    return a.weight - b.weight\n  })\n  \n  var numberOfDots = 1;\n  for(var i = 1; i <= sortedImportances.length; i++){\n    if(sortedImportances[i-1].id === importance){\n      numberOfDots = i;\n      color = colors((i-1)/(totalImportances-1))\n    }\n  }\n\n  \n\n  var dots = []\n  for (let i = 1; i <= numberOfDots; i++) {\n    dots.push(i);\n  }\n\n\n  return ( \n    <div className=\"flex\">\n      { dots && dots.map(dot => {\n        return(\n          <div className=\"h-3 w-3\" key={dot}>\n            <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n              <circle cx=\"12\" cy=\"12\" r=\"10\" stroke=\"black\" strokeWidth=\"1\" fill={color} />\n            </svg>\n          </div>\n        )\n      })}\n    </div>\n   );\n}\n \nexport default ImportanceIcon;","import React, { useContext } from 'react'\nimport moment from 'moment'\nimport ImportanceIcon from '../icons/ImportanceIcon'\nimport { ModalContext } from '../../store/contexts/modalContext'\nimport ReactTooltip from 'react-tooltip';\n\n\nconst ItemCardWithProject = ({item}) => {\n\nconst { modalDispatch } = useContext(ModalContext)\n\nconst expectedUpdate = item.expectedUpdate ? moment.unix(item.expectedUpdate.seconds).format('MM/DD/YY') : null\n\nconst itemClick = (e) => {\n  modalDispatch({type: 'SHOW_SHEET', itemID: item.id})\n}\n\nconst projectClick = (e) => {\n  modalDispatch({type: 'SHOW_PROJECT_SHEET', projectID: item.projectID})\n}\n\n\nconst daysToText = item && item.daysTo === 1 ? 'Tomorrow' : item && item.daysTo === 0 ? 'Today' : item && item.daysTo > 0 ? item.daysTo + ' days' : item && item.daysTo === -1 ? '1 day ago' : item && item.daysTo < 0 ? item.daysTo * -1 + ' days ago' : null;\n\n  return ( \n    <div data-tip={item.notes} className={'rounded-md border-2 border-black my-2 w-full self-center grid grid-cols-12 '}>\n      <div onClick={projectClick} className='hover:bg-opacity-50 mainInfo flex flex-col col-span-4 p-2 bg-black text-white'>\n        <p className='text-xs'>{item.score ? item.score.toFixed(2) : 0}</p>\n        <p className='text-xl'>{item.project ? item.project.name : ''}</p>\n        <ImportanceIcon importance={item.project ? item.project.importance : 3} />\n        <p className='text-sm'>{item.project ? item.project.description : ''}</p>\n      </div>\n      <div onClick={itemClick} className={\"relative hover:bg-opacity-75 col-span-8 p-2 \" + item.colorClass}>\n        <p className='text-xl'>{item.action}</p>\n        <p className='text-sm'>{expectedUpdate}</p>\n        <p className='text-base'>{item.actionTypeName}</p>\n        <p className=\"absolute right-1 top-0\">{daysToText}</p>\n      </div>\n      <ReactTooltip delayShow={500} />\n    </div>\n   );\n}\n \nexport default ItemCardWithProject;","import React, { useContext } from 'react'\nimport moment from 'moment'\nimport { ModalContext } from '../../store/contexts/modalContext'\n\n\nconst ItemCard = ({item}) => {\n\nconst { modalDispatch } = useContext(ModalContext)\n\nconst expectedUpdate = item.expectedUpdate ? moment.unix(item.expectedUpdate.seconds).format('MM/DD/YY') : null\n\nconst click = (e) => {\n  modalDispatch({type: 'SHOW_SHEET', itemID: item.id})\n}\n\n  return ( \n    <div onClick={click} className={'border-2 border-black my-2 w-full self-center grid grid-cols-12 '}>\n      <div className='mainInfo justify-center flex flex-col col-span-2 p-2 bg-black text-white'>\n        <p className='text-xl self-center'>{item.score ? item.score.toFixed(2) : 0}</p>\n      </div>\n      <div className={\"col-span-10 p-2 \" + item.colorClass}>\n        <p className='text-xl'>{item.actionTypeName}</p>\n        <p className='text-sm'>{expectedUpdate}</p>\n        <p className='text-base'>{item.action}</p>\n      </div>\n    </div>\n   );\n}\n \nexport default ItemCard;","import React from 'react'\nimport ItemCardWithProject from './ItemCardWithProject'\nimport ItemCard from './ItemCard'\n\nconst ItemCardContainer = ({item, showProject}) => {\n\n  return ( \n    <div className='cursor-pointer'>\n      { showProject ? (\n        <ItemCardWithProject item={item} />\n      ): (\n        <ItemCard item={item} />\n      )}\n    </div>\n   );\n}\n \nexport default ItemCardContainer;","\nexport const filterReducer = (state, action) => {\n  switch(action.type){\n    case 'SETUP_IMPORTANCE_FILTERS':\n      var importanceFilters = {}\n      action.importances.forEach(importance => {\n        importanceFilters[importance.id] = true\n      })\n      return{\n        ...state,\n        importanceFilters\n      }\n    case 'SET_IMPORTANCE_FILTER':\n      return{\n        ...state,\n        importanceFilters:{\n          ...state.importanceFilters,\n          [action.importance]: action.value\n        }\n      }\n    case 'ALL_IMPORTANCE':\n      var newImportanceFilters = {}\n      const ikeys = Object.keys(action.importances)\n      for (const key of ikeys) {\n        newImportanceFilters[key] = action.value\n      }\n      return{\n        ...state,\n        importanceFilters: newImportanceFilters\n      }\n    case 'SET_ACTION_FILTER':\n      return{\n        ...state,\n        actionFilters:{\n          ...state.actionFilters,\n          [action.actionType]: action.value\n        }\n      }\n    case 'ALL_ACTION':\n      var newActionFilters = {}\n      const akeys = Object.keys(action.actionTypes)\n      for (const key of akeys) {\n        newActionFilters[key] = action.value\n      }\n      return{\n        ...state,\n        actionFilters: newActionFilters\n      }\n    case 'SET_DAY_FILTER':\n      return{\n        ...state,\n        dayFilter: action.value\n      }\n    default: \n      return state\n  }\n}","import React, { useReducer } from \"react\";\nimport { filterReducer } from '../reducers/filterReducer'\n\n\nexport const FilterContext = React.createContext();\n\n\nexport const FilterContextProvider = ({ children }) => {\n\n\n  const [filterData, filterDispatch] = useReducer(filterReducer, {\n    dayFilter: 'all',\n    dayFilters: [\n      {name:'All', value:'all', id:'all', filtName: 'dateFilter'},\n      {name:'Today', value:'0', id:'today', filtName: 'dateFilter'},\n      {name:'Next Day', value:'1', id:'nextDay', filtName: 'dateFilter'},\n      {name:'Next 2 Days', value:'2', id:'nextTwoDays', filtName: 'dateFilter'},\n      {name:'Overdue', value:'-1', id:'overdue', filtName: 'dateFilter'},\n    ]\n  });\n\n\n  return (\n    <FilterContext.Provider value={{ filterData, filterDispatch }}>{children}</FilterContext.Provider>\n  );\n};\n\n","import { useContext } from 'react';\nimport { DataContext } from './store/contexts/dataContext';\nimport { FilterContext } from './store/contexts/filterContext';\n\nexport default function useFilteredItems() {\n  const { items } = useContext(DataContext)\n  const { filterData } = useContext(FilterContext)\n\n  var sortedItems = items ? items.sort((a,b) => {\n    if(a.expectedUpdate === null) return 1\n    if(b.expectedUpdate === null) return -1\n    return b.score - a.score\n  }) : null;\n\n  if(filterData && filterData.importanceFilters && sortedItems){\n    const importanceFilters = filterData.importanceFilters\n    sortedItems = sortedItems.filter(item => {\n      if(importanceFilters[item.project.importance] === undefined) return true\n      return importanceFilters[item.project.importance]\n    })\n  }\n\n  if(filterData && sortedItems){\n    if(filterData.dayFilter !== 'all'){\n      const filterNumber = parseInt(filterData.dayFilter);\n      sortedItems = sortedItems.filter(item => {\n        return item.daysTo <= filterNumber\n      })\n    }\n  }\n\n  if(filterData && filterData.actionFilters && sortedItems){\n    const actionFilters = filterData.actionFilters\n    sortedItems = sortedItems.filter(item => {\n      if(actionFilters[item.actionType] === undefined) return true\n      return actionFilters[item.actionType]\n    })\n  }\n\n  return sortedItems;\n}","import React, { useContext } from 'react'\nimport { DataContext } from '../../store/contexts/dataContext';\nimport { FbContext } from '../../store/contexts/fbContext';\nimport ItemCardContainer from '../itemCards/ItemCardContainer';\nimport useFilteredItems from '../../UseFilteredItems'\n\nconst CardCollection = () => {\n\n  const { allLoaded } = useContext(DataContext)\n  const { FBuser } = useContext(FbContext)\n  const newItems = useFilteredItems()\n\n\n  if(!FBuser || !allLoaded){\n    return null\n  }\n\n\n  return ( \n    <div className=\"overflow-scroll h-full hideBar\">\n      { newItems && newItems.map(item => {\n        return <ItemCardContainer showProject={true} key={item.id} item={item} />\n      })}\n    </div>\n   );\n}\n \nexport default CardCollection;","import React, { useContext } from \"react\";\nimport firebase from '../../config/fbConfig'\nimport { useCollectionData } from 'react-firebase-hooks/firestore';\nimport { FbContext } from \"./fbContext\";\n\n\nexport const CompletedItemsContext = React.createContext();\n\n\nexport const CompltetedItemsProvider = ({ children }) => {\n\n  const { FBuser } = useContext(FbContext)\n  const userID = FBuser ? FBuser.uid : null\n\n\n  const [completedItems, completedItemsLoading] = useCollectionData(firebase.firestore().collection('users/' + userID + '/items').where('deleted','==',false).where('completed','==',true),{\n    idField: 'id'\n  })\n\n\n\n\n  return (\n    <CompletedItemsContext.Provider value={{ completedItems, completedItemsLoading }}>{children}</CompletedItemsContext.Provider>\n  );\n};\n\n","import { useContext, useState, useEffect } from 'react';\nimport { DataContext } from './store/contexts/dataContext';\nimport { CompletedItemsContext } from './store/contexts/completedItemsContext';\nimport useFilteredItems from './UseFilteredItems'\nimport moment from 'moment'\n\nexport default function useMetrics() {\n\n  const { items, weights, oneOffs } = useContext(DataContext)\n  const { completedItems } = useContext(CompletedItemsContext)\n  const filteredItems = useFilteredItems()\n\n  //todays score\n  const [todaysScore, setTodaysScore] = useState(0)\n  useEffect(() => {\n    const todaysItems = items ? items.filter(item => {\n      return item.daysTo <= 0;\n    }) : null;\n    if(weights === null || oneOffs === undefined){\n      setTodaysScore(0)\n    }else{\n      setTodaysScore(addScores(todaysItems) + (weights.oneOff * oneOffs.length));\n    }\n  }, [items, oneOffs, weights])\n\n  //tomorrowsScore\n  const [tomorrowsScore, setTomorrowsScore] = useState(0)\n  useEffect(() => {\n    const tomorrowsItems = items ? items.filter(item => { \n      return item.daysTo === 1;\n    }) : null;\n    setTomorrowsScore(addScores(tomorrowsItems))\n  }, [items])\n\n  //thisweeksScore\n  const [thisWeeksScore, setThisWeeksScore] = useState(0)\n  useEffect(() => {\n    const thisWeeksItems = items ? items.filter(item => {\n      return moment.unix(item.expectedUpdate.seconds).startOf('days').isBefore(getNextMonday())\n    }) : null\n    setThisWeeksScore(addScores(thisWeeksItems))\n  }, [items])\n\n  //completedToday\n  const [completedScore, setCompletedScore] = useState(0)\n  useEffect(() => {\n    var completedScore = 0\n\n    if(completedItems){\n      completedItems.forEach(item => {\n        if(item.scoreOnComplete !== undefined && moment.unix(item.completedDate.seconds).startOf('days').isSame(moment().startOf('days'))){\n          completedScore += item.scoreOnComplete\n        }\n      })\n    }\n\n    setCompletedScore(completedScore)\n  }, [completedItems])\n\n  //created today\n  const [createdScore, setCreatedScore] = useState(0)\n  useEffect(() => {\n    var createdScore = 0\n\n    if(completedItems){\n      completedItems.forEach(item => {\n        if(item.scoreOnComplete !== undefined && moment.unix(item.created.seconds).startOf('days').isSame(moment().startOf('days'))){\n          createdScore += item.scoreOnComplete\n        }\n      })\n    }\n    if(items){\n      items.forEach(item => {\n        if(moment.unix(item.created.seconds).startOf('days').isSame(moment().startOf('days'))){\n          createdScore += item.score\n        }\n      })\n    }\n    setCreatedScore(createdScore)\n  }, [completedItems, items])\n\n  //filteredScore\n  const [filteredScore, setFilteredScore] = useState(0)\n  useEffect(() => {\n    setFilteredScore(addScores(filteredItems))\n  }, [filteredItems])\n\n\n  const addScores = (itemsToAdd) => {\n    if(itemsToAdd === null) return 0\n    var score = 0\n    itemsToAdd.forEach(item => {\n      score += item.score\n    })\n    return score\n  }\n\n  const getNextMonday = () => {\n    const currentCheck = moment().startOf('day').add(1,'d')\n    var nextMonday = null;\n    while (nextMonday === null){\n      if(currentCheck.day() === 1){\n        nextMonday = currentCheck\n      }else{\n        currentCheck.add(1,'d')\n      }\n    }\n    return nextMonday;\n  }\n\n  return {todaysScore, tomorrowsScore, thisWeeksScore, completedScore, createdScore, filteredScore};\n}","import React from 'react'\nimport useMetrics from '../../UseMetrics'\n\nconst UpcomingWork = () => {\n\n  const { todaysScore, tomorrowsScore, thisWeeksScore, filteredScore } = useMetrics()\n\n\n  return ( \n    <div className=\"grid grid-cols-4\">\n      <div>\n        <p className=\"text-center text-2xl\">{filteredScore.toFixed(2)}</p>\n        <p className=\"text-center\">Filtered View</p>\n      </div>\n      <div>\n        <p className=\"text-center text-2xl\">{todaysScore.toFixed(2)}</p>\n        <p className=\"text-center\">Today</p>\n      </div>\n      <div>\n        <p className=\"text-center text-2xl\">{tomorrowsScore.toFixed(2)}</p>\n        <p className=\"text-center\">Tomorrow</p>\n      </div>\n      <div>\n        <p className=\"text-center text-2xl\">{thisWeeksScore.toFixed(2)}</p>\n        <p className=\"text-center\">Rest of Week</p>\n      </div>\n    </div>\n   );\n}\n \nexport default UpcomingWork;","import React from 'react'\nimport LineChart from '../leftBar/LineChart';\nimport CardCollection from './CardCollection'\nimport UpcomingWork from './UpcomingWork'\n\n\nconst CenterColumn = () => {\n  return ( \n    <div className='flex flex-col w-full col-span-6 col-start-4 p-2 h-screen pb-10 overflow-hidden'>\n      <UpcomingWork />\n      <LineChart />\n      <CardCollection />\n    </div>\n   );\n}\n \nexport default CenterColumn;","import React, { useState } from 'react'\nimport { addOneOff } from '../../../store/actions'\n\nconst AddOneOff = () => {\n\n  const [newOneOff, setNewOneOff] = useState('')\n\n  const change = (e) => {\n    setNewOneOff(e.target.value)\n  }\n\n  const submit = (e) => {\n    e.preventDefault()\n    addOneOff(newOneOff)\n    setNewOneOff('')\n  }\n\n  return ( \n    <form onSubmit={submit}>\n      <input className=\"formInput mt-2\" placeholder=\"Add One Off\" value={newOneOff} onChange={change}></input>\n    </form>\n   );\n}\n \nexport default AddOneOff;","import React, { useState } from 'react'\nimport { completeOneOff, updateOneOff } from '../../../store/actions'\n\nconst OneOffItem = ({oneOff}) => {\n\n  const [editing,setEditing] = useState(false)\n  const [inputValue, setInputValue] = useState(oneOff.name)\n\n  const onCheck = () => {\n    completeOneOff(oneOff.id)\n  }\n\n  const double = (e) => {\n    setEditing(!editing)\n  }\n\n  const change = (e) => {\n    setInputValue(e.target.value)\n  }\n\n  const blur = (e) => {\n    updateOneOff(e.target.value, oneOff.id)\n    setEditing(false)\n  }\n\n  return (\n    <div onDoubleClick = {double} className=\"flex space-x-2 bg-gray-100 my-1\">\n      <input className='self-center' onChange={onCheck} type=\"checkbox\" />\n      { editing ? \n        <input autoFocus onBlur={blur} onChange={change} value={inputValue}></input>\n        :\n        <label className='self-center'>{oneOff.name}</label>\n      }\n    </div>\n   );\n}\n \nexport default OneOffItem;","import React, { useContext } from 'react'\nimport { DataContext } from '../../../store/contexts/dataContext';\nimport AddOneOff from './AddOneOff';\nimport OneOffItem from './OneOffItem';\n\n\nconst OneOffs = () => {\n\n  const { oneOffs } = useContext(DataContext)\n\n\n  var sortedOneOffs = oneOffs ? oneOffs.sort((a,b) => {\n    return a.created - b.created\n  }) : null\n\n  \n\n\n\n  return ( \n    <div className=\"w-full\">\n      <div className=\"m-auto w-48\">\n        <h1 className=\"text-lg font-bold\">One Off Items</h1>\n        { sortedOneOffs && sortedOneOffs.map(oneOff => {\n          return (\n            <OneOffItem oneOff={oneOff} key={oneOff.id} />\n          )\n        })}\n        <AddOneOff />\n      </div>\n    </div>\n   );\n}\n \nexport default OneOffs;","import React, { useState, useEffect } from 'react'\nimport { updateActionTypes, addActionType } from '../../../store/actions'\n\nconst ActionConfig = ({actionTypes}) => {\n\n  const [newATypes, setNewATypes] = useState([])\n\n  useEffect(() => {\n    if(actionTypes){\n      setNewATypes(actionTypes)\n    }\n  },[actionTypes])\n\n\n  const inputChangeWeight = (e) => {\n    setNewATypes({\n      ...newATypes,\n      [e.target.attributes.actionid.nodeValue]: {\n        ...newATypes[e.target.attributes.actionid.nodeValue],\n        weight: e.target.value\n      }\n    })\n  }\n\n  const inputChangeName = (e) => {\n    setNewATypes({\n      ...newATypes,\n      [e.target.attributes.actionid.nodeValue]: {\n        ...newATypes[e.target.attributes.actionid.nodeValue],\n        name: e.target.value\n      }\n    })\n  }\n\n  const onBlurWeight = (e) => {\n    const newValue = isNaN(parseFloat(e.target.value)) ? actionTypes[e.target.attributes.actionid.nodeValue].weight : parseFloat(e.target.value)\n    updateActionTypes({\n      ...newATypes,\n      [e.target.attributes.actionid.nodeValue]: {\n        ...newATypes[e.target.attributes.actionid.nodeValue],\n        weight: newValue\n      }\n    }, actionTypes)\n  }\n\n  const onBlurName = (e) => {\n    const newValue = e.target.value === '' ? actionTypes[e.target.attributes.actionid.nodeValue].name : e.target.value\n    if(newValue !== actionTypes[e.target.attributes.actionid.nodeValue].name){\n      updateActionTypes({\n        ...newATypes,\n        [e.target.attributes.actionid.nodeValue]: {\n          ...newATypes[e.target.attributes.actionid.nodeValue],\n          name: newValue\n        }\n      }, actionTypes)\n    }\n  }\n\n\n  const addAction = (e) => {\n    addActionType(actionTypes)\n  }\n\n  const keys = Object.keys(newATypes)\n  var actionArray = []\n  for (const key of keys) {\n    actionArray.push(newATypes[key])\n  }\n  actionArray = actionArray.sort((a,b) => {\n    return b.weight - a.weight\n  })\n\n  return ( \n    <div className='m-auto w-56 mt-10'>\n      <p className=\"text-lg font-bold\">Action Type Weights</p>\n      <div className=\"flex flex-col space-y-1\">\n        { actionArray && actionArray.map(aType => {\n          return(\n            <div key={aType.id} className=\"grid grid-cols-12\">\n              {/* <p className=\"col-span-8\">{aType.name}</p> */}\n              <input onBlur={onBlurName} onChange={inputChangeName} actionid={aType.id} value={aType.name} className=\"col-span-7 formInput\"></input>\n              <input onBlur={onBlurWeight} value={aType.weight} actionid={aType.id} id={aType.id} onChange={inputChangeWeight} className=\"formInputSmall col-span-4 col-start-9\" />\n            </div>\n          )\n        })}\n      </div>\n      <button className=\"btn mt-2\" onClick={addAction}>Add</button>\n    </div>\n   );\n}\n \nexport default ActionConfig;","import React, { useState, useEffect } from 'react';\nimport { updateImportanceTypes, addImportance } from '../../../store/actions'\n\nconst ImportanceConfig = ({importanceTypes}) => {\n\n  const [newITypes, setNewITypes] = useState([])\n\n  useEffect(() => {\n    if(importanceTypes){\n      setNewITypes(importanceTypes)\n    }\n  },[importanceTypes])\n\n  const inputChangeWeight = (e) => {\n    setNewITypes({\n      ...newITypes,\n      [e.target.attributes.importanceid.nodeValue]: {\n        ...newITypes[e.target.attributes.importanceid.nodeValue],\n        weight: e.target.value\n      }\n    })\n  }\n\n  const inputChangeName = (e) => {\n    setNewITypes({\n      ...newITypes,\n      [e.target.attributes.importanceid.nodeValue]: {\n        ...newITypes[e.target.attributes.importanceid.nodeValue],\n        name: e.target.value\n      }\n    })\n  }\n\n  const onBlurWeight = (e) => {\n    const newValue = isNaN(parseFloat(e.target.value)) ? importanceTypes[e.target.attributes.importanceid.nodeValue].weight : parseFloat(e.target.value)\n    updateImportanceTypes({\n      ...newITypes,\n      [e.target.attributes.importanceid.nodeValue]: {\n        ...newITypes[e.target.attributes.importanceid.nodeValue],\n        weight: newValue\n      }\n    }, importanceTypes)\n  }\n\n  const onBlurName = (e) => {\n    const newValue = e.target.value === '' ? importanceTypes[e.target.attributes.importanceid.nodeValue].name : e.target.value\n    updateImportanceTypes({\n      ...newITypes,\n      [e.target.attributes.importanceid.nodeValue]: {\n        ...newITypes[e.target.attributes.importanceid.nodeValue],\n        name: newValue\n      }\n    }, importanceTypes)\n  }\n\n  const addNew = (e) => {\n    addImportance(importanceTypes)\n  }\n\n  const keys = Object.keys(newITypes)\n  var importanceArray = []\n  for (const key of keys) {\n    importanceArray.push(newITypes[key])\n  }\n  importanceArray = importanceArray.sort((a,b) => {\n    return b.weight - a.weight\n  })\n\n  return ( \n    <div className='m-auto w-56 mt-10'>\n      <p className=\"text-lg font-bold\">Importance Weights</p>\n      <div className=\"flex flex-col space-y-1\">\n        { importanceArray && importanceArray.map(iType => {\n          return(\n            <div key={iType.id} className=\"grid grid-cols-12\">\n              <input onBlur={onBlurName} value={iType.name} onChange={inputChangeName} importanceid={iType.id} className=\"col-span-7 formInput\"></input>\n              <input onBlur={onBlurWeight} value={iType.weight} importanceid={iType.id} onChange={inputChangeWeight} className=\"formInputSmall col-span-4 col-start-9\" />\n            </div>\n          )\n        })}\n      </div>\n      <button onClick={addNew} className=\"btn mt-2\">Add</button>\n    </div>\n   );\n}\n \nexport default ImportanceConfig;","import React, { useContext } from 'react'\nimport { DataContext } from '../../../store/contexts/dataContext';\nimport ActionConfig from './ActionConfig';\nimport ImportanceConfig from './ImportanceConfig';\n\n\nconst Config = () => {\n\n  const { weights } = useContext(DataContext)\n   \n  return ( \n    <div className=\"w-full\">\n      <div>\n        {\n          weights ? (\n            <div>\n              <ImportanceConfig importanceTypes={weights.importanceTypes} />\n              <ActionConfig actionTypes={weights.actionTypes} />\n            </div>\n          ) : null\n        }\n      </div>\n    </div>\n   );\n} \n \nexport default Config;","import React, { useContext, useEffect } from 'react'\nimport { FbContext } from '../../store/contexts/fbContext';\nimport { logHistory } from '../../store/actions'\nimport { DataContext } from '../../store/contexts/dataContext';\nimport { ModalContext } from '../../store/contexts/modalContext';\n\nconst TotalScore = () => {\n\n  const { FBuser } = useContext(FbContext)\n  const { weights, totalScore, allLoaded } = useContext(DataContext)\n  const { modalDispatch } = useContext(ModalContext)\n\n\n  useEffect(() => {\n\n     if(allLoaded === true && FBuser !== null && weights !== null && weights.currentUserScore !== null && weights.currentUserScore.toFixed(2) !== totalScore.toFixed(2)){\n       logHistory(totalScore)\n     }\n \n   }, [allLoaded, FBuser, totalScore, weights])\n\n\n  const toggleChart = (e) => {\n    modalDispatch({type:'TOGGLE_CHART'})\n  }\n\n  return ( \n    <div className=\"mt-5\">\n      <div className=\"flex justify-center space-x-1\">\n        <h1 className=\"text-center text-4xl scoreLabel\">{ totalScore.toFixed(2) }</h1>\n        <svg onClick={toggleChart} className=\"w-5 cursor-pointer\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M7 12l3-3 3 3 4-4M8 21l4-4 4 4M3 4h18M4 4h16v12a1 1 0 01-1 1H5a1 1 0 01-1-1V4z\" />\n        </svg>\n      </div>\n    </div>\n   );\n}\n \nexport default TotalScore;","import React, { useContext } from 'react'\nimport { ModalContext } from '../../store/contexts/modalContext'\nimport ImportanceIcon from '../icons/ImportanceIcon'\n\n\nconst ProjectListItem = ({proj, weights}) => {\n\n  const { modalDispatch } = useContext(ModalContext)\n\n  const click = (e) => {\n    modalDispatch({type: 'SHOW_PROJECT_SHEET', projectID: proj.id})\n  }\n\n  return ( \n    <div onClick={click} className=\"transform hover:scale-110 transition ease-out duration-300 flex justify-between whitespace-nowrap px-2 space-x-2 text-white bg-black rounded-lg cursor-pointer\">\n      <p className=\"overflow-hidden overflow-ellipsis\">{proj.totalScore.toFixed(2)} - {proj.name}</p>\n      <div className=\"self-center\">\n        <ImportanceIcon importance={proj.importance} importances={weights.importanceArray} />\n      </div>\n    </div>\n   );\n}\n \nexport default ProjectListItem;","import React from 'react'\n\n\nconst PlusIcon = () => {\n  return ( \n    <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M12 6v6m0 0v6m0-6h6m-6 0H6\" />\n    </svg>\n   );\n}\n \nexport default PlusIcon;","import React, { useContext } from 'react'\nimport ProjectListItem from './ProjectListItem';\nimport PlusIcon from '../icons/PlusIcon'\nimport { ModalContext } from '../../store/contexts/modalContext';\nimport { DataContext } from '../../store/contexts/dataContext';\n\nconst ProjectList = () => {\n\n  const { projects, items, weights } = useContext(DataContext)\n  const { modalDispatch } = useContext(ModalContext)\n\n  var newProjects = [];\n  if(projects && items){\n    newProjects = projects.map(proj => {\n      const itemsInProj = items.filter(item => {\n        if(!item.project) return false\n        return item.project.id === proj.id\n      })\n      var projScore = 0;\n      itemsInProj.forEach(item => projScore += item.score)\n      return {...proj, totalScore: projScore}\n    })\n  }\n\n  newProjects.sort((a,b) => {\n    return b.totalScore - a.totalScore\n  })\n\n  const addProject = (e) => {\n    modalDispatch({type: 'SHOW_PROJECT_SHEET', projectID: null})\n  }\n  \n\n  return ( \n    <div className=\"m-auto w-60 mt-10\">\n      <div className=\"flex space-x-1\">\n        <p className='self-center text-xl font-bold'>Projects</p>\n        <div onClick={addProject} className=\"self-center w-6 h-6 cursor-pointer\">\n          <PlusIcon />\n        </div>\n      </div>\n      <div className=\"flex flex-col space-y-1\">\n        { newProjects && newProjects.map(proj => {\n          return (\n            <ProjectListItem key={proj.id} proj={proj} weights={weights} />\n          )\n        })}\n      </div>\n    </div>\n   );\n}\n \nexport default ProjectList;","import React from 'react'\nimport useMetrics from '../../UseMetrics'\n\nconst CompletedToday = () => {\n\n  const { completedScore, createdScore } = useMetrics()\n\n  const formattedCompletedScore = completedScore ? completedScore.toFixed(2) : 0\n  const formattedCreatedScore = createdScore ? createdScore.toFixed(2) : 0\n\n  return ( \n    <div className=\"w-full mb-5\">\n      <p className=\"m-auto w-48\">Completed Today: {formattedCompletedScore}</p>\n      <p className=\"m-auto w-48\">Created Today: {formattedCreatedScore}</p>\n    </div>\n   );\n}\n \nexport default CompletedToday;","import React, { useState, useContext } from 'react'\nimport OneOffs from './OneOffs/OneOffs'\nimport Config from './todoConfig/Config'\nimport TotalScore from './TotalScore'\nimport ProjectList from './ProjectList'\nimport { FbContext } from '../../store/contexts/fbContext'\nimport { DataContext } from '../../store/contexts/dataContext'\nimport CompletedToday from './CompletedToday'\n\n\nconst LeftBar = () => {\n\n  const [showConfig, setShowConfig] = useState(false)\n  const { FBuser } = useContext(FbContext)\n  const { allLoaded } = useContext(DataContext)\n\n  const click = (e) => {\n    setShowConfig(!showConfig)\n  }\n\n  return ( \n    <div className=\"col-span-3 h-screen overflow-hidden\" >\n      <div className=\"h-full overflow-scroll hideBar pb-10\">\n        { FBuser && allLoaded ? (\n          <div>\n            <TotalScore />\n            <CompletedToday />\n            <OneOffs />\n            <ProjectList />\n            <p className=\"mt-10 cursor-pointer underline m-auto w-56\" onClick={click}>{showConfig ? 'Hide Config' : 'Show Config'}</p>\n            { showConfig ? (\n              <div>\n                <Config />\n              </div>\n            ) : null}\n          </div>\n        ): null}\n      </div>\n    </div>\n   );\n}\n \nexport default LeftBar;","import React, { useContext } from 'react'\nimport { DataContext } from '../../store/contexts/dataContext'\nimport { FilterContext } from '../../store/contexts/filterContext'\n\n\nconst ActionTypeFilter = () => {\n\n  const { weights } = useContext(DataContext)\n  const { filterData, filterDispatch } = useContext(FilterContext)\n\n\n  var filters = []\n  if(weights){\n    weights.actionTypeArray.forEach(aType => {\n      filters.push({\n        id: aType.id,\n        name: aType.name\n      })\n    })\n  }else{\n    return null\n  }\n\n\n  const onCheck = (e) => {\n    filterDispatch({type: 'SET_ACTION_FILTER', actionType: e.target.id, value: e.target.checked})\n  }\n\n  const selectAll = (e) => {\n    filterDispatch({type: 'ALL_ACTION', value: true, actionTypes: weights.actionTypes})\n  }\n\n  const deSelectAll = (e) => {\n    filterDispatch({type: 'ALL_ACTION', value: false, actionTypes: weights.actionTypes})\n  }\n\n  return ( \n    <div className=\"mt-5\">\n      <p className=\"text-xl font-bold\">Filter Action Type</p>\n      <div className=\"flex flex-col\">\n        { filters.map(filt => {\n          return(\n            <div className=\"flex space-x-1\" key={filt.id}>\n              <input className=\"self-center\" id={filt.id} onChange={onCheck} checked={!filterData.actionFilters || filterData.actionFilters[filt.id] === undefined ? true : filterData.actionFilters[filt.id]} type=\"checkbox\" />\n              <label className=\"self-center\">{filt.name}</label>\n            </div>\n          )\n        })}\n      </div>\n      <div className=\"flex space-x-2\">\n        <button className=\"btn mt-2\" onClick={selectAll}>Select All</button>\n        <button className=\"btn mt-2\" onClick={deSelectAll}>De-select All</button>\n      </div>\n    </div>\n   );\n}\n \nexport default ActionTypeFilter;","import React, { useContext, useEffect, useState } from 'react'\nimport { FilterContext } from '../../store/contexts/filterContext'\n\n\nconst DayFilter = () => {\n\n  const { filterData, filterDispatch } = useContext(FilterContext)\n  const [value, setValue] = useState('1000000')\n\n  useEffect(() => {\n    if(filterData){\n      setValue(filterData.dayFilter)\n    }\n  }, [filterData])\n\n  const change = (e) => {\n    filterDispatch({type: 'SET_DAY_FILTER', value: e.target.value})\n  }\n\n  const filterTypes = filterData.dayFilters\n\n  return ( \n    <div className=\"mt-5\">\n      <p className=\"text-xl font-bold\">Filter Date</p>\n      <div>\n        { filterTypes.map(filt => {\n          return (\n            <div key={filt.id} className=\"flex space-x-1\">\n              <input className=\"self-center\" onChange={change} type=\"radio\" name={filt.filtName} value={filt.value} checked={value === filt.value}></input>\n              <label className=\"self-center\">{filt.name}</label>\n            </div>\n          )\n        })}\n      </div>\n    </div>\n   );\n}\n \nexport default DayFilter;","import React, { useContext } from 'react';\nimport { DataContext } from '../../store/contexts/dataContext';\nimport { FilterContext } from '../../store/contexts/filterContext';\n\n\n\nconst ImportanceFilters = () => {\n\n  const { weights } = useContext(DataContext)\n  const { filterDispatch, filterData } = useContext(FilterContext)\n  var filters = []\n\n\n  if(weights){\n    weights.importanceArray.forEach(importance => {\n      filters.push({\n        id: importance.id,\n        name: importance.name,\n        weight: importance.weight\n      })\n    })\n    filters = filters.sort((a,b) => {\n      return b.weight - a.weight\n    })\n  }else{\n    return null\n  }\n\n  const onCheck = (e) => {\n    filterDispatch({type: 'SET_IMPORTANCE_FILTER', importance: e.target.id, value: e.target.checked})\n  }\n\n  const selectAll = (e) => {\n    filterDispatch({type: 'ALL_IMPORTANCE', value: true, importances: weights.importanceTypes})\n  }\n\n  const deSelectAll = (e) => {\n    filterDispatch({type: 'ALL_IMPORTANCE', value: false, importances: weights.importanceTypes})\n  }\n\n\n  return ( \n    <div>\n      <p className=\"text-xl font-bold\">Filter Importance</p>\n      <div className=\"flex flex-col\">\n        { filters.map(filt => {\n          return(\n            <div className=\"flex space-x-1\" key={filt.id}>\n              <input className=\"self-center\" id={filt.id} onChange={onCheck} checked={!filterData.importanceFilters || filterData.importanceFilters[filt.id] === undefined ? true : filterData.importanceFilters[filt.id]} type=\"checkbox\" />\n              <label className=\"self-center\">{filt.name}</label>\n            </div>\n          )\n        })}\n      </div>\n      <div className=\"flex space-x-2\">\n        <button className=\"btn mt-2\" onClick={selectAll}>Select All</button>\n        <button className=\"btn mt-2\" onClick={deSelectAll}>De-select All</button>\n      </div>\n    </div>\n   );\n}\n \nexport default ImportanceFilters;","import React, { useContext } from 'react';\nimport { DataContext } from '../../store/contexts/dataContext';\nimport { FbContext } from '../../store/contexts/fbContext';\nimport { FilterContext } from '../../store/contexts/filterContext';\nimport ActionTypeFilter from './ActionTypeFilter';\nimport DayFilter from './DayFilter';\nimport ImportanceFilters from './ImportanceFilters';\n\nconst RightBar = () => {\n\n  const { weights, allLoaded } = useContext(DataContext)\n  const { filterDispatch } = useContext(FilterContext)\n  const { FBuser } = useContext(FbContext)\n  const importances = weights ? weights.importanceTypes : {}\n  const actionTypes = weights ? weights.actionTypes : {}\n\n\n  const removeAllFilters = (e) => {\n    filterDispatch({type: 'ALL_IMPORTANCE', value: true, importances})\n    filterDispatch({type: 'ALL_ACTION', value: true, actionTypes})\n    filterDispatch({type: 'SET_DAY_FILTER', value: 'all'})\n  }\n\n  if(!FBuser || !allLoaded){\n    return null\n  }\n\n\n  return ( \n    <div className=\"col-span-3 p-5 h-screen overflow-hidden\">\n      <ImportanceFilters />\n      <DayFilter />\n      <ActionTypeFilter />\n      <button onClick={removeAllFilters} className=\"importantBtn mt-10\">Remove All Filters</button>\n    </div>\n   );\n}\n \nexport default RightBar;","import React from 'react'\nimport CenterColumn from './centerColumn/CenterColumn';\nimport LeftBar from './leftBar/LeftBar';\nimport RightBar from './rightBar/RightBar';\n\n\nconst WorkingView = () => {\n  return ( \n    <div className=\"grid grid-cols-12\">\n      <LeftBar />\n      <CenterColumn />\n      <RightBar />\n    </div>\n   );\n}\n \nexport default WorkingView;","import React, { useContext } from 'react'\nimport { ConfigContext } from '../store/contexts/configContext'\nimport { StateContext } from '../store/contexts/stateContext'\nimport PlanningView from './PlanningView'\nimport WorkingView from './WorkingView'\n\n\nconst Main = () => {\n\n  const { config } = useContext(ConfigContext)\n  const { workingView } = useContext(StateContext)\n  \n  if(config && config.downForMaintenance === true){\n    return(\n      <p className=\"text-3xl\">Down for maintenance</p>\n    )\n  }\n\n  return ( \n    <div className=\"\">\n      { workingView ? \n        <WorkingView />\n        :\n        <PlanningView />\n      }\n    </div>\n   );\n}\n \nexport default Main;","import React from 'react'\nimport TextareaAutosize from 'react-textarea-autosize';\n\n\nconst EditDescription = ({value, change}) => {\n\n  return ( \n    <div className=\"mt-2\">\n      <p>Description</p>\n      <TextareaAutosize id='description' onChange={change} className={'focus:outline-none border-2 border-black '} value={value}></TextareaAutosize>\n    </div>\n   );\n}\n \nexport default EditDescription;","import React, { useContext } from 'react'\nimport { DataContext } from '../../../store/contexts/dataContext';\n\n\nconst EditImportance = ({value, change}) => {\n\n  const { weights } = useContext(DataContext)\n\n  var importances = weights ? weights.importanceArray : null\n  if(importances){\n    importances = importances.sort((a,b) => {\n      return b.weight - a.weight\n    })\n  }\n\n  return ( \n    <div className=\"mt-2\">\n      <p>Importance</p>\n      <select className='border-2 border-black' id='importance' onChange={change} value={value}>\n      { importances && importances.map(importance => {\n        return(\n          <option key={importance.id} value={importance.id}>{importance.name}</option>\n        )\n      })}\n      </select>\n    </div>\n   );\n}\n \nexport default EditImportance;","import React from 'react'\n\n\nconst EditName = ({value, change}) => {\n  return ( \n    <div>\n      <p>Name</p>\n      <input className='formInput' onChange={change} id='name' value={value}></input>\n    </div>\n   );\n}\n \nexport default EditName;","import React, { useContext, useState, useEffect } from 'react'\nimport EditDescription from './EditDescription';\nimport EditImportance from './EditImportance';\nimport EditName from './EditName';\nimport { deleteProject, updateProject, addProject } from '../../../store/actions'\nimport ItemCardContainer from '../../itemCards/ItemCardContainer';\nimport ExitIcon from '../../icons/ExitIcon';\nimport PlusIcon from '../../icons/PlusIcon';\nimport { ModalContext } from '../../../store/contexts/modalContext';\nimport { DataContext } from '../../../store/contexts/dataContext';\n\nconst ProjectEditModal = () => {\n\n\n  const { projects } = useContext(DataContext)\n  const { modalStatus, modalDispatch } = useContext(ModalContext)\n\n  const [newProject, setNewProject] = useState({\n    name: '',\n    description:'',\n    importance: 3\n  })\n\n  const [changed, setChanged] = useState(false)\n\n  const [isNew, setNew] = useState(true)\n\n  const itemsInProj = newProject.items ? newProject.items.sort((a,b) => {\n    return b.score - a.score\n  }) : null\n\n\n  useEffect(() => {\n    if(modalStatus && modalStatus.projectID){\n      if(projects){\n        setNewProject(projects.filter(proj => {return proj.id === modalStatus.projectID})[0])\n        setNew(false)\n      }else{\n        setNew(true)\n      }\n    }\n  }, [modalStatus, projects])\n\n\n  useEffect(() => {\n    if(newProject.name === ''){\n      setChanged(false)\n    }else{\n      setChanged(true)\n    }\n  },[newProject.name])\n\n\n\n  const change = (e) => {\n    setNewProject({\n      ...newProject,\n      [e.target.id]: e.target.value\n    })\n  }\n\n  const deleteClicked = (e) => {\n    if(window.confirm('Are you sure you want to delete? Deleting this project will also delete all of your actions under the project.') === true){\n      deleteProject(newProject.id)\n      modalDispatch({type:'HIDE_PROJECT_SHEET'})\n    }\n  }\n\n  const doneClick = (e) => {\n    if(!changed) return\n    updateProject(newProject)\n    modalDispatch({type:'HIDE_PROJECT_SHEET'})\n  }\n\n  const addClick = (e) => {\n    if(!changed) return\n    addProject(newProject)\n    modalDispatch({type:'HIDE_PROJECT_SHEET'})\n  }\n\n  const exitClick = (e) => {\n    modalDispatch({type:'HIDE_PROJECT_SHEET'})\n  }\n\n  const addItem = (e) => {\n    modalDispatch({type: 'SHOW_SHEET', itemProjectID: newProject.id})\n  }\n\n\n  return ( \n    <div className=\"relative overflow-scroll bg-white h-5/6 w-1/2 mt-10 p-5\">\n      <div onClick={exitClick} className=\"h-10 w-10 absolute top-0 right-0\">\n        <ExitIcon />\n      </div>\n      { isNew ? (\n        <p className=\"text-xl font-bold\">New Project</p>\n      ):(\n        <p className=\"text-xl font-bold\">Edit Project</p>\n      )}\n      <EditName value={newProject.name} change={change} />\n      <EditDescription value={newProject.description} change={change} />\n      <EditImportance value={newProject.importance} change={change} />\n      {\n        isNew ? (\n          <div className=\"flex space-x-2 mt-5\">\n            <button onClick={addClick} className={changed ? \"doneBtn\" : 'inactiveBtn'}>Add</button>\n          </div>\n        ) : (\n          <div>\n            <div className=\"flex space-x-2 mt-5\">\n              <button onClick={doneClick} className={changed ? \"doneBtn\" : \"inactiveBtn\"}>Save</button>\n              <button onClick={deleteClicked} className=\"importantBtn\">Delete</button>\n            </div>\n            <div>\n            </div>\n          </div>\n        )\n      }\n      { isNew ? null : (\n        <div>\n          <div className=\"flex space-x-1 mt-10\">\n            <p className=\"text-xl font-bold self-center\">Actions In Project</p>\n            <div onClick={addItem} className=\"w-7 h-7 cursor-pointer self-center\">\n              <PlusIcon />\n            </div>\n          </div>\n          { itemsInProj && itemsInProj.map(item => {\n            return(\n              <ItemCardContainer showProject={false} key={item.id} item={item} />\n            )\n          })}\n        </div>\n      )}\n    </div>\n   );\n}\n \nexport default ProjectEditModal;","import React, { useContext } from 'react'\nimport { ModalContext } from '../../../store/contexts/modalContext'\nimport ProjectEditModal from './ProjectEditModal'\n\nconst ProjectEditSheet = () => {\n\n  const { modalStatus, modalDispatch } = useContext(ModalContext)\n\n  const onClick = (e) => {\n    if(e.target.id === 'project-bg'){\n      modalDispatch({type:'HIDE_PROJECT_SHEET'})\n    }\n  }\n\n  if(modalStatus.showProjectSheet === false){\n    return null\n  }\n\n\n  return ( \n    <div onClick={onClick} id=\"project-bg\" className='flex justify-center w-screen h-screen bg-gray-400 bg-opacity-50 fixed inset-0'>\n      <ProjectEditModal />\n    </div>\n   );\n}\n \nexport default ProjectEditSheet;","import { useEffect, useContext } from 'react'\nimport { ModalContext } from '../store/contexts/modalContext'\n\n\nconst EscDetect = () => {\n\n  const { modalStatus, modalDispatch } = useContext(ModalContext)\n\n  useEffect(() => {\n\n    const keyEvent = (e) => {\n      if(e.code === \"Escape\"){\n        if(modalStatus.showSheet){\n          modalDispatch({type:'HIDE_SHEET'})\n        }else if(modalStatus.showProjectSheet){\n          modalDispatch({type:'HIDE_PROJECT_SHEET'})\n        }\n      }\n    }\n\n    document.addEventListener(\"keyup\", keyEvent);\n\n    return(() => {\n      document.removeEventListener(\"keyup\", keyEvent);\n    })\n  })\n\n  return null\n}\n \nexport default EscDetect;","import React, { useContext } from \"react\";\nimport firebase from '../../config/fbConfig'\nimport { useCollectionData } from 'react-firebase-hooks/firestore';\nimport { FbContext } from \"./fbContext\";\n\n\nexport const ItemsContext = React.createContext();\n\n\nexport const ItemsProvider = ({ children }) => {\n\n  const { FBuser } = useContext(FbContext)\n  const userID = FBuser ? FBuser.uid : null\n\n\n  const [items, itemsLoading] = useCollectionData(firebase.firestore().collection('users/' + userID + '/items').where('deleted','==',false).where('completed','==',false),{\n    idField: 'id'\n  })\n\n\n\n\n  return (\n    <ItemsContext.Provider value={{ items, itemsLoading }}>{children}</ItemsContext.Provider>\n  );\n};\n\n","import React, { useContext } from \"react\";\nimport firebase from '../../config/fbConfig'\nimport { useCollectionData } from 'react-firebase-hooks/firestore';\nimport { FbContext } from \"./fbContext\";\n\n\nexport const OneOffsContext = React.createContext();\n\n\nexport const OneOffsProvider = ({ children }) => {\n\n  const { FBuser } = useContext(FbContext)\n  const userID = FBuser ? FBuser.uid : null\n\n\n  const [oneOffs, oneOffsLoading] = useCollectionData(firebase.firestore().collection('users/'+ userID +'/oneOffs').where('done','==',false), {\n    idField: 'id'\n  });\n\n\n\n  return (\n    <OneOffsContext.Provider value={{ oneOffs, oneOffsLoading }}>{children}</OneOffsContext.Provider>\n  );\n};\n\n","import React, { useContext } from \"react\";\nimport firebase from '../../config/fbConfig'\nimport { useCollectionData } from 'react-firebase-hooks/firestore';\nimport { FbContext } from \"./fbContext\";\n\n\nexport const ProjectsContext = React.createContext();\n\n\nexport const ProjectsProvider = ({ children }) => {\n\n  const { FBuser } = useContext(FbContext)\n  const userID = FBuser ? FBuser.uid : null\n\n\n  const [projects, projectsLoading] = useCollectionData(firebase.firestore().collection('users/' + userID + '/projects').where('deleted','==',false),{\n    idField: 'id'\n  })\n\n\n\n  return (\n    <ProjectsContext.Provider value={{ projects, projectsLoading }}>{children}</ProjectsContext.Provider>\n  );\n};\n\n","import React, { useContext } from \"react\";\nimport firebase from '../../config/fbConfig'\nimport { useDocumentData } from 'react-firebase-hooks/firestore';\nimport { FbContext } from \"./fbContext\";\n\n\nexport const WeightsContext = React.createContext();\n\n\nexport const WeightsProvider = ({ children }) => {\n\n  const { FBuser } = useContext(FbContext)\n  const userID = FBuser ? FBuser.uid : null\n\n\n  const [userData, weightsLoading] = useDocumentData(firebase.firestore().collection('users').doc(\"/\" + userID))\n\n  const actionTypes = userData && userData.actionTypes ? userData.actionTypes : null;\n  const dayDrop = userData && userData.dayDrop ? userData.dayDrop : null;\n  const importanceTypes = userData && userData.importanceTypes ? userData.importanceTypes : null;\n  const oneOff = userData && userData.oneOff ? userData.oneOff : null;\n  const currentUserScore = userData && userData.currentScore !== null ? userData.currentScore : null;\n\n\n  const weights = actionTypes && dayDrop && importanceTypes && oneOff ? {\n    actionTypes,\n    dayDrop,\n    importanceTypes,\n    oneOff,\n    currentUserScore\n  } : null\n\n\n  return (\n    <WeightsContext.Provider value={{ weights, weightsLoading }}>{children}</WeightsContext.Provider>\n  );\n};\n\n","import React, { useState, useEffect } from \"react\";\nimport { useAuthState } from 'react-firebase-hooks/auth';\nimport firebase from '../../config/fbConfig'\n\nexport const HistoryContext = React.createContext();\n\n\nexport const HistoryProvider = ({ children }) => {\n\n  const [history, setHistory] = useState(null)\n\n  const [user] = useAuthState(firebase.auth());\n\n  \n  useEffect(() => {\n    const req = new XMLHttpRequest();\n      \n    req.onload = function() {\n      console.log(\"PULL\")\n      setHistory(JSON.parse(req.response))\n    }\n    req.onerror = function() {\n      console.log(req.response)\n    }\n\n    const params = {\n      \"id\": 1234\n    }\n      \n    const fullPath = \"http://localhost:5001/todo-8303f/us-central1/history/all\"\n    // const fullPath = \"https://us-central1-todo-8303f.cloudfunctions.net/history/all\"\n    req.open(\"GET\", fullPath, true);\n    console.log(params)\n\n    req.send(JSON.stringify(params));\n    // req.send();\n\n  }, [user])\n\n  return (\n    <HistoryContext.Provider value={{ history, historyLoading:false }}>{children}</HistoryContext.Provider>\n  );\n};\n\n","import moment from 'moment';\n\n\n\nexport const hydrateData = (items, weights, projects, oneOffs) => {\n\n  items = items ? items.filter(item => {\n    if(item.completed === false && item.deleted === false){\n      return true\n    }\n    return false\n  }) : null\n\n  const newWeights = weights ? hydrateWeights(weights) : null\n  const newItems = items && newWeights && projects ? hydrateItems(items, newWeights, projects) : null\n  const newProjects = newItems && projects ? hydrateProjects(newItems, projects) : null\n\n\n  var totalScore = addScores(newItems)\n\n  if(oneOffs){\n    oneOffs.forEach(oneOff => {\n      totalScore += weights.oneOff\n    })\n  }\n\n  const allDataPulled = items && weights && projects && oneOffs ? true : false\n\n  // currentItems = items\n  // currentWeights = weights\n  // currentProjects = projects\n\n  return {items: newItems, weights: newWeights, projects: newProjects, totalScore, allDataPulled}\n}\n\n\n\nconst addScores = (itemsToAdd) => {\n  if(itemsToAdd === null) return 0\n  var score = 0\n  itemsToAdd.forEach(item => {\n    score += item.score\n  })\n  return score\n}\n\n\nconst hydrateProjects = (items, projects) => {\n  const newProjects = projects.map(proj => {\n    const itemsInProj = itemsInProject(items, proj)\n    var projScore = 0;\n    itemsInProj.forEach(item => projScore += item.score)\n    return {...proj, totalScore: projScore, items: itemsInProj}\n  })\n  return newProjects\n}\n\nconst itemsInProject = (items, project) => {\n  if(project && items){\n    return items.filter(item => {\n      return item.projectID === project.id\n    })\n  }else{\n    return null\n  }\n}\n\nconst hydrateWeights = (weights) => {\n  weights.importanceArray = importanceArray(weights.importanceTypes)\n  weights.actionTypeArray = actionTypeArray(weights.actionTypes)\n  return weights\n}\n\n\nconst importanceArray = (importanceTypes) => {\n  const keys = Object.keys(importanceTypes)\n  var importanceArray = []\n  for (const key of keys) {\n    importanceArray.push(importanceTypes[key])\n  }\n  importanceArray = importanceArray.sort((a,b) => {\n    return a.id - b.id\n  })\n  \n  return importanceArray\n}\n\nconst actionTypeArray = (actionTypes) => {\n  const keys = Object.keys(actionTypes)\n  var actionTypeArray = []\n  for(const key of keys){\n    actionTypeArray.push(actionTypes[key])\n  }\n  actionTypeArray = actionTypeArray.sort((a,b) => {\n    return a.id - b.id\n  })\n  return actionTypeArray\n}\n\n\n\nconst hydrateItems = (items, weights, projects) => {\n  if(!items || !weights || !projects) return null\n  for(var i = 0; i < items.length; i++){\n    items[i] = hydrateItem(items[i], weights, projects)\n  }\n  return items\n}\n\n\n\nconst hydrateItem = (item, weights, projects) =>{\n\n\n  if(weights && item && projects){\n    const project = projects.filter(proj => {\n      return proj.id === item.projectID\n    })[0]\n\n    const itemDeleted = project ? false : true;\n    if(itemDeleted) return null\n\n    const importance = weights.importanceArray.filter(iType => {\n      return iType.id === project.importance\n    })[0]\n\n    const actionType = weights.actionTypeArray.filter(aType => {\n      return aType.id === item.actionType\n    })[0]\n\n    const daysTo = weekDaysBetween(item.expectedUpdate)\n    const score = item.expectedUpdate ? Math.max(0,(1 * importance.weight * actionType.weight) - (daysTo * weights.dayDrop)) : 0;\n\n\n    const colorClass = itemColorClass(item)\n  \n    return {...item, deleted: itemDeleted, importanceName: importance.name, importanceWeight: importance.weight, actionTypeName: actionType.name, actionTypeWeight: actionType.weight, daysTo, score, colorClass, project, dayDrop: weights.dayDrop}\n    \n  }\n  return item\n}\n\n\nconst weekDaysBetween = (timestamp) => {\n  if(timestamp === null) return 0;\n  const expectedUpdate = moment.unix(timestamp.seconds).startOf('days')\n  const now = moment().startOf('days');\n  var end = moment(expectedUpdate).startOf('days')\n  var start = moment(now).startOf('days')\n  var multiplier = 1\n  const dailyInfo = [false, true, true, true, true, true, false]\n  let totalDays = 0;\n\n  if(expectedUpdate.isSame(now)){\n    return 0;\n  }\n  if(expectedUpdate.isBefore(now)){\n    start = moment(expectedUpdate)\n    end = moment(now)\n    multiplier = -1;\n  }\n\n  while(!start.isSame(end)){\n    start.add(1,'d')\n    if(dailyInfo[start.day()]){\n      totalDays++;\n    }\n  }\n\n  return totalDays * multiplier\n\n}\n\nconst itemColorClass = (item) => {\n  if(item.expectedUpdate === null) return 'bg-white'\n  const now = moment().startOf('day');\n  const expectedUpdate = moment.unix(item.expectedUpdate.seconds).startOf('day')\n\n  if(expectedUpdate.isBefore(now) && item.actionType !== 5 && item.actionType !== 6){\n    return 'bg-red-600 text-white'\n  }else if(expectedUpdate.isSame(now) && (item.actionType === 1 || item.actionType === 4)){\n    return 'bg-purple-700 text-white'\n  }else if(expectedUpdate.isSame(now) && (item.actionType === 2 || item.actionType === 3)){\n    return 'bg-gray-600 text-white'\n  }else if(item.actionType === 1 || item.actionType === 4){\n    return 'bg-purple-300'\n  }else if(item.actionType === 2 || item.actionType === 3){\n    return 'bg-gray-400'\n  }\n\n  return 'bg-gray-300'\n\n}","import React, { useEffect, useContext } from 'react'\nimport { DataContext } from '../store/contexts/dataContext'\nimport { hydrateData } from '../store/hydrateData'\nimport { ItemsContext } from '../store/contexts/itemsContext'\nimport { OneOffsContext } from '../store/contexts/oneOffsContext'\nimport { ProjectsContext } from '../store/contexts/projectsContext'\nimport { WeightsContext } from '../store/contexts/weightsContext'\n\n\nconst DataHydrator = () => {\n\n  const { items, itemsLoading } = useContext(ItemsContext)\n  const { oneOffs, oneOffsLoading } = useContext(OneOffsContext)\n  const { projects, projectsLoading } = useContext(ProjectsContext)\n  const { weights, weightsLoading } = useContext(WeightsContext)\n  const { dataDispatch } = useContext(DataContext)\n\n  const allLoaded = !itemsLoading && !oneOffsLoading && !projectsLoading && !weightsLoading ? true : false;\n\n\n  useEffect(() => {\n    if(allLoaded){\n      console.log('data effect')\n      dataDispatch({type: 'SET_DATA', data: hydrateData(items, weights, projects, oneOffs)})\n    }\n  }, [items, projects, weights, oneOffs, dataDispatch, allLoaded])\n\n\n  useEffect(() => {\n    console.log('oneoff effect')\n    dataDispatch({type: 'SET_ONE_OFFS', oneOffs: oneOffs})\n  },[dataDispatch, oneOffs])\n\n  useEffect(() => {\n    console.log('all loaded effect')\n    dataDispatch({type: 'SET_ALL_LOADED', allLoaded: allLoaded})\n  }, [allLoaded, dataDispatch])\n\n\n\n  return ( \n    <div></div>\n   );\n}\n \nexport default DataHydrator;","import React, { useState, useContext } from 'react'\nimport { FbContext } from '../../store/contexts/fbContext';\nimport { login, logout } from '../../store/actions'\n\nconst Login = () => {\n\n  const { FBuser } = useContext(FbContext)\n  const [creds, setCreds] = useState({\n    email: '',\n    pass: ''\n  })\n\n  const logoutClick = (e) => {\n    logout();\n  }\n\n  if(FBuser){\n    return(\n      <button onClick={logoutClick} className=\"btn\">Logout</button>\n    )\n  }\n\n  const submit = (e) => {\n    e.preventDefault();\n    login(creds.email, creds.pass)\n    setCreds({\n      email: '',\n      pass: ''\n    })\n  }\n\n  const handleChange = (e) => {\n    setCreds({\n      ...creds,\n      [e.target.id] : e.target.value\n    })\n  }\n\n  return ( \n    <div>\n      <form onSubmit={submit}>\n        <input onChange={handleChange} value={creds.email} id=\"email\" className=\"formInput\" type=\"email\"></input>\n        <input onChange={handleChange} value={creds.pass} id=\"pass\" className=\"formInput\" type=\"password\"></input>\n        <button className=\"btn\" type=\"submit\">Login</button>\n      </form>\n    </div>\n   );\n}\n \nexport default Login;","import React, { useContext } from 'react'\nimport { FbContext } from '../../store/contexts/fbContext'\nimport { ModalContext } from '../../store/contexts/modalContext'\n\nconst AddItem = () => {\n\n  const { FBuser } = useContext(FbContext)\n  const { modalDispatch } = useContext(ModalContext)\n\n  const addItem = () => {\n    modalDispatch({type:'SHOW_SHEET'})\n  }\n\n  if(FBuser === null) return false\n\n  return ( \n    <button className=\"btn\" onClick={addItem}>Add Action</button>\n   );\n}\n \nexport default AddItem;","import React, { useContext } from 'react'\nimport { StateContext } from '../store/contexts/stateContext'\nimport Login from './auth/Login'\nimport AddItem from './leftBar/AddItem'\n\nconst Nav = () => {\n\n  const { stateDispatch } = useContext(StateContext)\n\n\n  const toggle = (e) => {\n    stateDispatch({type: 'TOGGLE'})\n  }\n\n  return ( \n    <div>\n      <div className=\"bg-gray-400 w-full h-10\">\n        <Login />\n        <button className=\"btn\" onClick={toggle}>Change View</button>\n        <AddItem />\n      </div>\n    </div>\n   );\n}\n \nexport default Nav;","import EditSheet from \"./components/modals/EditSheet/EditSheet\";\nimport { FbProvider } from './store/contexts/fbContext.js'\nimport Main from \"./components/Main\";\nimport ProjectEditSheet from \"./components/modals/projectEdit/ProjectEditSheet\";\nimport EscDetect from \"./components/EscDetect\";\nimport { FilterContextProvider } from \"./store/contexts/filterContext\";\nimport { ModalProvider } from \"./store/contexts/modalContext\";\nimport { DataContextProvider } from \"./store/contexts/dataContext\";\nimport { ItemsProvider } from \"./store/contexts/itemsContext\";\nimport { OneOffsProvider } from \"./store/contexts/oneOffsContext\";\nimport { ProjectsProvider } from \"./store/contexts/projectsContext\";\nimport { WeightsProvider } from \"./store/contexts/weightsContext\";\nimport { HistoryProvider } from \"./store/contexts/historyContext\";\nimport { ConfigProvider } from \"./store/contexts/configContext\";\nimport DataHydrator from \"./components/DataHydrator\";\nimport { CompltetedItemsProvider } from \"./store/contexts/completedItemsContext\";\nimport Nav from \"./components/Nav\";\nimport { StateProvider } from \"./store/contexts/stateContext\";\n\n\n\nconst App = () => {\n  return (\n    <FbProvider>\n      <FilterContextProvider>\n        <ModalProvider>\n          <DataContextProvider>\n            <ItemsProvider>\n              <OneOffsProvider>\n                <ProjectsProvider>\n                  <WeightsProvider>\n                    <HistoryProvider>\n                      <ConfigProvider>\n                        <CompltetedItemsProvider>\n                          <StateProvider>\n                            <DataHydrator />\n                            <div className=\"App\">\n                              <Nav />\n                              <Main />\n                              <ProjectEditSheet />\n                              <EditSheet />\n                              <EscDetect />\n                            </div>\n                          </StateProvider>\n                        </CompltetedItemsProvider>\n                      </ConfigProvider>\n                    </HistoryProvider>\n                  </WeightsProvider>\n                </ProjectsProvider>\n              </OneOffsProvider>\n            </ItemsProvider>\n          </DataContextProvider>\n        </ModalProvider>\n      </FilterContextProvider>\n    </FbProvider>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './styles/tailwind.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n\n"],"sourceRoot":""}