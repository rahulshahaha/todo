(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{167:function(e,t,n){"use strict";n.r(t);var c=n(2),i=n.n(c),a=n(21),o=n.n(a),s=(n(75),n(26));n(170),n(77),n(168);s.a.initializeApp({apiKey:"AIzaSyCSu3ggsS66Mo1OullwbFJIg9mibC9E9wY",authDomain:"todo-8303f.firebaseapp.com",projectId:"todo-8303f",storageBucket:"todo-8303f.appspot.com",messagingSenderId:"928128254937",appId:"1:928128254937:web:a3f32fafc7ca5ba6c40fc8"}),s.a.firestore();var r=s.a,u=function(){return r.auth().currentUser.uid},l=n(15),j=n(9),d=n(16),b=n.n(d),f=function(e){var t=b()(new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()));return b.a.unix(e.seconds).diff(t,"days")},O=function(e){var t=b()(new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate())),n=b.a.unix(e.expectedUpdate.seconds);return n.isBefore(t)&&5!==e.actionType&&6!==e.actionType?"bg-red-600 text-white":!n.isSame(t)||1!==e.actionType&&4!==e.actionType?!n.isSame(t)||2!==e.actionType&&3!==e.actionType?1===e.actionType||4===e.actionType?"bg-purple-300":2===e.actionType||3===e.actionType?"bg-gray-400":"bg-white":"bg-gray-600 text-white":"bg-purple-700 text-white"},h=n(67),p=n(1),m=i.a.createContext(),x=function(e){var t=e.children,n=Object(c.useState)(null),i=Object(j.a)(n,2),a=i[0],o=i[1],s=Object(c.useState)(null),u=Object(j.a)(s,2),d=u[0],b=u[1],x=Object(c.useState)(null),v=Object(j.a)(x,2),g=v[0],w=v[1],y=Object(c.useState)(null),C=Object(j.a)(y,2),N=C[0],D=C[1],S=Object(h.a)(r.auth()),I=Object(j.a)(S,1)[0];return Object(c.useEffect)((function(){var e=N?N.id:null,t=r.firestore().collection("items").where("userID","==",e).where("deleted","==",!1).onSnapshot((function(e){var t=[];e.docs.forEach((function(e){t.push(function(e,t){if(t&&e){var n=t.importanceTypes.filter((function(t){return t.id===e.importance}))[0],c=t.itemTypes.filter((function(t){return t.id===e.actionType}))[0],i=f(e.expectedUpdate),a=Math.max(0,1*n.weight*c.weight-i*t.dayDrop),o=O(e);return Object(l.a)(Object(l.a)({},e),{},{importanceName:n.name,importanceWeight:n.weight,actionTypeName:c.name,actionTypeWeight:c.weight,daysTo:i,score:a,colorClass:o})}return e}(Object(l.a)(Object(l.a)({},e.data()),{},{id:e.id,score:0}),d))})),o(t)}));return function(){t()}}),[d,N]),Object(c.useEffect)((function(){N?r.firestore().collection("users").doc(N.id).get().then((function(e){b(JSON.parse(e.data().weights))})):b(null)}),[N]),Object(c.useEffect)((function(){var e=N?N.id:null,t=r.firestore().collection("oneOffs").where("done","==",!1).where("userID","==",e).onSnapshot((function(e){var t=[];e.docs.forEach((function(e){t.push(Object(l.a)(Object(l.a)({},e.data()),{},{id:e.id}))})),w(t)}));return function(){t()}}),[N]),Object(c.useEffect)((function(){D(I?{id:I.uid}:null)}),[I]),Object(p.jsx)(m.Provider,{value:{items:a,oneOffs:g,weights:d,FBuser:I,user:N},children:t})},v=function(){return null!==Object(c.useContext)(m).user&&Object(p.jsx)("button",{className:"ml-10 mt-5 mb-10 btn",onClick:function(){!function(){var e=u(),t=new Date((new Date).getFullYear()+1,(new Date).getMonth(),(new Date).getDate());r.firestore().collection("items").add({action:"",actionType:1,description:"",expectedUpdate:t,importance:1,name:"NewName",notes:"",userID:e,deleted:!1})}()},children:"Add Item"})},g=n(25),w=function(){var e=Object(c.useContext)(m).user,t=Object(c.useState)({email:"",pass:""}),n=Object(j.a)(t,2),i=n[0],a=n[1];if(e)return Object(p.jsx)("button",{onClick:function(e){r.auth().signOut()},className:"btn",children:"Logout"});var o=function(e){a(Object(l.a)(Object(l.a)({},i),{},Object(g.a)({},e.target.id,e.target.value)))};return Object(p.jsx)("div",{children:Object(p.jsxs)("form",{onSubmit:function(e){var t,n;e.preventDefault(),t=i.email,n=i.pass,r.auth().signInWithEmailAndPassword(t,n),a({email:"",pass:""})},children:[Object(p.jsx)("input",{onChange:o,value:i.email,id:"email",className:"formInput",type:"email"}),Object(p.jsx)("input",{onChange:o,value:i.pass,id:"pass",className:"formInput",type:"password"}),Object(p.jsx)("button",{className:"btn",type:"submit",children:"Login"})]})})},y=function(){var e=Object(c.useState)(""),t=Object(j.a)(e,2),n=t[0],i=t[1];return Object(p.jsx)("form",{onSubmit:function(e){e.preventDefault(),function(e){var t=u();r.firestore().collection("oneOffs").add({name:e,done:!1,userID:t})}(n),i("")},children:Object(p.jsx)("input",{className:"formInput",value:n,onChange:function(e){i(e.target.value)}})})},C=function(e){var t=e.oneOff;return Object(p.jsxs)("div",{className:"flex",children:[Object(p.jsx)("input",{onChange:function(){var e;e=t.id,r.firestore().collection("oneOffs").doc(e).update({done:!0})},type:"checkbox"}),Object(p.jsx)("p",{children:t.name})]})},N=function(){var e=Object(c.useContext)(m).oneOffs;return Object(p.jsx)("div",{className:"w-full",children:Object(p.jsxs)("div",{className:"m-auto w-48",children:[Object(p.jsx)("h1",{className:"text-lg underline",children:"One Off Items"}),e&&e.map((function(e){return Object(p.jsx)(C,{oneOff:e},e.id)})),Object(p.jsx)(y,{})]})})},D=function(e){var t=e.item,n=t.name,i=Object(c.useState)(0),a=Object(j.a)(i,2),o=a[0],s=a[1],u=Object(c.useState)(n),l=Object(j.a)(u,2),d=l[0],b=l[1];return 1===o?Object(p.jsx)("td",{children:Object(p.jsx)("input",{className:t.colorClass,autoFocus:!0,onChange:function(e){b(e.target.value)},onBlur:function(){!function(e,t){r.firestore().collection("items").doc(t).update({name:e})}(d,t.id),s(0)},value:d})}):Object(p.jsx)("td",{onClick:function(){s(1)},children:n})},S=function(e){var t=e.item,n=t.importance;return Object(p.jsx)("td",{children:Object(p.jsxs)("select",{className:t.colorClass,onChange:function(e){!function(e,t){r.firestore().collection("items").doc(t).update({importance:parseInt(e)})}(e.target.value,t.id)},value:n,children:[Object(p.jsx)("option",{value:1,children:"High"}),Object(p.jsx)("option",{value:2,children:"Medium"}),Object(p.jsx)("option",{value:3,children:"Low"})]})})},I=function(e){var t=e.item,n=t.description,i=Object(c.useState)(0),a=Object(j.a)(i,2),o=a[0],s=a[1],u=Object(c.useState)(n),l=Object(j.a)(u,2),d=l[0],b=l[1];return 1===o?Object(p.jsx)("td",{children:Object(p.jsx)("textarea",{className:"h-full resize-y "+t.colorClass,autoFocus:!0,onChange:function(e){b(e.target.value)},onBlur:function(){var e,n;e=d,n=t.id,r.firestore().collection("items").doc(n).update({description:e}),s(0)},value:d})}):Object(p.jsx)("td",{onClick:function(){s(1)},children:n})},T=function(e){var t=e.item,n=t.notes,i=Object(c.useState)(0),a=Object(j.a)(i,2),o=a[0],s=a[1],u=Object(c.useState)(n),l=Object(j.a)(u,2),d=l[0],b=l[1];return 1===o?Object(p.jsx)("td",{children:Object(p.jsx)("input",{className:t.colorClass,autoFocus:!0,onChange:function(e){b(e.target.value)},onBlur:function(){!function(e,t){r.firestore().collection("items").doc(t).update({notes:e})}(d,t.id),s(0)},value:d})}):Object(p.jsx)("td",{onClick:function(){s(1)},children:n})},k=function(e){var t=e.item,n=t.actionType;return Object(p.jsx)("td",{children:Object(p.jsxs)("select",{className:t.colorClass,onChange:function(e){var n,c;n=e.target.value,c=t.id,r.firestore().collection("items").doc(c).update({actionType:parseInt(n)})},value:n,children:[Object(p.jsx)("option",{value:1,children:"ToDo"}),Object(p.jsx)("option",{value:2,children:"Wait for Meeting"}),Object(p.jsx)("option",{value:3,children:"Wait for Response"}),Object(p.jsx)("option",{value:4,children:"Follow-up"}),Object(p.jsx)("option",{value:5,children:"Nothing yet"}),Object(p.jsx)("option",{value:6,children:"Fully done"})]})})},F=function(e){var t=e.item,n=t.action,i=Object(c.useState)(0),a=Object(j.a)(i,2),o=a[0],s=a[1],u=Object(c.useState)(n),l=Object(j.a)(u,2),d=l[0],b=l[1];return 1===o?Object(p.jsx)("td",{children:Object(p.jsx)("textarea",{className:"h-full w-full resize-y "+t.colorClass,autoFocus:!0,onChange:function(e){b(e.target.value)},onBlur:function(){!function(e,t){r.firestore().collection("items").doc(t).update({action:e})}(d,t.id),s(0)},value:d})}):Object(p.jsx)("td",{onClick:function(){s(1)},children:n})},E=n(68),M=n.n(E),A=(n(81),function(e){var t=e.item,n=b.a.unix(t.expectedUpdate.seconds);return Object(p.jsx)("td",{children:Object(p.jsx)(M.a,{wrapperClassName:"mr-10",className:t.colorClass+" static",selected:n.toDate(),onChange:function(e){var n,c;n=e,c=t.id,r.firestore().collection("items").doc(c).update({expectedUpdate:n})}})})}),B=function(e){var t=e.itemID;return Object(p.jsx)("div",{children:Object(p.jsx)("svg",{onClick:function(e){console.log("delete"),!0===window.confirm("Are you sure you want to delete?")&&function(e){r.firestore().collection("items").doc(e).update({deleted:!0})}(t)},className:"trashIcon hidden absolute right-0 w-5 text-black cursor-pointer",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(p.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})},U=function(e){var t=e.item;return Object(p.jsxs)("tr",{className:t.colorClass,children:[Object(p.jsxs)("td",{className:"relative",children:[Object(p.jsx)(B,{itemID:t.id}),t.score.toFixed(2)]}),Object(p.jsx)(D,{item:t}),Object(p.jsx)(S,{item:t}),Object(p.jsx)(I,{item:t}),Object(p.jsx)(T,{item:t}),Object(p.jsx)(k,{item:t}),Object(p.jsx)(F,{item:t}),Object(p.jsx)(A,{item:t})]})},L=function(){var e=Object(c.useContext)(m).items,t=e?e.sort((function(e,t){return t.score-e.score})):null;return Object(p.jsx)("div",{children:Object(p.jsxs)("table",{children:[Object(p.jsx)("thead",{children:Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{children:"Score"}),Object(p.jsx)("th",{children:"Name"}),Object(p.jsx)("th",{children:"Importance"}),Object(p.jsx)("th",{children:"Description"}),Object(p.jsx)("th",{children:"Notes"}),Object(p.jsx)("th",{children:"Action Type"}),Object(p.jsx)("th",{children:"Action"}),Object(p.jsx)("th",{children:"Expected Update"})]})}),Object(p.jsx)("tbody",{children:t&&t.map((function(e){return Object(p.jsx)(U,{item:e},e.id)}))})]})})},W=function(){var e=Object(c.useContext)(m),t=e.items,n=e.oneOffs,i=e.weights,a=i?i.oneOff:0,o=0;if(t)for(var s=0;s<t.length;s++)o+=t[s].score;return n&&(o+=n.length*a),Object(p.jsx)("div",{children:Object(p.jsx)("h1",{className:"text-center text-4xl my-5",children:o.toFixed(2)})})};var z=function(){return Object(p.jsx)(x,{children:Object(p.jsxs)("div",{className:"App",children:[Object(p.jsx)(w,{}),Object(p.jsx)(W,{}),Object(p.jsx)(N,{}),Object(p.jsx)(L,{}),Object(p.jsx)(v,{})]})})};o.a.render(Object(p.jsx)(i.a.StrictMode,{children:Object(p.jsx)(z,{})}),document.getElementById("root"))},75:function(e,t,n){}},[[167,1,2]]]);
//# sourceMappingURL=main.f66a518a.chunk.js.map