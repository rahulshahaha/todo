(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{182:function(e,t,c){"use strict";c.r(t);var a=c(2),n=c.n(a),r=c(25),i=c.n(r),s=(c(82),c(5)),o=c(3),l=function(e,t){switch(t.type){case"SHOW_SHEET":return Object(o.a)(Object(o.a)({},e),{},{showSheet:!0,itemID:t.itemID,itemProjectID:t.itemProjectID});case"SHOW_PROJECT_SHEET":return Object(o.a)(Object(o.a)({},e),{},{showProjectSheet:!0,projectID:t.projectID});case"HIDE_SHEET":return Object(o.a)(Object(o.a)({},e),{},{showSheet:!1,itemID:null,itemProjectID:null});case"HIDE_PROJECT_SHEET":return Object(o.a)(Object(o.a)({},e),{},{showProjectSheet:!1,projectID:null});default:return e}},u=c(1),d=n.a.createContext(),j=function(e){var t=e.children,c=Object(a.useReducer)(l,{showSheet:!1,showProjectSheet:!1,itemID:null}),n=Object(s.a)(c,2),r=n[0],i=n[1];return Object(u.jsx)(d.Provider,{value:{modalStatus:r,modalDispatch:i},children:t})},b=c(11),p=c(32),f=function(e){var t=e.value,c=e.change;return Object(u.jsxs)("div",{className:"mt-2",children:[Object(u.jsx)("p",{children:"Action"}),Object(u.jsx)(p.a,{id:"action",onChange:c,className:"focus:outline-none border-2 border-black ",value:t})]})},O=c(33);c(185),c(85),c(183);O.a.initializeApp({apiKey:"AIzaSyCSu3ggsS66Mo1OullwbFJIg9mibC9E9wY",authDomain:"todo-8303f.firebaseapp.com",projectId:"todo-8303f",storageBucket:"todo-8303f.appspot.com",messagingSenderId:"928128254937",appId:"1:928128254937:web:a3f32fafc7ca5ba6c40fc8"}),O.a.firestore();var m=O.a,h=c(12),x=c.n(h),v=function(e){if(null===e)return 0;var t=x.a.unix(e.seconds).startOf("days"),c=x()().startOf("days"),a=x()(t),n=x()(c),r=1,i=[!1,!0,!0,!0,!0,!0,!1],s=0;if(t.isSame(c))return 0;for(t.isBefore(c)&&(n=x()(t),a=x()(c),r=-1);!n.isSame(a);)n.add(1,"d"),i[n.day()]&&s++;return s*r},g=function(e){if(null===e.expectedUpdate)return"bg-white";var t=x()(new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate())),c=x.a.unix(e.expectedUpdate.seconds);return c.isBefore(t)&&5!==e.actionType&&6!==e.actionType?"bg-red-600 text-white":!c.isSame(t)||1!==e.actionType&&4!==e.actionType?!c.isSame(t)||2!==e.actionType&&3!==e.actionType?1===e.actionType||4===e.actionType?"bg-purple-300":2===e.actionType||3===e.actionType?"bg-gray-400":"bg-gray-300":"bg-gray-600 text-white":"bg-purple-700 text-white"},y=c(74),w=c(23),N=function(e){for(var t=[],c=0,a=Object.keys(e);c<a.length;c++){var n=a[c];t.push(e[n])}return t=t.sort((function(e,t){return e.id-t.id})),t},T=function(e){for(var t=[],c=0,a=Object.keys(e);c<a.length;c++){var n=a[c];t.push(e[n])}return t=t.sort((function(e,t){return e.id-t.id})),t},E=n.a.createContext(),C=function(e){var t=e.children,c=Object(y.a)(m.auth()),a=Object(s.a)(c,1)[0],n=a?a.uid:null,r=Object(w.a)(m.firestore().collection("users/"+n+"/oneOffs").where("done","==",!1),{idField:"id"}),i=Object(s.a)(r,1)[0],l=Object(w.b)(m.firestore().collection("users").doc("/"+n),{transform:function(e){return function(e){return e.importanceArray=N(e.importanceTypes),e.actionTypeArray=T(e.actionTypes),e}({importanceTypes:e.importanceTypes,actionTypes:e.actionTypes,dayDrop:e.dayDrop,oneOff:e.oneOff})}}),d=Object(s.a)(l,1)[0],j=Object(w.a)(m.firestore().collection("users/"+n+"/projects").where("deleted","==",!1),{idField:"id"}),b=Object(s.a)(j,1)[0],p=Object(w.a)(m.firestore().collection("users/"+n+"/items").where("deleted","==",!1),{idField:"id",transform:function(e){return function(e,t,c){if(t&&e&&c){var a=c.filter((function(t){return t.id===e.projectID}))[0],n=!a;if(n)return null;var r=t.importanceArray.filter((function(e){return e.id===a.importance}))[0],i=t.actionTypeArray.filter((function(t){return t.id===e.actionType}))[0],s=v(e.expectedUpdate),l=e.expectedUpdate?Math.max(0,1*r.weight*i.weight-s*t.dayDrop):0,u=g(e);return Object(o.a)(Object(o.a)({},e),{},{deleted:n,importanceName:r.name,importanceWeight:r.weight,actionTypeName:i.name,actionTypeWeight:i.weight,daysTo:s,score:l,colorClass:u,project:a})}return e}(Object(o.a)(Object(o.a)({},e),{},{score:0}),d,b)}}),f=Object(s.a)(p,1)[0],O=Object(w.a)(m.firestore().collection("users/"+n+"/history").orderBy("date","asc")),h=Object(s.a)(O,1)[0];return Object(u.jsx)(E.Provider,{value:{items:f,oneOffs:i,weights:d,FBuser:a,history:h,projects:b},children:t})},D=function(e){var t=e.value,c=e.change,n=Object(a.useContext)(E).weights,r=n?n.actionTypeArray:null;return r&&(r=r.sort((function(e,t){return t.weight-e.weight}))),Object(u.jsxs)("div",{className:"mt-2",children:[Object(u.jsx)("p",{children:"Action Type"}),Object(u.jsx)("select",{className:"border-2 border-black",onChange:c,id:"actionType",value:t,children:r&&r.map((function(e){return Object(u.jsx)("option",{value:e.id,children:e.name},e.id)}))})]})},S=c(75),I=c.n(S),k=(c(88),function(e){var t=e.value,c=e.change,a=t&&t.seconds?x.a.unix(t.seconds).toDate():t||null;return Object(u.jsxs)("div",{className:"mt-2",children:[Object(u.jsx)("p",{children:"Expected Update"}),Object(u.jsx)(I.a,{id:"expectedUpdate",isClearable:!1,className:"formInput",selected:a,onChange:function(e,t){null!==e&&c(e)}})]})}),F=function(e,t){for(var c=0,a=Object.keys(e);c<a.length;c++){var n=a[c];isNaN(parseFloat(e[n].weight))||(t[n]=Object(o.a)(Object(o.a)({},e[n]),{},{weight:parseFloat(e[n].weight)}))}m.firestore().collection("users").doc(_()).get().then((function(e){m.firestore().collection("users").doc(_()).update({importanceTypes:t})}))},A=function(e,t){for(var c=0,a=Object.keys(e);c<a.length;c++){var n=a[c];isNaN(parseFloat(e[n].weight))||(t[n]=Object(o.a)(Object(o.a)({},e[n]),{},{weight:parseFloat(e[n].weight)}))}m.firestore().collection("users").doc(_()).get().then((function(e){m.firestore().collection("users").doc(_()).update({actionTypes:t})}))},_=function(){return m.auth().currentUser.uid};var H=function(e,t){return e&&t?e.map((function(e){var c=t.filter((function(t){return!!t.project&&t.project.id===e.id})),a=0;return c.forEach((function(e){return a+=e.score})),Object(o.a)(Object(o.a)({},e),{},{totalScore:a})})):e},P=function(e){var t=e.value,c=e.change,n=Object(a.useContext)(E),r=n.projects,i=n.items,s=H(r,i),o=[];return s&&(o=s.sort((function(e,t){return t.totalScore-e.totalScore}))),Object(u.jsxs)("div",{className:"mt-2",children:[Object(u.jsx)("p",{children:"Project"}),Object(u.jsxs)("select",{className:"border-2 border-black",id:"projectID",value:t,onChange:c,children:[Object(u.jsx)("option",{disabled:!0,value:"",children:"Select a Project"}),o&&o.map((function(e){return Object(u.jsx)("option",{value:e.id,children:e.name},e.id)}))]})]})},L=function(){return Object(u.jsx)("svg",{className:"cursor-pointer",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(u.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})},B=function(){var e=Object(a.useRef)(null),t=Object(a.useContext)(E).items,c=Object(a.useContext)(d),n=c.modalStatus,r=c.modalDispatch,i=Object(a.useState)({action:"",actionType:1,expectedUpdate:new Date,projectID:""}),l=Object(s.a)(i,2),j=l[0],p=l[1],O=Object(a.useState)(!1),h=Object(s.a)(O,2),x=h[0],v=h[1],g=Object(a.useState)(!0),y=Object(s.a)(g,2),w=y[0],N=y[1];Object(a.useEffect)((function(){n&&n.itemID&&(t?(p(t.filter((function(e){return e.id===n.itemID}))[0]),N(!1)):N(!0)),n.itemProjectID&&p({action:"",actionType:1,expectedUpdate:new Date,projectID:n.itemProjectID})}),[n,t]),Object(a.useEffect)((function(){""===j.projectID||""===j.action?v(!1):v(!0)}),[j.projectID,j.action]);var T=function(e){p(Object(o.a)(Object(o.a)({},j),{},Object(b.a)({},e.target.id,e.target.value)))};return Object(u.jsxs)("div",{ref:e,id:"modal",className:"relative overflow-scroll bg-white h-5/6 mt-10 p-5",children:[Object(u.jsx)("div",{onClick:function(e){r({type:"HIDE_SHEET"})},className:"h-10 w-10 absolute top-0 right-0",children:Object(u.jsx)(L,{})}),w?Object(u.jsx)("p",{className:"text-xl font-bold",children:"New Item"}):Object(u.jsx)("p",{className:"text-xl font-bold",children:"Edit Item"}),Object(u.jsx)(P,{value:j.projectID,change:T}),Object(u.jsx)(D,{value:j.actionType,change:T}),Object(u.jsx)(k,{value:j.expectedUpdate,change:function(e){p(Object(o.a)(Object(o.a)({},j),{},{expectedUpdate:e}))}}),Object(u.jsx)(f,{value:j.action,change:T}),w?Object(u.jsx)("div",{className:"flex space-x-2 mt-5",children:Object(u.jsx)("button",{onClick:function(e){x&&(!function(e){m.firestore().collection("users/"+_()+"/items").add({action:e.action,actionType:parseInt(e.actionType),expectedUpdate:e.expectedUpdate,deleted:!1,projectID:e.projectID})}(j),r({type:"HIDE_SHEET"}))},className:x?"doneBtn":"inactiveBtn",children:"Add"})}):Object(u.jsxs)("div",{children:[Object(u.jsxs)("div",{className:"flex space-x-2 mt-5",children:[Object(u.jsx)("button",{onClick:function(e){x&&(!function(e){m.firestore().collection("users/"+_()+"/items").doc(e.id).update({action:e.action,actionType:parseInt(e.actionType),expectedUpdate:e.expectedUpdate,projectID:e.projectID})}(j),r({type:"HIDE_SHEET"}))},className:x?"doneBtn":"inactiveBtn",children:"Save"}),Object(u.jsx)("button",{onClick:function(e){var t;!0===window.confirm("Are you sure you want to delete?")&&(t=j.id,m.firestore().collection("users/"+_()+"/items").doc(t).update({deleted:!0}),r({type:"HIDE_SHEET"}))},className:"importantBtn",children:"Delete Item"})]}),Object(u.jsx)("div",{})]})]})},R=function(){var e=Object(a.useContext)(d),t=e.modalStatus,c=e.modalDispatch;return!1===t.showSheet?null:Object(u.jsx)("div",{onClick:function(e){"edit-bg"===e.target.id&&c({type:"HIDE_SHEET"})},id:"edit-bg",className:"flex justify-center w-screen h-screen bg-gray-400 bg-opacity-40 fixed inset-0",children:Object(u.jsx)(B,{})})},M=function(){var e=Object(a.useContext)(E).FBuser,t=Object(a.useContext)(d).modalDispatch;return null!==e&&Object(u.jsx)("button",{className:"ml-10 mt-5 mb-10 btn",onClick:function(){t({type:"SHOW_SHEET"})},children:"Add Item"})},U=function(){var e=Object(a.useContext)(E).FBuser,t=Object(a.useState)({email:"",pass:""}),c=Object(s.a)(t,2),n=c[0],r=c[1];if(e)return Object(u.jsx)("button",{onClick:function(e){m.auth().signOut()},className:"btn",children:"Logout"});var i=function(e){r(Object(o.a)(Object(o.a)({},n),{},Object(b.a)({},e.target.id,e.target.value)))};return Object(u.jsx)("div",{children:Object(u.jsxs)("form",{onSubmit:function(e){var t,c;e.preventDefault(),t=n.email,c=n.pass,m.auth().signInWithEmailAndPassword(t,c),r({email:"",pass:""})},children:[Object(u.jsx)("input",{onChange:i,value:n.email,id:"email",className:"formInput",type:"email"}),Object(u.jsx)("input",{onChange:i,value:n.pass,id:"pass",className:"formInput",type:"password"}),Object(u.jsx)("button",{className:"btn",type:"submit",children:"Login"})]})})},V=function(){var e=Object(a.useState)(""),t=Object(s.a)(e,2),c=t[0],n=t[1];return Object(u.jsx)("form",{onSubmit:function(e){e.preventDefault(),function(e){var t=_(),c=new Date;m.firestore().collection("users/"+_()+"/oneOffs").add({name:e,done:!1,userID:t,created:c})}(c),n("")},children:Object(u.jsx)("input",{className:"formInput mt-2",placeholder:"Add One Off",value:c,onChange:function(e){n(e.target.value)}})})},W=function(e){var t=e.oneOff;return Object(u.jsxs)("div",{className:"flex space-x-2",children:[Object(u.jsx)("input",{className:"self-center",onChange:function(){var e;e=t.id,m.firestore().collection("users/"+_()+"/oneOffs").doc(e).update({done:!0})},type:"checkbox"}),Object(u.jsx)("label",{className:"self-center",children:t.name})]})},J=function(){var e=Object(a.useContext)(E).oneOffs,t=e?e.sort((function(e,t){return e.created-t.created})):null;return Object(u.jsx)("div",{className:"w-full",children:Object(u.jsxs)("div",{className:"m-auto w-48",children:[Object(u.jsx)("h1",{className:"text-lg font-bold",children:"One Off Items"}),t&&t.map((function(e){return Object(u.jsx)(W,{oneOff:e},e.id)})),Object(u.jsx)(V,{})]})})},Y=function(e){var t=e.actionTypes,c=Object(a.useState)([]),n=Object(s.a)(c,2),r=n[0],i=n[1];Object(a.useEffect)((function(){t&&i(t)}),[t]);for(var l=function(e){i(Object(o.a)(Object(o.a)({},r),{},Object(b.a)({},e.target.attributes.actionid.nodeValue,Object(o.a)(Object(o.a)({},r[e.target.attributes.actionid.nodeValue]),{},{weight:e.target.value}))))},d=function(e){i(Object(o.a)(Object(o.a)({},r),{},Object(b.a)({},e.target.attributes.actionid.nodeValue,Object(o.a)(Object(o.a)({},r[e.target.attributes.actionid.nodeValue]),{},{name:e.target.value}))))},j=function(e){var c=isNaN(parseFloat(e.target.value))?t[e.target.attributes.actionid.nodeValue].weight:parseFloat(e.target.value);A(Object(o.a)(Object(o.a)({},r),{},Object(b.a)({},e.target.attributes.actionid.nodeValue,Object(o.a)(Object(o.a)({},r[e.target.attributes.actionid.nodeValue]),{},{weight:c}))),t)},p=function(e){var c=""===e.target.value?t[e.target.attributes.actionid.nodeValue].name:e.target.value;c!==t[e.target.attributes.actionid.nodeValue].name&&A(Object(o.a)(Object(o.a)({},r),{},Object(b.a)({},e.target.attributes.actionid.nodeValue,Object(o.a)(Object(o.a)({},r[e.target.attributes.actionid.nodeValue]),{},{name:c}))),t)},f=[],O=0,h=Object.keys(r);O<h.length;O++){var x=h[O];f.push(r[x])}return f=f.sort((function(e,t){return t.weight-e.weight})),Object(u.jsxs)("div",{className:"m-auto w-56 mt-10",children:[Object(u.jsx)("p",{className:"text-lg font-bold",children:"Action Type Weights"}),Object(u.jsx)("div",{className:"flex flex-col space-y-1",children:f&&f.map((function(e){return Object(u.jsxs)("div",{className:"grid grid-cols-12",children:[Object(u.jsx)("input",{onBlur:p,onChange:d,actionid:e.id,value:e.name,className:"col-span-7 formInput"}),Object(u.jsx)("input",{onBlur:j,value:e.weight,actionid:e.id,id:e.id,onChange:l,className:"formInputSmall col-span-4 col-start-9"})]},e.id)}))}),Object(u.jsx)("button",{className:"btn mt-2",onClick:function(e){!function(e){var t=Object.keys(e).length+1,c="actionTypes."+t;m.firestore().collection("users").doc(_()).update(Object(b.a)({},c,{id:t,name:"New",weight:0}))}(t)},children:"Add"})]})},z=function(e){var t=e.importanceTypes,c=Object(a.useState)([]),n=Object(s.a)(c,2),r=n[0],i=n[1];Object(a.useEffect)((function(){t&&i(t)}),[t]);for(var l=function(e){i(Object(o.a)(Object(o.a)({},r),{},Object(b.a)({},e.target.attributes.importanceid.nodeValue,Object(o.a)(Object(o.a)({},r[e.target.attributes.importanceid.nodeValue]),{},{weight:e.target.value}))))},d=function(e){i(Object(o.a)(Object(o.a)({},r),{},Object(b.a)({},e.target.attributes.importanceid.nodeValue,Object(o.a)(Object(o.a)({},r[e.target.attributes.importanceid.nodeValue]),{},{name:e.target.value}))))},j=function(e){var c=isNaN(parseFloat(e.target.value))?t[e.target.attributes.importanceid.nodeValue].weight:parseFloat(e.target.value);F(Object(o.a)(Object(o.a)({},r),{},Object(b.a)({},e.target.attributes.importanceid.nodeValue,Object(o.a)(Object(o.a)({},r[e.target.attributes.importanceid.nodeValue]),{},{weight:c}))),t)},p=function(e){var c=""===e.target.value?t[e.target.attributes.importanceid.nodeValue].name:e.target.value;F(Object(o.a)(Object(o.a)({},r),{},Object(b.a)({},e.target.attributes.importanceid.nodeValue,Object(o.a)(Object(o.a)({},r[e.target.attributes.importanceid.nodeValue]),{},{name:c}))),t)},f=[],O=0,h=Object.keys(r);O<h.length;O++){var x=h[O];f.push(r[x])}return f=f.sort((function(e,t){return t.weight-e.weight})),Object(u.jsxs)("div",{className:"m-auto w-56 mt-10",children:[Object(u.jsx)("p",{className:"text-lg font-bold",children:"Importance Weights"}),Object(u.jsx)("div",{className:"flex flex-col space-y-1",children:f&&f.map((function(e){return Object(u.jsxs)("div",{className:"grid grid-cols-12",children:[Object(u.jsx)("input",{onBlur:p,value:e.name,onChange:d,importanceid:e.id,className:"col-span-7 formInput"}),Object(u.jsx)("input",{onBlur:j,value:e.weight,importanceid:e.id,onChange:l,className:"formInputSmall col-span-4 col-start-9"})]},e.id)}))}),Object(u.jsx)("button",{onClick:function(e){!function(e){var t=Object.keys(e).length+1,c="importanceTypes."+t;m.firestore().collection("users").doc(_()).update(Object(b.a)({},c,{id:t,name:"New",weight:0}))}(t)},className:"btn mt-2",children:"Add"})]})},K=function(){var e=Object(a.useContext)(E).weights;return Object(u.jsx)("div",{className:"w-full",children:Object(u.jsx)("div",{children:e?Object(u.jsxs)("div",{children:[Object(u.jsx)(z,{importanceTypes:e.importanceTypes}),Object(u.jsx)(Y,{actionTypes:e.actionTypes})]}):null})})},q=c(30),G=c(31),Q=Object(o.a)(Object(o.a)({},q),{},{tip:G.a}),X=function(e){var t=[];t.push(e[0]);for(var c=1;c<e.length;c++)e[c].score!==e[c-1].score&&t.push(e[c]);return t},Z=function(e){var t=[];return e.forEach((function(e){t.push({x:x.a.unix(e.date.seconds).toDate(),y:e.score})})),{lines:[{name:"Score History",data:t}],minY:0,xTicks:6,yTicks:7,dots:!0,dotSize:2}},$=function(e){return x()(e).format("MM/DD/YY")},ee=function(e){return e.toFixed(2)},te=function(e,t){var c=function(e){var t=0,c=null;return e.lines.forEach((function(e){e.data.forEach((function(e){t=Math.max(e.y,t),c=c?Math.min(e.y,c):e.y}))})),{max:t,min:c-=.1*(t-c)}}(e);return Q.scaleLinear().range([0,t]).domain([c.max,c.min])},ce=function(e,t){var c=function(e){var t=new Date,c=0;return e.lines.forEach((function(e){e.data.forEach((function(e){c=Math.max(e.x,c),t=Math.min(e.x,t)}))})),{max:c,min:t}}(e);return Q.scaleTime().range([0,t]).domain([c.min,c.max])},ae=function(){return Q.tip().attr("class","tip card").html((function(e,t){var c=$(t.x),a=ee(t.y),n=function(e){return x()(e).format("h:mm a")}(t.x),r="";return r+='<div class="score">'.concat(a,"</div>"),r+='<div class="name">'.concat(c,"</div>"),r+='<div class="cost">'.concat(n,"</div>")}))},ne=Object(o.a)(Object(o.a)({},q),{},{tip:G.a}),re=function(e){var t=e.chartClass,c=Object(a.useContext)(E),n=c.history,r=c.FBuser,i=null;i=function(e){return e&&e.length>0?Z(X(e)):null}(n);var s=Object(a.useRef)();return Object(a.useEffect)((function(){var e=10,t=35,c=500-t-20,a=200-e-20,n=ne.select(s.current).attr("viewBox","0 0 ".concat(500," ").concat(200)).select(".chartArea").attr("height",200).attr("class","chartArea").attr("width",500).attr("transform","translate(".concat(t,",").concat(e,")"));n.selectAll("g").remove();var r=n.append("g").attr("transform","translate(-".concat(t,",-").concat(e,")"));if(r.selectAll("g").remove(),r.selectAll("path").remove(),i){var o=r.append("g").style("opacity",0).attr("transform","translate(".concat(t,",").concat(e,")")),l=o.append("line").attr("stroke","#aaa").attr("stroke-width",1).attr("stroke-dasharray",4),u=o.append("line").attr("stroke","#aaa").attr("stroke-width",1).attr("stroke-dasharray",4),d=n.append("g").attr("transform","translate(0,".concat(a,")")),j=n.append("g").attr("transform","translate(0, 0)"),b=ce(i,c),p=te(i,a),f=ne.line().x((function(e){return b(e.x)})).y((function(e){return p(e.y)}));i.lines.forEach((function(c){var n=ae();r.call(n);var s=r.append("path").attr("transform","translate(".concat(t,",").concat(e,")")),d=r.selectAll("circle."+c.name).data(c.data),j=i.dotSize?i.dotSize:5;d.exit().remove(),d.attr("r",j).attr("fill","black").attr("cx",(function(e){return b(e.x)})).attr("cy",(function(e){return p(e.y)})).attr("transform","translate(".concat(t,",").concat(e,")")).on("mouseover",n.show).on("mouseout",n.hide),d.enter().append("circle").attr("fill","black").attr("cx",(function(e){return b(e.x)})).attr("cy",(function(e){return p(e.y)})).attr("r",j).attr("transform","translate(".concat(t,",").concat(e,")")).attr("opacity",1).on("mouseover.tip",n.show).on("mouseover.lines",(function(e,t){l.attr("x1",b(t.x)).attr("x2",b(t.x)).attr("y1",p(t.y)).attr("y2",a),u.attr("x1",0).attr("x2",b(t.x)).attr("y1",p(t.y)).attr("y2",p(t.y)),o.style("opacity",1)})).on("mouseout.tip",n.hide).on("mouseout.lines",(function(e,t){o.style("opacity",0)}));var O=s.node().getTotalLength();s.data([c.data]).attr("fill","none").attr("stroke","black").attr("stroke-width",2).attr("d",f).style("opacity",.75).attr("stroke-dasharray",O+" "+O)}));var O=i.xTicks?i.xTicks:5,m=i.yTicks?i.yTicks:5,h=i?$:function(e){return e},x=i?ee:function(e){return e},v=ne.axisBottom(b).tickFormat((function(e){return h(e)})).ticks(O),g=ne.axisLeft(p).tickFormat((function(e){return x(e)})).ticks(m);d.call(v).attr("class","chartAxis"),j.call(g).attr("class","chartAxis")}}),[r,i]),Object(u.jsx)("div",{className:"flex justify-center",children:Object(u.jsx)("div",{className:t+" w-full",children:Object(u.jsx)("svg",{ref:s,children:Object(u.jsx)("g",{className:"chartArea"})})})})},ie=function(){var e=Object(a.useContext)(E),t=e.items,c=e.oneOffs,n=e.weights,r=e.FBuser,i=n?n.oneOff:0,o=Object(a.useState)(0),l=Object(s.a)(o,2),d=l[0],j=l[1],b=Object(a.useState)(!1),p=Object(s.a)(b,2),f=p[0],O=p[1],h=f?"block":"hidden";Object(a.useEffect)((function(){var e=0,a=!1;if(t&&c){for(var n=0;n<t.length;n++)e+=t[n].score;e>0&&(a=!0),e+=c.length*i}e!==d&&t&&c&&a&&r&&function(e){var t=new Date;m.firestore().collection("users").doc(_()).get().then((function(c){c.data().currentScore.toFixed(2)!==e.toFixed(2)&&(console.log("log history. current:",c.data().currentScore,"new",e),m.firestore().collection("users").doc(_()).update({currentScore:parseFloat(e.toFixed(2))}).then((function(c){m.firestore().collection("users/"+_()+"/history").add({date:t,score:parseFloat(e.toFixed(2))})})))}))}(e),j(e)}),[t,c,i,d,r]);return Object(u.jsxs)("div",{className:"my-5",children:[Object(u.jsxs)("div",{className:"flex justify-center space-x-1",children:[Object(u.jsx)("h1",{className:"text-center text-4xl scoreLabel",children:d.toFixed(2)}),Object(u.jsx)("svg",{onClick:function(e){O(!f)},className:"w-5 cursor-pointer",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(u.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 12l3-3 3 3 4-4M8 21l4-4 4 4M3 4h18M4 4h16v12a1 1 0 01-1 1H5a1 1 0 01-1-1V4z"})})]}),Object(u.jsx)(re,{chartClass:h})]})},se=c(175),oe=function(e){for(var t=e.importance,c=Object(a.useContext)(E).weights,n=c?c.importanceArray:null,r=se([[255,255,255],[255,0,0]]),i=r(0),s=n.length,o=n.sort((function(e,t){return e.weight-t.weight})),l=1,d=1;d<=o.length;d++)o[d-1].id===t&&(l=d,i=r((d-1)/(s-1)));for(var j=[],b=1;b<=l;b++)j.push(b);return Object(u.jsx)("div",{className:"flex",children:j&&j.map((function(e){return Object(u.jsx)("div",{className:"h-3 w-3",children:Object(u.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(u.jsx)("circle",{cx:"12",cy:"12",r:"10",stroke:"black",strokeWidth:"1",fill:i})})},e)}))})},le=function(e){var t=e.proj,c=e.weights,n=Object(a.useContext)(d).modalDispatch;return Object(u.jsxs)("div",{onClick:function(e){n({type:"SHOW_PROJECT_SHEET",projectID:t.id})},className:"transform hover:scale-110 transition ease-out duration-300 flex justify-between whitespace-nowrap px-2 space-x-2 text-white bg-black rounded-lg cursor-pointer",children:[Object(u.jsxs)("p",{className:"overflow-hidden overflow-ellipsis",children:[t.totalScore.toFixed(2)," - ",t.name]}),Object(u.jsx)("div",{className:"self-center",children:Object(u.jsx)(oe,{importance:t.importance,importances:c.importanceArray})})]})},ue=function(){return Object(u.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(u.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})},de=function(){var e=Object(a.useContext)(E),t=e.projects,c=e.items,n=e.weights,r=Object(a.useContext)(d).modalDispatch,i=[];t&&c&&(i=t.map((function(e){var t=c.filter((function(t){return!!t.project&&t.project.id===e.id})),a=0;return t.forEach((function(e){return a+=e.score})),Object(o.a)(Object(o.a)({},e),{},{totalScore:a})}))),i.sort((function(e,t){return t.totalScore-e.totalScore}));return Object(u.jsxs)("div",{className:"m-auto w-60 mt-10",children:[Object(u.jsxs)("div",{className:"flex space-x-1",children:[Object(u.jsx)("p",{className:"self-center text-xl font-bold",children:"Projects"}),Object(u.jsx)("div",{onClick:function(e){r({type:"SHOW_PROJECT_SHEET",projectID:null})},className:"self-center w-8 h-8 cursor-pointer",children:Object(u.jsx)(ue,{})})]}),Object(u.jsx)("div",{className:"flex flex-col space-y-1",children:i&&i.map((function(e){return Object(u.jsx)(le,{proj:e,weights:n},e.id)}))})]})},je=function(){var e=Object(a.useState)(!1),t=Object(s.a)(e,2),c=t[0],n=t[1];return Object(u.jsx)("div",{className:"col-span-3 h-screen overflow-hidden",children:Object(u.jsxs)("div",{className:"h-full overflow-scroll hideBar pb-10",children:[Object(u.jsx)(U,{}),Object(u.jsx)(M,{}),Object(u.jsx)(ie,{}),Object(u.jsx)(J,{}),Object(u.jsx)(de,{}),Object(u.jsx)("p",{className:"mt-10 cursor-pointer underline m-auto w-56",onClick:function(e){n(!c)},children:c?"Hide Config":"Show Config"}),c?Object(u.jsx)("div",{children:Object(u.jsx)(K,{})}):null]})})},be=function(e,t){switch(t.type){case"SETUP_IMPORTANCE_FILTERS":var c={};return t.importances.forEach((function(e){c[e.id]=!0})),Object(o.a)(Object(o.a)({},e),{},{importanceFilters:c});case"SET_IMPORTANCE_FILTER":return Object(o.a)(Object(o.a)({},e),{},{importanceFilters:Object(o.a)(Object(o.a)({},e.importanceFilters),{},Object(b.a)({},t.importance,t.value))});case"ALL_IMPORTANCE":for(var a={},n=0,r=Object.keys(t.importances);n<r.length;n++){a[r[n]]=t.value}return Object(o.a)(Object(o.a)({},e),{},{importanceFilters:a});case"SET_ACTION_FILTER":return Object(o.a)(Object(o.a)({},e),{},{actionFilters:Object(o.a)(Object(o.a)({},e.actionFilters),{},Object(b.a)({},t.actionType,t.value))});case"ALL_ACTION":for(var i={},s=0,l=Object.keys(t.actionTypes);s<l.length;s++){i[l[s]]=t.value}return Object(o.a)(Object(o.a)({},e),{},{actionFilters:i});case"SET_DAY_FILTER":return Object(o.a)(Object(o.a)({},e),{},{dayFilter:t.value});default:return e}},pe=n.a.createContext(),fe=function(e){var t=e.children,c=Object(a.useReducer)(be,{dayFilter:"all"}),n=Object(s.a)(c,2),r=n[0],i=n[1];return Object(u.jsx)(pe.Provider,{value:{filterData:r,filterDispatch:i},children:t})},Oe=function(e){var t=e.item,c=Object(a.useContext)(d).modalDispatch,n=t.expectedUpdate?x.a.unix(t.expectedUpdate.seconds).format("MM/DD/YY"):null;return Object(u.jsxs)("div",{className:"border-2 border-black my-2 w-full self-center grid grid-cols-12 ",children:[Object(u.jsxs)("div",{onClick:function(e){c({type:"SHOW_PROJECT_SHEET",projectID:t.projectID})},className:"hover:bg-opacity-50 mainInfo flex flex-col col-span-4 p-2 bg-black text-white",children:[Object(u.jsx)("p",{className:"text-xs",children:t.score?t.score.toFixed(2):0}),Object(u.jsx)("p",{className:"text-xl",children:t.project?t.project.name:""}),Object(u.jsx)(oe,{importance:t.project?t.project.importance:3}),Object(u.jsx)("p",{className:"text-sm",children:t.project?t.project.description:""})]}),Object(u.jsxs)("div",{onClick:function(e){c({type:"SHOW_SHEET",itemID:t.id})},className:"hover:bg-opacity-75 col-span-8 p-2 "+t.colorClass,children:[Object(u.jsx)("p",{className:"text-xl",children:t.actionTypeName}),Object(u.jsx)("p",{className:"text-sm",children:n}),Object(u.jsx)("p",{className:"text-base",children:t.action})]})]})},me=function(e){var t=e.item,c=Object(a.useContext)(d).modalDispatch,n=t.expectedUpdate?x.a.unix(t.expectedUpdate.seconds).format("MM/DD/YY"):null;return Object(u.jsxs)("div",{onClick:function(e){c({type:"SHOW_SHEET",itemID:t.id})},className:"border-2 border-black my-2 w-full self-center grid grid-cols-12 ",children:[Object(u.jsx)("div",{className:"mainInfo justify-center flex flex-col col-span-2 p-2 bg-black text-white",children:Object(u.jsx)("p",{className:"text-xl self-center",children:t.score?t.score.toFixed(2):0})}),Object(u.jsxs)("div",{className:"col-span-10 p-2 "+t.colorClass,children:[Object(u.jsx)("p",{className:"text-xl",children:t.actionTypeName}),Object(u.jsx)("p",{className:"text-sm",children:n}),Object(u.jsx)("p",{className:"text-base",children:t.action})]})]})},he=function(e){var t=e.item,c=e.showProject;return Object(u.jsx)("div",{className:"cursor-pointer",children:c?Object(u.jsx)(Oe,{item:t}):Object(u.jsx)(me,{item:t})})},xe=function(){var e=Object(a.useContext)(E).items,t=Object(a.useContext)(pe).filterData,c=e?e.sort((function(e,t){return null===e.expectedUpdate?1:null===t.expectedUpdate?-1:t.score-e.score})):null;if(t&&t.importanceFilters&&c){var n=t.importanceFilters;c=c.filter((function(e){return void 0===n[e.project.importance]||n[e.project.importance]}))}if(t&&c&&("today"===t.dayFilter?c=c.filter((function(e){return x.a.unix(e.expectedUpdate.seconds).startOf("day").isSameOrBefore(x()().startOf("day"))})):"nextThree"===t.dayFilter?c=c.filter((function(e){return x.a.unix(e.expectedUpdate.seconds).startOf("day").isSameOrBefore(x()().add(3,"days").startOf("day"))})):"overdue"===t.dayFilter&&(c=c.filter((function(e){return x.a.unix(e.expectedUpdate.seconds).startOf("day").isBefore(x()().startOf("day"))})))),t&&t.actionFilters&&c){var r=t.actionFilters;c=c.filter((function(e){return void 0===r[e.actionType]||r[e.actionType]}))}return Object(u.jsx)("div",{className:"flex flex-col w-full col-span-6 col-start-4 p-2 h-screen overflow-hidden",children:Object(u.jsx)("div",{className:"overflow-scroll h-full hideBar",children:c&&c.map((function(e){return Object(u.jsx)(he,{showProject:!0,item:e},e.id)}))})})},ve=function(){var e=Object(a.useContext)(E).weights,t=Object(a.useContext)(pe),c=t.filterData,n=t.filterDispatch,r=[];if(!e)return null;e.actionTypeArray.forEach((function(e){r.push({id:e.id,name:e.name})}));var i=function(e){n({type:"SET_ACTION_FILTER",actionType:e.target.id,value:e.target.checked})};return Object(u.jsxs)("div",{className:"mt-5",children:[Object(u.jsx)("p",{className:"text-xl font-bold",children:"Filter Action Type"}),Object(u.jsx)("div",{className:"flex flex-col",children:r.map((function(e){return Object(u.jsxs)("div",{className:"flex space-x-1",children:[Object(u.jsx)("input",{className:"self-center",id:e.id,onChange:i,checked:!c.actionFilters||void 0===c.actionFilters[e.id]||c.actionFilters[e.id],type:"checkbox"}),Object(u.jsx)("label",{className:"self-center",children:e.name})]},e.id)}))}),Object(u.jsxs)("div",{className:"flex space-x-2",children:[Object(u.jsx)("button",{className:"btn mt-2",onClick:function(t){n({type:"ALL_ACTION",value:!0,actionTypes:e.actionTypes})},children:"Select All"}),Object(u.jsx)("button",{className:"btn mt-2",onClick:function(t){n({type:"ALL_ACTION",value:!1,actionTypes:e.actionTypes})},children:"De-select All"})]})]})},ge=function(){var e=Object(a.useContext)(pe),t=e.filterData,c=e.filterDispatch,n=Object(a.useState)("all"),r=Object(s.a)(n,2),i=r[0],o=r[1];Object(a.useEffect)((function(){t&&o(t.dayFilter)}),[t]);var l=function(e){c({type:"SET_DAY_FILTER",value:e.target.value})};return Object(u.jsxs)("div",{className:"mt-5",children:[Object(u.jsx)("p",{className:"text-xl font-bold",children:"Filter Date"}),Object(u.jsx)("div",{children:[{name:"dateFilter",value:"all",label:"All"},{name:"dateFilter",value:"today",label:"Today"},{name:"dateFilter",value:"nextThree",label:"Next 3 Days"},{name:"dateFilter",value:"overdue",label:"Overdue"}].map((function(e){return Object(u.jsxs)("div",{className:"flex space-x-1",children:[Object(u.jsx)("input",{className:"self-center",onChange:l,type:"radio",name:e.name,value:e.value,id:e.value,checked:i===e.value}),Object(u.jsx)("label",{className:"self-center",children:e.label})]},e.value)}))})]})},ye=function(){var e=Object(a.useContext)(E).weights,t=Object(a.useContext)(pe),c=t.filterDispatch,n=t.filterData,r=[];if(!e)return null;e.importanceArray.forEach((function(e){r.push({id:e.id,name:e.name,weight:e.weight})})),r=r.sort((function(e,t){return t.weight-e.weight}));var i=function(e){c({type:"SET_IMPORTANCE_FILTER",importance:e.target.id,value:e.target.checked})};return Object(u.jsxs)("div",{children:[Object(u.jsx)("p",{className:"text-xl font-bold",children:"Filter Importance"}),Object(u.jsx)("div",{className:"flex flex-col",children:r.map((function(e){return Object(u.jsxs)("div",{className:"flex space-x-1",children:[Object(u.jsx)("input",{className:"self-center",id:e.id,onChange:i,checked:!n.importanceFilters||void 0===n.importanceFilters[e.id]||n.importanceFilters[e.id],type:"checkbox"}),Object(u.jsx)("label",{className:"self-center",children:e.name})]},e.id)}))}),Object(u.jsxs)("div",{className:"flex space-x-2",children:[Object(u.jsx)("button",{className:"btn mt-2",onClick:function(t){c({type:"ALL_IMPORTANCE",value:!0,importances:e.importanceTypes})},children:"Select All"}),Object(u.jsx)("button",{className:"btn mt-2",onClick:function(t){c({type:"ALL_IMPORTANCE",value:!1,importances:e.importanceTypes})},children:"De-select All"})]})]})},we=function(){var e=Object(a.useContext)(E).weights,t=Object(a.useContext)(pe).filterDispatch,c=e?e.importanceTypes:{},n=e?e.actionTypes:{};return Object(u.jsxs)("div",{className:"col-span-3 p-5 h-screen overflow-hidden",children:[Object(u.jsx)(ye,{}),Object(u.jsx)(ge,{}),Object(u.jsx)(ve,{}),Object(u.jsx)("button",{onClick:function(e){t({type:"ALL_IMPORTANCE",value:!0,importances:c}),t({type:"ALL_ACTION",value:!0,actionTypes:n}),t({type:"SET_DAY_FILTER",value:"all"})},className:"importantBtn mt-10",children:"Remove All Filters"})]})},Ne=function(){return Object(u.jsxs)("div",{className:"grid grid-cols-12",children:[Object(u.jsx)(je,{}),Object(u.jsx)(xe,{}),Object(u.jsx)(we,{})]})},Te=function(e){var t=e.value,c=e.change;return Object(u.jsxs)("div",{className:"mt-2",children:[Object(u.jsx)("p",{children:"Description"}),Object(u.jsx)(p.a,{id:"description",onChange:c,className:"focus:outline-none border-2 border-black ",value:t})]})},Ee=function(e){var t=e.value,c=e.change,n=Object(a.useContext)(E).weights,r=n?n.importanceArray:null;return r&&(r=r.sort((function(e,t){return t.weight-e.weight}))),Object(u.jsxs)("div",{className:"mt-2",children:[Object(u.jsx)("p",{children:"Importance"}),Object(u.jsx)("select",{className:"border-2 border-black",id:"importance",onChange:c,value:t,children:r&&r.map((function(e){return Object(u.jsx)("option",{value:e.id,children:e.name},e.id)}))})]})},Ce=function(e){var t=e.value,c=e.change;return Object(u.jsxs)("div",{children:[Object(u.jsx)("p",{children:"Name"}),Object(u.jsx)("input",{className:"formInput",onChange:c,id:"name",value:t})]})};var De=function(e,t,c){return c?null:e&&t?t.filter((function(t){return t.projectID===e.id})):null},Se=function(){var e=Object(a.useContext)(E),t=e.projects,c=e.items,n=Object(a.useContext)(d),r=n.modalStatus,i=n.modalDispatch,l=Object(a.useState)({name:"",description:"",importance:3}),j=Object(s.a)(l,2),p=j[0],f=j[1],O=Object(a.useState)(!1),h=Object(s.a)(O,2),x=h[0],v=h[1],g=Object(a.useState)(!0),y=Object(s.a)(g,2),w=y[0],N=y[1],T=De(p,c,w);Object(a.useEffect)((function(){r&&r.projectID&&(t?(f(t.filter((function(e){return e.id===r.projectID}))[0]),N(!1)):N(!0))}),[r,t]),Object(a.useEffect)((function(){""===p.name?v(!1):v(!0)}),[p.name]);var C=function(e){f(Object(o.a)(Object(o.a)({},p),{},Object(b.a)({},e.target.id,e.target.value)))};return Object(u.jsxs)("div",{className:"relative overflow-scroll bg-white h-5/6 w-1/2 mt-10 p-5",children:[Object(u.jsx)("div",{onClick:function(e){i({type:"HIDE_PROJECT_SHEET"})},className:"h-10 w-10 absolute top-0 right-0",children:Object(u.jsx)(L,{})}),w?Object(u.jsx)("p",{className:"text-xl font-bold",children:"New Project"}):Object(u.jsx)("p",{className:"text-xl font-bold",children:"Edit Project"}),Object(u.jsx)(Ce,{value:p.name,change:C}),Object(u.jsx)(Te,{value:p.description,change:C}),Object(u.jsx)(Ee,{value:p.importance,change:C}),w?Object(u.jsx)("div",{className:"flex space-x-2 mt-5",children:Object(u.jsx)("button",{onClick:function(e){x&&(!function(e){m.firestore().collection("users/"+_()+"/projects").add({description:e.description,importance:parseInt(e.importance),name:e.name,deleted:!1})}(p),i({type:"HIDE_PROJECT_SHEET"}))},className:x?"doneBtn":"inactiveBtn",children:"Add"})}):Object(u.jsxs)("div",{children:[Object(u.jsxs)("div",{className:"flex space-x-2 mt-5",children:[Object(u.jsx)("button",{onClick:function(e){x&&(!function(e){m.firestore().collection("users/"+_()+"/projects").doc(e.id).update({description:e.description,importance:parseInt(e.importance),name:e.name})}(p),i({type:"HIDE_PROJECT_SHEET"}))},className:x?"doneBtn":"inactiveBtn",children:"Save"}),Object(u.jsx)("button",{onClick:function(e){var t;!0===window.confirm("Are you sure you want to delete? Deleting this project will also delete all of your actions under the project.")&&(t=p.id,m.firestore().collection("users/"+_()+"/projects").doc(t).update({deleted:!0}).then((function(e){m.firestore().collection("users/"+_()+"/items").where("project","==",t).where("deleted","!=",!0).get().then((function(e){var t=m.firestore().batch();e.docs.forEach((function(e){var c=m.firestore().collection("users/"+_()+"/items").doc(e.id);t.update(c,{deleted:!0})})),t.commit()}))})),i({type:"HIDE_PROJECT_SHEET"}))},className:"importantBtn",children:"Delete"})]}),Object(u.jsx)("div",{})]}),w?null:Object(u.jsxs)("div",{children:[Object(u.jsxs)("div",{className:"flex space-x-1 mt-10",children:[Object(u.jsx)("p",{className:"text-xl font-bold self-center",children:"Actions In Project"}),Object(u.jsx)("div",{onClick:function(e){i({type:"SHOW_SHEET",itemProjectID:p.id})},className:"w-8 h-8 cursor-pointer self-center",children:Object(u.jsx)(ue,{})})]}),T&&T.map((function(e){return Object(u.jsx)(he,{showProject:!1,item:e},e.id)}))]})]})},Ie=function(){var e=Object(a.useContext)(d),t=e.modalStatus,c=e.modalDispatch;return!1===t.showProjectSheet?null:Object(u.jsx)("div",{onClick:function(e){"project-bg"===e.target.id&&c({type:"HIDE_PROJECT_SHEET"})},id:"project-bg",className:"flex justify-center w-screen h-screen bg-gray-400 bg-opacity-40 fixed inset-0",children:Object(u.jsx)(Se,{})})},ke=function(){var e=Object(a.useContext)(d),t=e.modalStatus,c=e.modalDispatch;return Object(a.useEffect)((function(){var e=function(e){"Escape"===e.code&&(t.showSheet?c({type:"HIDE_SHEET"}):t.showProjectSheet&&c({type:"HIDE_PROJECT_SHEET"}))};return document.addEventListener("keyup",e),function(){document.removeEventListener("keyup",e)}})),null};var Fe=function(){return Object(u.jsx)(C,{children:Object(u.jsx)(fe,{children:Object(u.jsx)(j,{children:Object(u.jsxs)("div",{className:"App",children:[Object(u.jsx)(Ne,{}),Object(u.jsx)(Ie,{}),Object(u.jsx)(R,{}),Object(u.jsx)(ke,{})]})})})})};i.a.render(Object(u.jsx)(n.a.StrictMode,{children:Object(u.jsx)(Fe,{})}),document.getElementById("root"))},82:function(e,t,c){}},[[182,1,2]]]);
//# sourceMappingURL=main.07625ceb.chunk.js.map