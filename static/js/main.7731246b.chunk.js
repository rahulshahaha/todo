(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{24:function(e,t,n){},30:function(e,t,n){"use strict";n.r(t);var c=n(2),a=n.n(c),i=n(16),o=n.n(i),s=(n(24),n(13));n(32),n(26),n(31);s.a.initializeApp({apiKey:"AIzaSyCSu3ggsS66Mo1OullwbFJIg9mibC9E9wY",authDomain:"todo-8303f.firebaseapp.com",projectId:"todo-8303f",storageBucket:"todo-8303f.appspot.com",messagingSenderId:"928128254937",appId:"1:928128254937:web:a3f32fafc7ca5ba6c40fc8"}),s.a.firestore();var r=s.a,u=function(){return r.auth().currentUser.uid},l=n(10),j=n(5),d=n(11),b=n.n(d),O=function(e){var t=b()(new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()));return b.a.unix(e.seconds).diff(t,"days")},f=function(e){var t=b()(new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate())),n=b.a.unix(e.expectedUpdate.seconds);return n.isBefore(t)&&5!==e.actionType&&6!==e.actionType?"bg-red-600 text-white":!n.isSame(t)||1!==e.actionType&&4!==e.actionType?!n.isSame(t)||2!==e.actionType&&3!==e.actionType?1===e.actionType||4===e.actionType?"bg-purple-300":2===e.actionType||3===e.actionType?"bg-green-100":"bg-white":"bg-gray-600 text-white":"bg-purple-700 text-white"},p=n(19),h=n(1),x=a.a.createContext(),m=function(e){var t=e.children,n=Object(c.useState)(null),a=Object(j.a)(n,2),i=a[0],o=a[1],s=Object(c.useState)(null),u=Object(j.a)(s,2),d=u[0],b=u[1],m=Object(c.useState)(null),v=Object(j.a)(m,2),g=v[0],w=v[1],y=Object(c.useState)(null),C=Object(j.a)(y,2),S=C[0],N=C[1],D=Object(p.a)(r.auth()),T=Object(j.a)(D,2),I=T[0];T[1];return Object(c.useEffect)((function(){var e=S?S.id:null,t=r.firestore().collection("items").where("userID","==",e).onSnapshot((function(e){var t=[];e.docs.forEach((function(e){t.push(function(e,t){if(t&&e){var n=t.importanceTypes.filter((function(t){return t.id===e.importance}))[0],c=t.itemTypes.filter((function(t){return t.id===e.actionType}))[0],a=O(e.expectedUpdate),i=Math.max(0,1*n.weight*c.weight-a*t.dayDrop),o=f(e);return Object(l.a)(Object(l.a)({},e),{},{importanceName:n.name,importanceWeight:n.weight,actionTypeName:c.name,actionTypeWeight:c.weight,daysTo:a,score:i,colorClass:o})}return e}(Object(l.a)(Object(l.a)({},e.data()),{},{id:e.id,score:0}),d))})),o(t)}));return function(){t()}}),[d,S]),Object(c.useEffect)((function(){S?r.firestore().collection("users").doc(S.id).get().then((function(e){b(JSON.parse(e.data().weights))})):b(null)}),[S]),Object(c.useEffect)((function(){var e=S?S.id:null,t=r.firestore().collection("oneOffs").where("done","==",!1).where("userID","==",e).onSnapshot((function(e){var t=[];e.docs.forEach((function(e){t.push(Object(l.a)(Object(l.a)({},e.data()),{},{id:e.id}))})),w(t)}));return function(){t()}}),[S]),Object(c.useEffect)((function(){N(I?{id:I.uid}:null)}),[I]),Object(h.jsx)(x.Provider,{value:{items:i,oneOffs:g,weights:d,FBuser:I,user:S},children:t})},v=function(){return null!==Object(c.useContext)(x).user&&Object(h.jsx)("button",{className:"ml-10 mt-5 mb-10 btn",onClick:function(){!function(){var e=u(),t=new Date((new Date).getFullYear()+1,(new Date).getMonth(),(new Date).getDate());r.firestore().collection("items").add({action:"",actionType:1,description:"",expectedUpdate:t,importance:1,name:"NewName",notes:"",userID:e})}()},children:"Add Item"})},g=n(12),w=function(){var e=Object(c.useContext)(x).user,t=Object(c.useState)({email:"",pass:""}),n=Object(j.a)(t,2),a=n[0],i=n[1];if(e)return Object(h.jsx)("button",{onClick:function(e){r.auth().signOut()},className:"btn",children:"Logout"});var o=function(e){i(Object(l.a)(Object(l.a)({},a),{},Object(g.a)({},e.target.id,e.target.value)))};return Object(h.jsx)("div",{children:Object(h.jsxs)("form",{onSubmit:function(e){var t,n;e.preventDefault(),t=a.email,n=a.pass,r.auth().signInWithEmailAndPassword(t,n),i({email:"",pass:""})},children:[Object(h.jsx)("input",{onChange:o,value:a.email,id:"email",className:"formInput",type:"email"}),Object(h.jsx)("input",{onChange:o,value:a.pass,id:"pass",className:"formInput",type:"password"}),Object(h.jsx)("button",{className:"btn",type:"submit",children:"Login"})]})})},y=function(){var e=Object(c.useState)(""),t=Object(j.a)(e,2),n=t[0],a=t[1];return Object(h.jsx)("form",{onSubmit:function(e){e.preventDefault(),function(e){var t=u();r.firestore().collection("oneOffs").add({name:e,done:!1,userID:t})}(n),a("")},children:Object(h.jsx)("input",{className:"formInput",value:n,onChange:function(e){a(e.target.value)}})})},C=function(e){var t=e.oneOff;return Object(h.jsxs)("div",{className:"flex",children:[Object(h.jsx)("input",{onChange:function(){var e;e=t.id,r.firestore().collection("oneOffs").doc(e).update({done:!0})},type:"checkbox"}),Object(h.jsx)("p",{children:t.name})]})},S=function(){var e=Object(c.useContext)(x).oneOffs;return Object(h.jsx)("div",{className:"w-full",children:Object(h.jsxs)("div",{className:"m-auto w-48",children:[Object(h.jsx)("h1",{className:"text-lg underline",children:"One Off Items"}),e&&e.map((function(e){return Object(h.jsx)(C,{oneOff:e},e.id)})),Object(h.jsx)(y,{})]})})},N=function(e){var t=e.item,n=t.name,a=Object(c.useState)(0),i=Object(j.a)(a,2),o=i[0],s=i[1],u=Object(c.useState)(n),l=Object(j.a)(u,2),d=l[0],b=l[1];return 1===o?Object(h.jsx)("td",{children:Object(h.jsx)("input",{className:t.colorClass,autoFocus:!0,onChange:function(e){b(e.target.value)},onBlur:function(){!function(e,t){r.firestore().collection("items").doc(t).update({name:e})}(d,t.id),s(0)},value:d})}):Object(h.jsx)("td",{onClick:function(){s(1)},children:n})},D=function(e){var t=e.item,n=t.importance;return Object(h.jsx)("td",{children:Object(h.jsxs)("select",{className:t.colorClass,onChange:function(e){!function(e,t){r.firestore().collection("items").doc(t).update({importance:parseInt(e)})}(e.target.value,t.id)},value:n,children:[Object(h.jsx)("option",{value:1,children:"High"}),Object(h.jsx)("option",{value:2,children:"Medium"}),Object(h.jsx)("option",{value:3,children:"Low"})]})})},T=function(e){var t=e.item,n=t.description,a=Object(c.useState)(0),i=Object(j.a)(a,2),o=i[0],s=i[1],u=Object(c.useState)(n),l=Object(j.a)(u,2),d=l[0],b=l[1];return 1===o?Object(h.jsx)("td",{children:Object(h.jsx)("textarea",{className:"h-full resize-y "+t.colorClass,autoFocus:!0,onChange:function(e){b(e.target.value)},onBlur:function(){var e,n;e=d,n=t.id,r.firestore().collection("items").doc(n).update({description:e}),s(0)},value:d})}):Object(h.jsx)("td",{onClick:function(){s(1)},children:n})},I=function(e){var t=e.item,n=t.notes,a=Object(c.useState)(0),i=Object(j.a)(a,2),o=i[0],s=i[1],u=Object(c.useState)(n),l=Object(j.a)(u,2),d=l[0],b=l[1];return 1===o?Object(h.jsx)("td",{children:Object(h.jsx)("input",{className:t.colorClass,autoFocus:!0,onChange:function(e){b(e.target.value)},onBlur:function(){!function(e,t){r.firestore().collection("items").doc(t).update({notes:e})}(d,t.id),s(0)},value:d})}):Object(h.jsx)("td",{onClick:function(){s(1)},children:n})},F=function(e){var t=e.item,n=t.actionType;return Object(h.jsx)("td",{children:Object(h.jsxs)("select",{className:t.colorClass,onChange:function(e){var n,c;n=e.target.value,c=t.id,r.firestore().collection("items").doc(c).update({actionType:parseInt(n)})},value:n,children:[Object(h.jsx)("option",{value:1,children:"ToDo"}),Object(h.jsx)("option",{value:2,children:"Wait for Meeting"}),Object(h.jsx)("option",{value:3,children:"Wait for Response"}),Object(h.jsx)("option",{value:4,children:"Follow-up"}),Object(h.jsx)("option",{value:5,children:"Nothing yet"}),Object(h.jsx)("option",{value:6,children:"Fully done"})]})})},k=function(e){var t=e.item,n=t.action,a=Object(c.useState)(0),i=Object(j.a)(a,2),o=i[0],s=i[1],u=Object(c.useState)(n),l=Object(j.a)(u,2),d=l[0],b=l[1];return 1===o?Object(h.jsx)("td",{children:Object(h.jsx)("input",{className:"w-full "+t.colorClass,autoFocus:!0,onChange:function(e){b(e.target.value)},onBlur:function(){!function(e,t){r.firestore().collection("items").doc(t).update({action:e})}(d,t.id),s(0)},value:d})}):Object(h.jsx)("td",{onClick:function(){s(1)},children:n})},E=function(e){var t=e.item,n=b.a.unix(t.expectedUpdate.seconds).format("L"),a=Object(c.useState)(0),i=Object(j.a)(a,2),o=i[0],s=i[1],u=Object(c.useState)(n),l=Object(j.a)(u,2),d=l[0],O=l[1];return 1===o?Object(h.jsx)("td",{children:Object(h.jsx)("input",{className:t.colorClass,autoFocus:!0,onChange:function(e){O(e.target.value)},onBlur:function(){var e=b()(d,"L");!function(e,t){r.firestore().collection("items").doc(t).update({expectedUpdate:e})}(new Date(e.year(),e.month(),e.date()),t.id),s(0)},value:d})}):Object(h.jsx)("td",{onClick:function(){s(1)},children:n})},B=function(e){var t=e.item;return Object(h.jsxs)("tr",{className:t.colorClass,children:[Object(h.jsx)("td",{children:t.score.toFixed(2)}),Object(h.jsx)(N,{item:t}),Object(h.jsx)(D,{item:t}),Object(h.jsx)(T,{item:t}),Object(h.jsx)(I,{item:t}),Object(h.jsx)(F,{item:t}),Object(h.jsx)(k,{item:t}),Object(h.jsx)(E,{item:t})]})},M=function(){var e=Object(c.useContext)(x).items,t=e?e.sort((function(e,t){return t.score-e.score})):null;return Object(h.jsx)("div",{children:Object(h.jsxs)("table",{children:[Object(h.jsx)("thead",{children:Object(h.jsxs)("tr",{children:[Object(h.jsx)("th",{children:"Score"}),Object(h.jsx)("th",{children:"Name"}),Object(h.jsx)("th",{children:"Importance"}),Object(h.jsx)("th",{children:"Description"}),Object(h.jsx)("th",{children:"Notes"}),Object(h.jsx)("th",{children:"Action Type"}),Object(h.jsx)("th",{children:"Action"}),Object(h.jsx)("th",{children:"Expected Update"})]})}),Object(h.jsx)("tbody",{children:t&&t.map((function(e){return Object(h.jsx)(B,{item:e},e.id)}))})]})})},A=function(){var e=Object(c.useContext)(x),t=e.items,n=e.oneOffs,a=0;if(t)for(var i=0;i<t.length;i++)a+=t[i].score;return n&&(a+=.5*n.length),Object(h.jsx)("div",{children:Object(h.jsx)("h1",{className:"text-center text-4xl my-5",children:a.toFixed(2)})})};var U=function(){return Object(h.jsx)(m,{children:Object(h.jsxs)("div",{className:"App",children:[Object(h.jsx)(w,{}),Object(h.jsx)(A,{}),Object(h.jsx)(S,{}),Object(h.jsx)(M,{}),Object(h.jsx)(v,{})]})})};o.a.render(Object(h.jsx)(a.a.StrictMode,{children:Object(h.jsx)(U,{})}),document.getElementById("root"))}},[[30,1,2]]]);
//# sourceMappingURL=main.7731246b.chunk.js.map