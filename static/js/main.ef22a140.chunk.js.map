{"version":3,"sources":["store/reducers/modalReducer.js","store/contexts/modalContext.js","components/modals/EditSheet/EditAction.js","store/reducers/dataReducer.js","store/contexts/dataContext.js","components/modals/EditSheet/EditActionType.js","components/modals/EditSheet/EditExpectedUpdate.js","config/fbConfig.js","store/actions.js","components/icons/BeakerIcon.js","components/modals/EditSheet/EditProject.js","components/icons/ExitIcon.js","components/modals/EditSheet/EditNotes.js","components/icons/PencilIcon.js","components/modals/EditSheet/EditLink.js","components/modals/EditSheet/EditModal.js","components/modals/EditSheet/EditSheet.js","store/contexts/fbContext.js","store/contexts/configContext.js","components/planningView/PlanningDayItem.js","components/planningView/PlanningDay.js","components/planningView/PlanningWeek.js","store/reducers/filterReducer.js","store/contexts/filterContext.js","components/PlanningView.js","chartHelper.js","store/reducers/historyReducer.js","store/contexts/historyContext.js","components/leftBar/LineChart.js","components/icons/ImportanceIcon.js","components/itemCards/ItemCardWithProject.js","components/itemCards/ItemCard.js","components/itemCards/ItemCardContainer.js","UseFilteredItems.js","components/centerColumn/CardCollection.js","components/centerColumn/CenterColumn.js","components/leftBar/OneOffs/AddOneOff.js","components/leftBar/OneOffs/OneOffItem.js","components/leftBar/OneOffs/OneOffs.js","components/leftBar/TotalScore.js","components/leftBar/ProjectListItem.js","components/icons/PlusIcon.js","components/leftBar/ProjectList.js","store/contexts/completedItemsContext.js","UseMetrics.js","components/leftBar/CompletedToday.js","components/leftBar/LeftBar.js","components/rightBar/preview/PreviewDayItem.js","components/rightBar/preview/PreviewDay.js","components/rightBar/preview/PreviewDays.js","components/rightBar/ActionTypeFilter.js","components/rightBar/DayFilter.js","components/rightBar/ImportanceFilters.js","components/rightBar/Filters.js","store/reducers/stateReducer.js","store/contexts/stateContext.js","components/rightBar/RightBar.js","components/WorkingView.js","components/Main.js","components/modals/projectEdit/EditDescription.js","components/modals/projectEdit/EditImportance.js","components/modals/projectEdit/EditName.js","components/modals/projectEdit/ProjectEditModal.js","UseCompletedItems.js","components/modals/projectEdit/ProjectEditSheet.js","components/EscDetect.js","store/contexts/itemsContext.js","store/contexts/oneOffsContext.js","store/contexts/projectsContext.js","store/contexts/weightsContext.js","store/hydrateData.js","components/DataHydrator.js","components/centerColumn/UpcomingWork.js","components/leftBar/AddItem.js","components/icons/CalendarIcon.js","components/icons/ListIcon.js","components/nav/ToggleView.js","components/icons/LogoutIcon.js","components/auth/Logout.js","components/nav/LoggedInNav.js","components/auth/Login.js","components/nav/LoggedOutNav.js","components/nav/Nav.js","App.js","index.js"],"names":["modalReducer","state","action","type","showSheet","itemID","itemProjectID","showProjectSheet","projectID","showChart","ModalContext","React","createContext","ModalProvider","children","useReducer","modalStatus","modalDispatch","Provider","value","EditAction","change","changed","changedClass","useState","editing","setEditing","click","e","bgClass","className","onFocus","target","select","onBlur","data","replace","id","autoFocus","onChange","onClick","dataReducer","items","projects","weights","totalScore","allDataPulled","history","oneOffs","allLoaded","DataContext","DataContextProvider","dataDispatch","EditActionType","reset","useContext","actionTypes","actionTypeArray","sort","a","b","weight","options","forEach","aType","push","label","name","actionType","filter","parseInt","useEffect","aTypeKey","code","document","activeElement","nodeName","length","index","i","newIndex","rotate","addEventListener","removeEventListener","placeholder","maxMenuHeight","menuIsOpen","controlShouldRenderValue","EditExpectedUpdate","expectedUpdate","seconds","moment","unix","toDate","filterDate","d","getDay","isClearable","selected","newDate","g","firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","firestore","completeItem","window","confirm","item","now","Date","collection","currentUserID","doc","update","completed","completedDate","actionTypeWeightEnd","actionTypeWeight","importanceWeightEnd","importanceWeight","dayDropEnd","dayDrop","scoreOnComplete","score","dropped","day","startOf","isSame","date","auth","currentUser","uid","BeakerIcon","xmlns","fill","viewBox","stroke","strokeLinecap","strokeLinejoin","strokeWidth","EditProject","sortedProjects","proj","project","ExitIcon","EditNotes","PencilIcon","EditLink","toggleEditing","rel","href","EditModal","blankItem","projID","notes","link","newItem","setNewItem","initialItem","setInitialItem","changedItems","setChangedItems","setChanged","isNew","setNew","changes","newChangedItems","key","newItemExpectedUpdate","initialItemExpectedUpdate","add","deleted","created","addNewItem","updateItem","deletedDate","scoreOnDelete","deleteItem","EditSheet","FbContext","FbProvider","useAuthState","FBuser","ConfigContext","ConfigProvider","docRef","useDocumentData","config","loading","configLoading","PlanningDayItem","daysItem","useDrag","collect","monitor","isDragging","drag","opacityClass","itemScore","newScore","Math","max","ref","colorClass","toFixed","actionTypeName","PlanningDay","useDrop","accept","drop","m","getItem","isOver","hovered","diff","cp","daysItems","addOnID","same","overdueItems","currentCheck","previousMonday","subtract","getPreviousMonday","isBefore","daysScore","today","weekday","format","map","overdueItem","PlanningWeek","week","days","todaysDate","isAfter","filterReducer","importanceFilters","importances","importance","newImportanceFilters","Object","keys","actionFilters","newActionFilters","dayFilter","FilterContext","FilterContextProvider","dayFilters","filtName","filterData","filterDispatch","PlanningView","importanceTypes","DndProvider","backend","HTML5Backend","d3","d3module","tip","d3tip","dateFormatter","decimalFormatter","yScaleLinear","chartData","height","yRange","maxY","minY","lines","line","point","y","min","yMinMax","scaleLinear","range","domain","xScaleTime","width","xRange","minX","maxX","x","xMinMax","scaleTime","getToolTip","attr","html","xLabel","yLabel","xTimeLabel","timeOnlyFormatter","content","direction","offset","historyReducer","updates","HistoryContext","HistoryProvider","setHistory","user","historyStatus","historyDispatch","req","XMLHttpRequest","console","log","onload","JSON","parse","response","onerror","params","open","send","stringify","historyLoading","LineChart","chartClass","useRef","margin","chartArea","current","selectAll","remove","graph","append","hoverLineGroup","style","xHoverLine","yHoverLine","xAxisGroup","yAxisGroup","xScale","yScale","pathGenerator","ttip","call","path","circs","circSize","dotSize","exit","on","show","hide","enter","pathLength","node","getTotalLength","color","xTicks","yTicks","xFormat","yFormat","xAxis","axisBottom","tickFormat","ticks","yAxis","axisLeft","interpolate","require","ImportanceIcon","importanceArray","colors","totalImportances","sortedImportances","numberOfDots","dots","dot","cx","cy","r","ItemCardWithProject","daysToText","daysTo","description","ItemCard","done","FieldValue","delete","ItemCardContainer","showProject","useFilteredItems","sortedItems","undefined","filterNumber","CardCollection","newItems","CenterColumn","AddOneOff","newOneOff","setNewOneOff","keyupOne","focus","onSubmit","preventDefault","oneOff","userID","addOneOff","OneOffItem","inputValue","setInputValue","onDoubleClick","newName","OneOffs","sortedOneOffs","TotalScore","currentUserScore","get","then","userDoc","currentScore","parseFloat","t","logHistory","ProjectListItem","PlusIcon","ProjectList","newProjects","itemsInProj","projScore","CompletedItemsContext","CompltetedItemsProvider","useCollectionData","where","idField","completedItems","completedItemsLoading","useMetrics","filteredItems","todaysScore","setTodaysScore","todaysItems","addScores","tomorrowsScore","setTomorrowsScore","tomorrowsItems","thisWeeksScore","setThisWeeksScore","thisWeeksItems","getNextMonday","completedScore","setCompletedScore","createdScore","setCreatedScore","filteredScore","setFilteredScore","itemsToAdd","nextMonday","CompletedToday","formattedCompletedScore","formattedCreatedScore","LeftBar","showConfig","PreviewDay","simple","PreviewDayItem","PreviewDays","thisDay","ActionTypeFilter","filters","onCheck","checked","filt","DayFilter","setValue","filterTypes","ImportanceFilters","Filters","stateReducer","workingView","showFilters","StateContext","StateProvider","stateStatus","stateDispatch","RightBar","WorkingView","Main","downForMaintenance","exact","component","to","EditDescription","EditImportance","EditName","ProjectEditModal","newProject","setNewProject","doneItems","setItems","slice","useCompletedItems","addProject","updateProject","itemSnap","batch","docs","itemDoc","itemRef","commit","ProjectEditSheet","EscDetect","useHistory","loc","useLocation","keyEvent","keyDownEvent","pathname","ItemsContext","ItemsProvider","itemsLoading","OneOffsContext","OneOffsProvider","oneOffsLoading","ProjectsContext","ProjectsProvider","projectsLoading","WeightsContext","WeightsProvider","userData","weightsLoading","hydrateData","newWeights","hydrateWeights","hydrateItems","hydrateProjects","itemsInProject","hydrateItem","itemDeleted","iType","weekDaysBetween","itemColorClass","importanceName","timestamp","end","start","multiplier","dailyInfo","totalDays","DataHydrator","UpcomingWork","weekDays","setWeekDays","isPlanning","toString","todayColorClass","tomorrowColorClass","weekColorClass","AddItem","disabled","CalendarIcon","ListIcon","ToggleView","LogoutIcon","Logout","signOut","LoggedInNav","Login","email","pass","creds","setCreds","handleChange","signInWithEmailAndPassword","LoggedOutNav","Nav","App","basename","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.ef22a140.chunk.js","sourcesContent":["\nexport const modalReducer = (state, action) => {\n  switch(action.type){\n    case 'SHOW_SHEET':\n      return {\n        ...state,\n        showSheet: true,\n        itemID: action.itemID,\n        itemProjectID: action.itemProjectID\n      }\n    case 'SHOW_PROJECT_SHEET':\n      return {\n        ...state,\n        showProjectSheet: true,\n        projectID: action.projectID\n      }\n    case 'HIDE_SHEET':\n      return{\n        ...state,\n        showSheet: false,\n        itemID: null,\n        itemProjectID: null\n      }\n    case 'HIDE_PROJECT_SHEET':\n      return{\n        ...state,\n        showProjectSheet: false,\n        projectID: null\n      }\n    case 'TOGGLE_CHART':\n      return{\n        ...state,\n        showChart: !state.showChart\n      }\n    default: \n      return state\n  }\n}","import React, { useReducer } from \"react\";\nimport { modalReducer } from '../reducers/modalReducer'\n\nexport const ModalContext = React.createContext();\n\n\nexport const ModalProvider = ({ children }) => {\n\n  const [modalStatus, modalDispatch] = useReducer(modalReducer, {\n    showSheet: false,\n    showProjectSheet: false,\n    itemID: null,\n    showChart: false\n  });\n\n\n\n\n  return (\n    <ModalContext.Provider value={{ modalStatus, modalDispatch }}>{children}</ModalContext.Provider>\n  );\n};\n\n","import React, { useState } from 'react'\nimport TextareaAutosize from 'react-textarea-autosize';\n\n\nconst EditAction = ({value, change, changed, changedClass}) => {\n  const [editing, setEditing] = useState(false)\n\n  const click = (e) => {\n    setEditing(!editing)\n  }\n\n  const blur = (e) => {\n    setEditing(!editing)\n    const data = {\n      target: {\n        value: e.target.value.replace(/^\\s+|\\s+$/g, ''),\n        id: 'action'\n      }\n    }\n    change(data)\n  }\n\n  const focus = (e) => {\n    e.target.select()\n  }\n\n  const editAction = (e) => {\n    change(e)\n  }\n\n  const bgClass = changed ? changedClass : ''\n\n  return ( \n    <div className={\"mt-2 \"}>\n      { editing ? \n        <TextareaAutosize onFocus={focus} onBlur={blur} autoFocus id='action' onChange={editAction} className={'focus:outline-none border-2 border-black text-xl font-bold w-11/12 max-w-11/12 '} value={value}></TextareaAutosize>\n        :\n        value === \"\" ? \n        <p className=\"italic text-gray-500 cursor-pointer underline inline-block\" onClick={click}>{\"Add Action\"}</p>\n        :\n        <p className={\"cursor-pointer hover:underline inline-block text-xl font-bold max-w-11/12 \" + bgClass} onClick={click}>{value}</p>\n      }\n    </div>\n   );\n}\n \nexport default EditAction;","\nexport const dataReducer = (state, action) => {\n  switch(action.type){\n    case 'SET_DATA':\n      return{\n        ...state,\n        items: action.data.items,\n        projects: action.data.projects,\n        weights: action.data.weights,\n        totalScore: action.data.totalScore,\n        allDataPulled: action.data.allDataPulled\n      }\n    case 'SET_HISTORY':\n      return{\n        ...state,\n        history: action.history\n      }\n    case 'SET_ONE_OFFS':\n      return{\n        ...state,\n        oneOffs: action.oneOffs\n      }\n    case 'SET_ALL_LOADED':\n      return{\n        ...state,\n        allLoaded: action.allLoaded\n      }\n    default: \n      return state\n  }\n}","import React, { useReducer } from \"react\";\nimport { dataReducer } from '../reducers/dataReducer'\n\n\nexport const DataContext = React.createContext();\n\n\nexport const DataContextProvider = ({ children }) => {\n\n\n  const [data, dataDispatch] = useReducer(dataReducer, {\n    projects: null,\n    items: null,\n    weights: null,\n    oneOffs: null,\n    history: null,\n    totalScore: 0,\n    allLoaded: false\n  });\n\n\n  return (\n    <DataContext.Provider value={{ projects: data.projects, items: data.items, weights: data.weights, oneOffs: data.oneOffs, history: data.history, totalScore: data.totalScore, allLoaded: data.allLoaded, dataDispatch }}>{children}</DataContext.Provider>\n  );\n};\n\n","import React, { useContext, useState, useEffect } from 'react';\nimport { DataContext } from '../../../store/contexts/dataContext';\nimport Select from 'react-select'\n\nconst EditActionType = ({value, change, changed, changedClass, reset}) => {\n\n  const { weights } = useContext(DataContext)\n  const [editing, setEditing] = useState(false)\n\n\n  var actionTypes = weights ? weights.actionTypeArray : null\n  if(actionTypes){\n    actionTypes = actionTypes.sort((a,b) => {\n      return b.weight - a.weight\n    })\n  }\n\n  const options = []\n  actionTypes.forEach(aType => {\n    options.push({\n      value: aType.id,\n      label: aType.name\n    })\n  })\n\n  const actionType = actionTypes ? actionTypes.filter(aType => {\n    return aType.id === parseInt(value)\n  })[0] : null;\n\n\n  const click = (e) => {\n    setEditing(!editing)\n  }\n\n  const changeType = (e) => {\n    const data = {\n      target: {\n        id: 'actionType',\n        value: e.value\n      }\n    }\n    change(data)\n    setEditing(false)\n  }\n\n  const rotate = () => {\n    const length = options.length\n    var index = 0;\n    for(var i = 0; i < length; i++){\n      if(options[i].value === value){\n        index = i;\n      }\n    }\n    const newIndex = index === options.length - 1 ? 0 : index + 1 \n    const data = {\n      target: {\n        id: 'actionType',\n        value: options[newIndex].value\n      }\n    }\n    change(data)\n  }\n\n\n  useEffect(() => {\n\n    const aTypeKey = (e) => {\n      if(e.code === \"Comma\" && document.activeElement.nodeName !== 'TEXTAREA' && document.activeElement.nodeName !== \"INPUT\"){\n        rotate()\n      }\n    }\n\n    document.addEventListener(\"keyup\", aTypeKey);\n\n    return(() => {\n      document.removeEventListener(\"keyup\", aTypeKey);\n    })\n  })\n\n  const bgClass = changed ? changedClass : ''\n\n  return ( \n    <div className=\"\">\n      { editing ? \n        <Select className=\"w-1/2\" options={options} id='actionType' onBlur={click} onClick={click} placeholder={actionType.name} onChange={changeType} autoFocus={true} maxMenuHeight={200} menuIsOpen={true} controlShouldRenderValue={true} />\n        :\n        <p className={\"text-md inline-block cursor-pointer hover:underline \" + bgClass} onClick={click} >{actionType ? actionType.name : \"\"}</p>\n      }\n    </div>\n   );\n}\n \nexport default EditActionType;","import React from 'react'\nimport moment from 'moment'\nimport DatePicker from \"react-datepicker\";\nimport \"react-datepicker/dist/react-datepicker.css\";\n\n\nconst EditExpectedUpdate = ({value, change, changed, changedClass}) => {\n\n  const expectedUpdate = value && value.seconds ? moment.unix(value.seconds).toDate() : value ? value : null\n\n  const dateChange = (newDate,g) => {\n    var dateToSend = newDate\n    if(dateToSend !== null){\n      change(dateToSend)\n    }\n  }\n\n  const focus = (e) => {\n    e.target.select()\n  }\n\n  const filterDate = (d) => {\n    if(d.getDay() === 0 || d.getDay() === 6){\n      return false\n    }\n    return true\n  }\n\n  const bgClass = changed ? changedClass : ''\n\n  return ( \n    <div className=\" flex space-x-2\">\n      {/* <p className=\"font-bold text-md\">Due:</p> */}\n      <DatePicker id='expectedUpdate' filterDate={filterDate} isClearable={false} className={'cursor-pointer hover:underline ' + bgClass} selected={expectedUpdate} onFocus={focus} onChange={dateChange} />\n    </div>\n   );\n}\n \nexport default EditExpectedUpdate;","import firebase from 'firebase/app';\nimport 'firebase/firestore';\nimport 'firebase/auth';\nimport 'firebase/analytics'\n\n// Replace this with your own config details\nvar config = {\n  apiKey: \"AIzaSyCSu3ggsS66Mo1OullwbFJIg9mibC9E9wY\",\n  authDomain: \"todo-8303f.firebaseapp.com\",\n  projectId: \"todo-8303f\",\n  storageBucket: \"todo-8303f.appspot.com\",\n  messagingSenderId: \"928128254937\",\n  appId: \"1:928128254937:web:a3f32fafc7ca5ba6c40fc8\"\n};\n\nfirebase.initializeApp(config);\nfirebase.firestore()\n\nexport default firebase ","import firebase from '../config/fbConfig'\nimport moment from 'moment'\n\n\n\nexport const completeOneOff = (id) => {\n  firebase.firestore().collection('users/' + currentUserID() + '/oneOffs').doc(id).update({\n    done: true\n  })\n}\n\nexport const addOneOff = (oneOff) => {\n  const userID = currentUserID()\n  const now = new Date()\n  firebase.firestore().collection('users/' + currentUserID() + '/oneOffs').add({\n    name: oneOff,\n    done: false,\n    userID,\n    created: now\n  })\n}\n\nexport const updateOneOff = (newName, id) => {\n  firebase.firestore().collection('users/' + currentUserID() + '/oneOffs').doc(id).update({\n    name: newName\n  })\n}\n\nexport const login = (email, pass) => {\n  firebase.auth().signInWithEmailAndPassword(\n    email,\n    pass\n  )\n}\n\nexport const logout = () => {\n  firebase.auth().signOut()\n}\n\n\nexport const addNewItem = (newItem) => {\n  const now = new Date()\n  firebase.firestore().collection('users/' + currentUserID() + '/items').add({\n    action: newItem.action,\n    actionType: parseInt(newItem.actionType),\n    expectedUpdate: newItem.expectedUpdate,\n    deleted: false,\n    completed: false,\n    projectID: newItem.projectID,\n    created: now,\n    notes: newItem.notes,\n    link: newItem.link\n  })\n}\n\nexport const deleteItem = (itemID, items, weights) => {\n  const item = items.filter(i => {\n    return i.id === itemID\n  })[0]\n  const now = new Date()\n  firebase.firestore().collection('users/' + currentUserID() + '/items').doc(itemID).update({\n    deleted: true,\n    deletedDate: now,\n    actionTypeWeightEnd: item.actionTypeWeight,\n    importanceWeightEnd: item.importanceWeight,\n    dayDropEnd: item.dayDrop,\n    scoreOnDelete: item.score\n  })\n}\n\nexport const completeItem = (itemID, items, weights) => {\n  if(window.confirm('Are you sure you want to complete?') === true){\n    const item = items.filter(i => {\n      return i.id === itemID\n    })[0]\n    const now = new Date()\n    firebase.firestore().collection('users/' + currentUserID() + '/items').doc(itemID).update({\n      completed: true,\n      completedDate: now,\n      actionTypeWeightEnd: item.actionTypeWeight,\n      importanceWeightEnd: item.importanceWeight,\n      dayDropEnd: item.dayDrop,\n      scoreOnComplete: item.score\n    })\n  }\n}\n\nexport const unCompleteItem = (itemID) => {\n  if(window.confirm('Are you sure you want to un-complete?') === true){\n    firebase.firestore().collection('users/' + currentUserID() + '/items').doc(itemID).update({\n      completed: false,\n      completedDate: firebase.firestore.FieldValue.delete(),\n      actionTypeWeightEnd: firebase.firestore.FieldValue.delete(),\n      importanceWeightEnd: firebase.firestore.FieldValue.delete(),\n      dayDropEnd: firebase.firestore.FieldValue.delete(),\n      scoreOnComplete: firebase.firestore.FieldValue.delete()\n    })\n  }\n}\n\nexport const updateImportanceTypes = (newITypes, oldITypes) => {\n  const keys = Object.keys(newITypes)\n  for (const key of keys) {\n    if(!isNaN(parseFloat(newITypes[key].weight))){\n      oldITypes[key] = {\n        ...newITypes[key],\n        weight: parseFloat(newITypes[key].weight)\n      }\n    }\n  }\n  firebase.firestore().collection('users').doc(currentUserID()).get().then(userDoc => {\n    firebase.firestore().collection('users').doc(currentUserID()).update({\n      importanceTypes: oldITypes\n    })\n  })\n}\n\nexport const updateActionTypes = (newATypes, oldATypes) => {\n  const keys = Object.keys(newATypes)\n  for (const key of keys) {\n    if(!isNaN(parseFloat(newATypes[key].weight))){\n      oldATypes[key] = {\n        ...newATypes[key],\n        weight: parseFloat(newATypes[key].weight)\n      }\n    }\n  }\n  firebase.firestore().collection('users').doc(currentUserID()).get().then(userDoc => {\n    firebase.firestore().collection('users').doc(currentUserID()).update({\n      actionTypes: oldATypes\n    })\n  })\n}\n\nexport const logHistory = (newScore, historyDispatch) => {\n  const now = new Date()\n  firebase.firestore().collection('users').doc(currentUserID()).get().then(userDoc => {\n    if(userDoc.data().currentScore.toFixed(2) !== newScore.toFixed(2)){\n      console.log('log history. current:', userDoc.data().currentScore, 'new', newScore)\n      firebase.firestore().collection('users').doc(currentUserID()).update({\n        currentScore: parseFloat(newScore.toFixed(2))\n      }).then(t => {\n        firebase.firestore().collection('users/' + currentUserID() + '/history').add({\n          date: now,\n          score: parseFloat(newScore.toFixed(2))\n        }).then(t => {\n          historyDispatch({type:'LOG'})\n        })\n      })\n    }\n  })\n\n}\n\nexport const updateItem = (newItem) => {\n  firebase.firestore().collection('users/' + currentUserID() + '/items').doc(newItem.id).update({\n    action: newItem.action,\n    actionType: parseInt(newItem.actionType),\n    expectedUpdate: newItem.expectedUpdate,\n    projectID: newItem.projectID,\n    notes: newItem.notes,\n    link: newItem.link\n  })\n}\n\nexport const addImportance = (importanceTypes) => {\n  const keys = Object.keys(importanceTypes)\n  const newID = keys.length + 1;\n  const newKey = \"importanceTypes.\" + newID\n  firebase.firestore().collection('users').doc(currentUserID()).update({\n    [newKey]: {id: newID, name: \"New\", weight: 0}\n  })\n}\n\nexport const addActionType = (actionTypes) => {\n  const keys = Object.keys(actionTypes)\n  const newID = keys.length + 1;\n  const newKey = \"actionTypes.\" + newID\n  firebase.firestore().collection('users').doc(currentUserID()).update({\n    [newKey]: {id: newID, name: \"New\", weight: 0}\n  })\n}\n\nexport const updateProject = (newProject) => {\n  firebase.firestore().collection('users/' + currentUserID() + '/projects').doc(newProject.id).update({\n    description: newProject.description,\n    importance: parseInt(newProject.importance),\n    name: newProject.name\n  })\n}\n\nexport const addProject = (newProject) => {\n  firebase.firestore().collection('users/' + currentUserID() + '/projects').add({\n    description: newProject.description,\n    importance: parseInt(newProject.importance),\n    name: newProject.name,\n    deleted: false\n  })\n}\n\nexport const deleteProject = (projectID) => {\n  const projectRef = firebase.firestore().collection('users/' + currentUserID() + '/projects').doc(projectID)\n  projectRef.update({\n    deleted: true\n  }).then(t => {\n    firebase.firestore().collection('users/' + currentUserID() + '/items').where('project','==',projectID).where('deleted','!=',true).get().then(itemSnap => {\n\n      var batch = firebase.firestore().batch();\n\n      itemSnap.docs.forEach(itemDoc => {\n        var itemRef = firebase.firestore().collection('users/' + currentUserID() + '/items').doc(itemDoc.id)\n        batch.update(itemRef, {\"deleted\": true});\n      })\n\n      // Commit the batch\n      batch.commit()\n    })\n  })\n}\n\nexport const dropped = (item,day) => {\n  if(moment.unix(item.expectedUpdate.seconds).startOf('days').isSame(moment(day.date).startOf('days'))){\n    return\n  }else{\n    const newDate = moment(day.date).startOf('days').toDate()\n    firebase.firestore().collection('users/' + currentUserID() + '/items').doc(item.id).update({\n      expectedUpdate: newDate,\n    })\n  }\n}\n\nconst currentUserID = () => {\n  return firebase.auth().currentUser.uid\n}","import React from 'react'\n\n\nconst BeakerIcon = () => {\n  return ( \n    <div className=\" flex flex-col justify-center\">\n      <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-4 w-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z\" />\n      </svg>\n    </div>\n   );\n}\n \nexport default BeakerIcon;","import React, { useContext, useState } from 'react'\nimport { DataContext } from '../../../store/contexts/dataContext'\nimport Select from 'react-select'\nimport { ModalContext } from '../../../store/contexts/modalContext'\nimport BeakerIcon from '../../icons/BeakerIcon'\n\nconst EditProject = ({value, change, changed, changedClass}) => {\n\n  const { projects } = useContext(DataContext)\n  const [editing, setEditing] = useState(false)\n  const { modalDispatch } = useContext(ModalContext)\n\n  var sortedProjects = []\n  if(projects){\n    sortedProjects  = projects.sort((a,b) => {\n      return b.totalScore - a.totalScore\n    })\n  }\n\n  const options = []\n  sortedProjects.forEach(proj => {\n    options.push({\n      value: proj.id,\n      label: proj.name\n    })\n  })\n\n  const project = projects ? projects.filter(proj => {\n    return proj.id === value\n  })[0] : null\n\n\n  const click = (e) => {\n    setEditing(!editing)\n  }\n\n  const blur = (e) => {\n    // if(e.target.value === '') return\n    setEditing(!editing)\n  }\n\n\n  const changeValue = (e) => {\n    const data = {\n      target: {\n        id: 'projectID',\n        value: e.value\n      }\n    }\n    change(data)\n    setEditing(false)\n  }\n\n  const viewProject = (e) => {\n    modalDispatch({type:'HIDE_SHEET'})\n    modalDispatch({type:'SHOW_PROJECT_SHEET', projectID: project.id})\n  }\n\n  const bgClass = changed ? changedClass : ''\n\n  return ( \n    <div>\n      <div className=\"pr-5 mt-5\">\n        { editing ? \n          <Select className=\"w-3/4\" options={options} id='projectID' onBlur={blur} onClick={click} placeholder={project ? project.name : 'Select Project'} onChange={changeValue} autoFocus={true} maxMenuHeight={200} menuIsOpen={true} controlShouldRenderValue={true} />\n          :\n          <div>\n            <div className=\"flex space-x-1\">\n              <BeakerIcon />\n              <p className={\"text-lg hover:underline cursor-pointer inline-block \" + bgClass} onClick={click}>{project ? project.name : 'Select Project'}</p>\n            </div>\n            <div></div>\n            <p className=\"text-sm text-gray-400 cursor-pointer inline-block\" onClick={viewProject}>View Project</p>\n          </div>\n        }\n      </div>\n    </div>\n   );\n}\n \nexport default EditProject;","import React from 'react'\n\n\nconst ExitIcon = () => {\n  return ( \n    <svg className=\"cursor-pointer\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M6 18L18 6M6 6l12 12\" />\n    </svg>\n   );\n}\n \nexport default ExitIcon;","import React, { useState } from 'react'\nimport TextareaAutosize from 'react-textarea-autosize';\n\n\nconst EditNotes = ({value, change, changed, changedClass}) => {\n  const [editing, setEditing] = useState(false)\n\n  const click = (e) => {\n    setEditing(!editing)\n  }\n\n  const focus = (e) => {\n    e.target.select()\n  }\n\n  const bgClass = changed ? changedClass : ''\n\n  return ( \n    <div className=\"mt-5\">\n      <p className=\"text-md font-bold\">Notes</p>\n      { editing ?\n        <TextareaAutosize id='notes' autoFocus onBlur={click} onFocus={focus} onChange={change} className={'focus:outline-none border-2 border-black '} value={value}></TextareaAutosize>\n        :\n        value === \"\" ? \n        <p className={\"italic text-gray-500 cursor-pointer underline inline-block \" + bgClass} onClick={click}>{\"Add Note\"}</p>\n        :\n        <p className={\"cursor-pointer hover:underline inline-block \" + bgClass} onClick={click}>{value}</p>\n      }\n    </div>\n   );\n}\n \nexport default EditNotes;","import React from 'react';\n\nconst PencilIcon = () => {\n  return (\n    <div>\n      <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z\" />\n      </svg>\n    </div>\n   );\n}\n \nexport default PencilIcon;","import React, { useState } from 'react'\nimport PencilIcon from '../../icons/PencilIcon'\n\n\n\nconst EditLink = ({value, change, changed, changedClass}) => {\n\n  const [editing, setEditing] = useState(false)\n\n  const toggleEditing = (e) => {\n    setEditing(!editing)\n  }\n\n  const focus = (e) => {\n    e.target.select()\n  }\n\n  const bgClass = changed ? changedClass : ''\n\n  if(value === \"\" && !editing){\n    return(\n      <div className=\"mt-2\">\n        <p className={\"italic text-gray-500 cursor-pointer underline inline-block \" + bgClass} onClick={toggleEditing}>{\"Add Link\"}</p>\n      </div>\n    )\n  }\n\n  if(editing){\n    return(\n      <div className=\"\">\n        <input placeholder=\"Enter URL\" id='link' autoFocus onFocus={focus} onBlur={toggleEditing} onChange={change} value={value} />\n      </div>\n    )\n  }\n\n  return ( \n    <div className=\"mt-2\">\n      <div className=\"flex space-x-1\">\n        <a target=\"_blank\" rel=\"noreferrer\" href={value} className={\"text-blue-500 underline text-md font-bold \" + bgClass}>Link</a>\n        <div onClick={toggleEditing} className=\"w-4 h-4 cursor-pointer self-center\">\n          <PencilIcon />\n        </div>\n      </div>\n    </div>\n   );\n}\n \nexport default EditLink;","import React, { useState, useContext, useEffect } from 'react'\nimport EditAction from './EditAction';\nimport EditActionType from './EditActionType';\nimport EditExpectedUpdate from './EditExpectedUpdate';\nimport { updateItem, deleteItem, addNewItem, completeItem } from '../../../store/actions';\nimport EditProject from './EditProject';\nimport ExitIcon from '../../icons/ExitIcon';\nimport { ModalContext } from '../../../store/contexts/modalContext';\nimport { DataContext } from '../../../store/contexts/dataContext';\nimport EditNotes from './EditNotes';\nimport EditLink from './EditLink';\nimport moment from 'moment'\n\n\nconst EditModal = () => {\n\n  const { items, weights } = useContext(DataContext)\n  const { modalStatus, modalDispatch } = useContext(ModalContext)\n\n  const blankItem = (projID) => {\n    const projectID = projID ? projID : ''\n    return {\n      action: '',\n      actionType: 1,\n      expectedUpdate: moment().startOf('day').toDate(),\n      projectID,\n      notes: '',\n      link: ''\n    }\n  }\n\n  const [newItem, setNewItem] = useState(blankItem())\n  const [initialItem, setInitialItem] = useState(blankItem())\n  const [changedItems, setChangedItems] = useState({\n    action: false,\n    actionType: false,\n    expectedUpdate: false,\n    projectID: false,\n    notes: false,\n    link: false\n  })\n  const [changed, setChanged] = useState(false)\n  const [isNew, setNew] = useState(true)\n  const changedClass = isNew ? '' : 'bg-gray-300'\n\n\n  useEffect(() => {\n    if(modalStatus && modalStatus.itemID){\n      if(items){\n        setNewItem(items.filter(item => {return item.id === modalStatus.itemID})[0])\n        setInitialItem(items.filter(item => {return item.id === modalStatus.itemID})[0])\n        setNew(false)\n      }else{\n        setNew(true)\n      }\n    }\n    if(modalStatus.itemProjectID){\n      setNewItem(blankItem(modalStatus.itemProjectID))\n    }\n  }, [modalStatus, items])\n\n\n  //count changes\n  useEffect(() => {\n    var changes = 0\n    const valuesToCheck = ['action','actionType','projectID','notes','link']\n    const newChangedItems = {\n      action: false,\n      actionType: false,\n      expectedUpdate: false,\n      projectID: false,\n      notes: false,\n      link: false\n    }\n\n    valuesToCheck.forEach(key => {\n      if(newItem[key] !== initialItem[key]){\n        changes++\n        newChangedItems[key] = true\n      }\n    })\n    const newItemExpectedUpdate = newItem.expectedUpdate.seconds ? moment.unix(newItem.expectedUpdate.seconds).startOf('day') : moment(newItem.expectedUpdate).startOf('day')\n\n    const initialItemExpectedUpdate = initialItem.expectedUpdate.seconds ? moment.unix(initialItem.expectedUpdate.seconds).startOf('day') : moment(initialItem.expectedUpdate).startOf('day')\n\n    if(!newItemExpectedUpdate.isSame(initialItemExpectedUpdate)){\n      changes++\n      newChangedItems.expectedUpdate = true\n    }\n\n    if(changes > 0){\n      setChanged(true)\n    }else{\n      setChanged(false)\n    }\n\n    setChangedItems(newChangedItems)\n\n  },[newItem, initialItem])\n\n  \n  const change = (e) => {\n    setNewItem({\n      ...newItem,\n      [e.target.id]: e.target.value\n    })\n  }\n\n  const dateChange = (newDate) => {\n    setNewItem({\n      ...newItem,\n      expectedUpdate: newDate\n    })\n  }\n\n  const exitClick = (e) => {\n    modalDispatch({type:'HIDE_SHEET'})\n  }\n\n  const deleteClicked = (e) => {\n    if(window.confirm('Are you sure you want to delete?') === true){\n      deleteItem(newItem.id, items, weights)\n      modalDispatch({type:'HIDE_SHEET'})\n    }\n  }\n\n\n  const doneClick = (e) => {\n    if(!changed) return;\n    updateItem(newItem)\n    modalDispatch({type:'HIDE_SHEET'})\n  }\n\n  const addClick = (e) => {\n    if(!changed || newItem.projectID === \"\" || newItem.action === \"\") return;\n    addNewItem(newItem)\n    modalDispatch({type:'HIDE_SHEET'})\n  }\n\n  const completeClick = (e) => {\n      completeItem(newItem.id, items, weights)\n      modalDispatch({type:'HIDE_SHEET'})\n  }\n\n\n  return ( \n      <div id=\"modal\" className=\"relative overflow-scroll bg-white h-2/4 mt-10 p-5 w-1/3\">\n        <div onClick={exitClick} className=\"h-10 w-10 absolute top-0 right-0\">\n          <ExitIcon />\n        </div>\n        <EditActionType changed={changedItems.actionType} changedClass={changedClass} value={newItem.actionType} change={change} />\n        <EditAction changed={changedItems.action} changedClass={changedClass} value={newItem.action} change={change} />\n        <EditExpectedUpdate changed={changedItems.expectedUpdate} changedClass={changedClass} value={newItem.expectedUpdate} change={dateChange} />\n        <EditProject changed={changedItems.projectID} changedClass={changedClass} value={newItem.projectID} change={change} />\n        <EditNotes changed={changedItems.notes} changedClass={changedClass} value={newItem.notes} change={change} />\n        <EditLink changed={changedItems.link} changedClass={changedClass} value={newItem.link} change={change} />\n        {\n          isNew ? (\n            <div className=\"flex space-x-2 mt-5\">\n              <button onClick={addClick} className={changed && newItem.projectID !== \"\" && newItem.action !== \"\" ? \"doneBtn\" : \"inactiveBtn\"}>Add</button>\n            </div>\n          ) : (\n            <div>\n              <div className=\"flex space-x-2 mt-5\">\n                <button onClick={doneClick} className={changed && newItem.projectID !== \"\" && newItem.action !== \"\" ? \"doneBtn\" : \"inactiveBtn\"}>Save</button>\n                <button onClick={completeClick} className=\"completeBtn\">Complete Task</button>\n                <button onClick={deleteClicked} className=\"importantBtn\">Delete Task</button>\n              </div>\n              <div>\n              </div>\n            </div>\n          )\n        }\n      </div>\n   );\n}\n \nexport default EditModal;","import React, { useContext } from 'react'\nimport { ModalContext } from '../../../store/contexts/modalContext';\nimport EditModal from './EditModal';\n\n\n\n\nconst EditSheet = () => {\n\n  const { modalStatus, modalDispatch } = useContext(ModalContext)\n\n  const onClick = (e) => {\n    if(e.target.id === \"edit-bg\"){\n      modalDispatch({type:'HIDE_SHEET'})\n    }\n  }\n\n\n  if(modalStatus.showSheet === false){\n    return null\n  }\n\n  return ( \n    <div onClick={onClick} id=\"edit-bg\" className='flex justify-center w-screen h-screen bg-gray-400 bg-opacity-50 fixed inset-0'>\n      <EditModal />\n    </div>\n   );\n}\n \nexport default EditSheet;","import React from \"react\";\nimport firebase from '../../config/fbConfig'\nimport { useAuthState } from 'react-firebase-hooks/auth';\n\n\nexport const FbContext = React.createContext();\n\n\nexport const FbProvider = ({ children }) => {\n\n  const [FBuser] = useAuthState(firebase.auth());\n\n\n  return (\n    <FbContext.Provider value={{ FBuser }}>{children}</FbContext.Provider>\n  );\n};\n\n","import React from \"react\";\nimport { useDocumentData } from 'react-firebase-hooks/firestore';\nimport firebase from '../../config/fbConfig'\n\n\nexport const ConfigContext = React.createContext();\n\n\nexport const ConfigProvider = ({ children }) => {\n\n  const docRef = firebase.firestore().collection('config').doc('2TttT72yuM5PAvGMjgJT')\n\n  const [config, loading] = useDocumentData(docRef);\n\n\n  return (\n    <ConfigContext.Provider value={{ config, configLoading: loading }}>{children}</ConfigContext.Provider>\n  );\n};\n\n","import React, { useContext } from 'react'\nimport { ModalContext } from '../../store/contexts/modalContext'\nimport { useDrag } from 'react-dnd'\n\n\nconst PlanningDayItem = ({daysItem}) => {\n\n  const [{isDragging}, drag] = useDrag(() => ({\n    type: 'ITEM',\n    item: {...daysItem},\n    collect: monitor => ({\n      isDragging: !!monitor.isDragging(),\n    })\n  }))\n\n  const { modalDispatch } = useContext(ModalContext)\n\n  const opacityClass = isDragging ? 'opacity-50' : 'opacity-100'\n\n  const itemClick = (e) => {\n    modalDispatch({type: 'SHOW_SHEET', itemID: daysItem.id})\n  }\n\n  const itemScore = daysItem.newScore ? Math.max(daysItem.newScore + daysItem.score,0) : daysItem.score\n\n  return ( \n    <div ref={drag} onClick={itemClick} className={\"cursor-pointer my-1 overflow-hidden \" + daysItem.colorClass + \" \" + opacityClass} key={daysItem.id}>\n      <p className=\"\">({itemScore.toFixed(2)}) {daysItem.action}</p>\n      <p className=\"text-xs\">{daysItem.actionTypeName} - {daysItem.project.name}</p>\n    </div>\n   );\n}\n \nexport default PlanningDayItem;","import React, { useContext } from 'react'\nimport { DataContext } from '../../store/contexts/dataContext';\nimport moment from 'moment'\nimport PlanningDayItem from './PlanningDayItem';\nimport { useDrop } from 'react-dnd'\nimport { dropped } from '../../store/actions'\n\nconst PlanningDay = ({day}) => {\n\n\n  const [cp, drop] = useDrop(\n    () => ({\n      accept: 'ITEM',\n      drop: (i,m) => {\n        dropped(m.getItem(),day)\n      },\n      collect: (monitor) => {\n        const item = monitor.getItem();\n        if(!item || monitor.isOver() === false){\n          return {\n            hovered: false,\n            item: null\n          }\n        }\n\n        if(!moment.unix(item.expectedUpdate.seconds).startOf('days').isSame(day.date.startOf('days'))){\n          const diff = moment.unix(item.expectedUpdate.seconds).startOf('days').diff(day.date.startOf('days'))\n          item.newScore = (item.dayDrop * (diff/1000/60/60/24))\n          \n        }else{\n          item.newScore = 0\n        }\n        \n        return {\n          hovered: monitor.isOver(),\n          item\n        }\n      }\n    }),\n    [day]\n  )\n\n  const { items } = useContext(DataContext)\n\n  const getPreviousMonday = () => {\n    const currentCheck = moment().startOf('day')\n    var previousMonday = null;\n    while (previousMonday === null){\n      if(currentCheck.day() === 1){\n        previousMonday = currentCheck\n      }else{\n        currentCheck.subtract(1,'d')\n      }\n    }\n    return previousMonday;\n  }\n\n\n  const daysItems = items ? items.filter(item => {\n    return moment.unix(item.expectedUpdate.seconds).startOf('days').isSame(day.date.startOf('day'))\n  }).sort((a,b) => {\n    return b.score - a.score\n  }) : null\n\n  if(cp.item && cp.hovered === true){\n    const addOnID = cp.item.id\n    var same = false\n    daysItems.forEach(item => {\n      if(item.id === addOnID){\n        same = true;\n      }\n    })\n    if(!same){\n      daysItems.push(cp.item)\n      daysItems.sort((a,b) => {\n        const bS = b.newScore ? Math.max(b.newScore + b.score,0) : b.score;\n        const aS = a.newScore ? Math.max(a.newScore + a.score,0) : a.score;\n        return bS - aS\n      });\n    }\n  }\n\n  var overdueItems = items ? items.filter(item => {\n    if(day.date.isSame(getPreviousMonday()) && moment.unix(item.expectedUpdate.seconds).startOf('days').isBefore(day.date)){\n      return true\n    }\n    return false\n  }) : null\n\n  var daysScore = 0;\n\n  if(daysItems){\n    daysItems.forEach(item => {\n      if(item.newScore && item.newScore !== 0){\n        daysScore += Math.max((item.score + item.newScore),0)\n      }else{\n        daysScore += item.score\n      }\n    })\n  }\n\n\n  const bgClass = day.today === 0 ? 'bg-doToday rounded-full p-1 text-white' : day.today === -1 ? 'bg-gray-400 rounded-full p-1' : 'bg-gray-200 rounded-full p-1'\n\n\n  return ( \n    <div ref={drop} className={\" flex flex-col overflow-hidden max-h-full border-l-2 border-r-2 border-darkGray \"}>\n      <div className=\"border-b-4 border-darkGray pb-1\">\n        <p className={\"text-center font-bold \"}><span className={\" \"}>{day.weekday}</span></p>\n        <p className=\"text-center\"><span className={bgClass} >{day.date.format(\"DD\")}</span><span> - {daysScore.toFixed(2)}</span></p>\n      </div>\n      <div className=\"flex-shrink px-1 overflow-scroll\">\n      { overdueItems && overdueItems.length > 0 ? \n          <p className=\"font-bold\">Past Weeks:</p>\n          :\n          null\n        }\n        {overdueItems && overdueItems.length > 0 && overdueItems.map(overdueItem => {\n          return(\n            <PlanningDayItem daysItem={overdueItem} key={overdueItem.id} />\n          )\n        })\n        }\n        { overdueItems && overdueItems.length > 0 ? \n          <hr className=\"border-4 border-darkGray\"></hr>\n          :\n          null\n        }\n        { daysItems && daysItems.map(daysItem => {\n          return(\n            <PlanningDayItem daysItem={daysItem} key={daysItem.id} />\n          )\n        })}\n      </div>\n    </div>\n   );\n}\n \nexport default PlanningDay;","import React from 'react'\nimport PlanningDay from './PlanningDay'\nimport moment from 'moment'\n\nconst PlanningWeek = ({week}) => {\n\n  const getPreviousMonday = () => {\n    const currentCheck = moment().startOf('day')\n    var previousMonday = null;\n    while (previousMonday === null){\n      if(currentCheck.day() === 1){\n        previousMonday = currentCheck\n      }else{\n        currentCheck.subtract(1,'d')\n      }\n    }\n    return previousMonday;\n  }\n\n  const days = []\n  for(var i = 0; i<7; i++){\n    const day = getPreviousMonday().startOf('day').add(i,'d').add(week,'w');\n    const todaysDate = moment().startOf('day')\n    const today = todaysDate.isSame(day) ? 0 : todaysDate.isBefore(day) ? 1 : todaysDate.isAfter(day) ? -1 : 0;\n    if(day.day() !== 0 && day.day() !== 6){\n      days.push({\n        weekday: day.format('dddd'),\n        date: day,\n        today\n      })\n    }\n  }\n\n\n  return ( \n    <div className=\"max-h-1/2 h-1/2 grid grid-cols-5 w-full border-b-8 border-darkGray bg-offWhite\">\n      { days && days.map(day => {\n        return(\n          <PlanningDay key={day.weekday} day={day} />\n        )\n      })}\n    </div>\n   );\n}\n \nexport default PlanningWeek;","\nexport const filterReducer = (state, action) => {\n  switch(action.type){\n    case 'SETUP_IMPORTANCE_FILTERS':\n      var importanceFilters = {}\n      action.importances.forEach(importance => {\n        importanceFilters[importance.id] = true\n      })\n      return{\n        ...state,\n        importanceFilters\n      }\n    case 'SET_IMPORTANCE_FILTER':\n      return{\n        ...state,\n        importanceFilters:{\n          ...state.importanceFilters,\n          [action.importance]: action.value\n        }\n      }\n    case 'ALL_IMPORTANCE':\n      var newImportanceFilters = {}\n      const ikeys = Object.keys(action.importances)\n      for (const key of ikeys) {\n        newImportanceFilters[key] = action.value\n      }\n      return{\n        ...state,\n        importanceFilters: newImportanceFilters\n      }\n    case 'SET_ACTION_FILTER':\n      return{\n        ...state,\n        actionFilters:{\n          ...state.actionFilters,\n          [action.actionType]: action.value\n        }\n      }\n    case 'ALL_ACTION':\n      var newActionFilters = {}\n      const akeys = Object.keys(action.actionTypes)\n      for (const key of akeys) {\n        newActionFilters[key] = action.value\n      }\n      return{\n        ...state,\n        actionFilters: newActionFilters\n      }\n    case 'SET_DAY_FILTER':\n      return{\n        ...state,\n        dayFilter: action.value\n      }\n    default: \n      return state\n  }\n}","import React, { useReducer } from \"react\";\nimport { filterReducer } from '../reducers/filterReducer'\n\n\nexport const FilterContext = React.createContext();\n\n\nexport const FilterContextProvider = ({ children }) => {\n\n\n  const [filterData, filterDispatch] = useReducer(filterReducer, {\n    dayFilter: 'all',\n    dayFilters: [\n      {name:'All', value:'all', id:'all', filtName: 'dateFilter'},\n      {name:'Today', value:'0', id:'today', filtName: 'dateFilter'},\n      {name:'Next Day', value:'1', id:'nextDay', filtName: 'dateFilter'},\n      {name:'Next 2 Days', value:'2', id:'nextTwoDays', filtName: 'dateFilter'},\n      {name:'Overdue', value:'-1', id:'overdue', filtName: 'dateFilter'},\n    ]\n  });\n\n\n  return (\n    <FilterContext.Provider value={{ filterData, filterDispatch }}>{children}</FilterContext.Provider>\n  );\n};\n\n","import React, { useContext, useEffect } from 'react'\nimport PlanningWeek from './planningView/PlanningWeek'\nimport { DndProvider } from 'react-dnd'\nimport { HTML5Backend } from 'react-dnd-html5-backend'\nimport { FilterContext } from '../store/contexts/filterContext'\nimport { DataContext } from '../store/contexts/dataContext'\n\nconst PlanningView = () => {\n\n  const { filterDispatch } = useContext(FilterContext)\n  const { weights } = useContext(DataContext)\n\n\n\n  useEffect(() => {\n    const importances = weights ? weights.importanceTypes : {}\n    const actionTypes = weights ? weights.actionTypes : {}\n    filterDispatch({type: 'ALL_IMPORTANCE', value: true, importances})\n    filterDispatch({type: 'ALL_ACTION', value: true, actionTypes})\n    filterDispatch({type: 'SET_DAY_FILTER', value: 'all'})\n  }, [filterDispatch, weights])\n\n\n\n\n  return ( \n    <div className=\"overflow-scroll max-h-screen pb-10 h-screen\">\n      <DndProvider backend={HTML5Backend}>\n        <PlanningWeek week={0} />\n        <PlanningWeek week={1} />\n      </DndProvider>\n    </div>\n   );\n}\n \nexport default PlanningView;","import moment from 'moment'\nimport * as d3module from 'd3'\nimport d3tip from 'd3-tip'\n\nconst d3 = {\n  ...d3module,\n  tip: d3tip\n}\n\n\nexport const cleanHistory = (history) => {  \n  if(history && history.length > 0){\n    return buildChartData(cleanDays(removeDuplicates(history)))\n  }else{\n    return null\n  }\n}\n\nconst cleanDays = (history) => {\n  var newHistory = [];\n  const uniqueDays = [...new Set(history.map(hist => moment.unix(hist.date.seconds).startOf('days').format('MM/DD/YY')))];\n\n  uniqueDays.forEach(day => {\n    var firstScore = 0;\n    var firstTimestamp = null;\n    var lastScore = 0;\n    var lastTimestamp = null;\n    history.forEach(hist => {\n      if(day === moment.unix(hist.date.seconds).startOf('days').format('MM/DD/YY')){\n        if(firstTimestamp === null){\n          firstTimestamp = hist.date;\n          firstScore = hist.score\n        }else if(moment.unix(hist.date.seconds).isBefore(moment.unix(firstTimestamp))){\n          firstTimestamp = hist.date;\n          firstScore = hist.score\n        }\n\n        if(lastTimestamp === null){\n          lastTimestamp = hist.date;\n          lastScore = hist.score\n        }else if(moment.unix(hist.date.seconds).isAfter(moment.unix(lastTimestamp))){\n          lastTimestamp = hist.date;\n          lastScore = hist.score\n        }\n      }\n    })\n\n    //log first/last\n    newHistory.push({\n      date: firstTimestamp,\n      score: firstScore\n    })\n    if(firstTimestamp.seconds !== lastTimestamp.seconds){\n      newHistory.push({\n        date: lastTimestamp,\n        score: lastScore\n      })\n    }\n\n  })\n\n  return newHistory.sort((a,b) => {\n    return a.date.seconds - b.date.seconds\n  })\n\n}\n\n\nconst removeDuplicates = (history) => {\n  var newHistory = []\n  newHistory.push(history[0])\n  for(var i = 1; i < history.length; i++){\n    if(history[i].score !== history[i-1].score){\n      newHistory.push(history[i])\n    }\n  }\n  return newHistory\n}\n\nconst buildChartData = (history) => {\n  var lineData = []\n  history.forEach(hist => {\n    lineData.push({\n      \"x\": moment.unix(hist.date.seconds).toDate(),\n      \"y\": hist.score\n    })\n  })\n\n  // return lineData\n\n  return {\n    \"lines\":[\n      {\n        \"name\": \"Score History\",\n        \"data\": lineData,\n        \"color\": \"black\"\n      }\n    ],\n    \"minY\":0,\n    \"xTicks\":6,\n    \"yTicks\":7,\n    \"dots\":true,\n    \"dotSize\":2\n  }\n}\n\n\nexport const dateFormatter = (d) => {\n  return moment(d).format('MM/DD/YY')\n}\n\nexport const decimalFormatter = (d) => {\n  return d.toFixed(2)\n}\n\nexport const timeOnlyFormatter = (d) => {\n  return moment(d).format('h:mm a')\n}\n\n\nconst xMinMax = (chartData) => {\n  var minX = new Date();\n  var maxX = 0\n  chartData.lines.forEach(line => {\n    line.data.forEach(point => {\n        maxX = Math.max(point.x,maxX)\n        minX = Math.min(point.x,minX)\n    })\n  });\n  return {\n    \"max\": maxX,\n    \"min\": minX\n  }\n}\n\nconst yMinMax = (chartData) => {\n  var maxY = 0\n  var minY = null\n  chartData.lines.forEach(line => {\n    line.data.forEach(point => {\n        maxY = Math.max(point.y,maxY)\n        minY = minY ? Math.min(point.y,minY) : point.y\n    })\n  });\n  minY = minY - ((maxY - minY) * 0.1)\n\n  return {\n    \"max\": maxY,\n    \"min\": minY\n  }\n}\n\n\nexport const yScaleLinear = (chartData, height) => {\n  const yRange = yMinMax(chartData)\n\n  return d3.scaleLinear()\n    .range([0,height])\n    .domain([yRange.max,yRange.min])\n}\n\nexport const xScaleTime = (chartData, width) => {\n  const xRange = xMinMax(chartData)\n\n  return d3.scaleTime()\n    .range([0,width])\n    .domain([xRange.min,xRange.max])\n}\n\n\nexport const getToolTip = () => {\n  return d3.tip()\n    .attr('class', 'tip card')\n    .html((e,d) => {\n        const xLabel = dateFormatter(d.x)\n        const yLabel = decimalFormatter(d.y)\n        const xTimeLabel = timeOnlyFormatter(d.x)\n        let content = ''\n        content += `<div class=\"score\">${yLabel}</div>`;\n        content += `<div class=\"name\">${xLabel}</div>`;\n        content += `<div class=\"cost\">${xTimeLabel}</div>`;\n        return content;\n    })\n    .direction('s')\n    .offset([15, 0]);\n}","\nexport const historyReducer = (state, action) => {\n  switch(action.type){\n    case 'LOG':\n      return {\n        ...state,\n        updates: state.updates + 1\n      }\n    default: \n      return state\n  }\n}","import React, { useState, useEffect, useReducer } from \"react\";\nimport { useAuthState } from 'react-firebase-hooks/auth';\nimport firebase from '../../config/fbConfig'\nimport { historyReducer } from '../reducers/historyReducer'\n\nexport const HistoryContext = React.createContext();\n\n\nexport const HistoryProvider = ({ children }) => {\n\n  const [history, setHistory] = useState(null)\n\n  const [user] = useAuthState(firebase.auth());\n\n  const [historyStatus, historyDispatch] = useReducer(historyReducer, {\n    updates: 0\n  });\n\n  \n  useEffect(() => {\n    if(user === null) return\n    const req = new XMLHttpRequest();\n      \n    console.log(\"PULL HISTORY\")\n    req.onload = function() {\n      setHistory(JSON.parse(req.response))\n    }\n    req.onerror = function() {\n      console.log(req.response)\n    }\n\n    const params = {\n      \"id\": user.uid,\n      \"days\": 30\n    }\n      \n    // const fullPath = \"http://localhost:5001/todo-8303f/us-central1/history/all\"\n    const fullPath = \"https://us-central1-todo-8303f.cloudfunctions.net/history/all\"\n    req.open(\"POST\", fullPath, true);\n\n    req.send(JSON.stringify(params));\n\n  }, [user,historyStatus.updates])\n\n  return (\n    <HistoryContext.Provider value={{ history, historyLoading:false,  historyDispatch}}>{children}</HistoryContext.Provider>\n  );\n};\n\n","import React, { useRef, useEffect, useContext } from 'react';\nimport * as d3module from 'd3'\nimport d3tip from 'd3-tip'\nimport { FbContext } from '../../store/contexts/fbContext';\nimport { dateFormatter, decimalFormatter, xScaleTime, yScaleLinear, getToolTip } from '../../chartHelper'\nimport { ModalContext } from '../../store/contexts/modalContext';\nimport moment from 'moment'\nimport { HistoryContext } from '../../store/contexts/historyContext';\n\nconst d3 = {\n  ...d3module,\n  tip: d3tip\n}\n\n\nconst LineChart = () => {\n\n    const { FBuser } = useContext(FbContext)\n    const { modalStatus } = useContext(ModalContext)\n    var chartData = null\n\n    const chartClass = modalStatus.showChart ? 'block' : 'hidden'\n    const { history } = useContext(HistoryContext)\n\n\n    chartData = history\n    if(chartData){\n      chartData.lines.forEach(line => {\n        line.data.forEach(point => {\n          point.x = moment(point.x).toDate()\n        })\n      })\n    }\n\n\n    //ref to root svg\n    const ref = useRef()\n\n\n    useEffect(() => {\n\n      //graph size\n      const graphHeight = 200\n      const graphWidth = 500\n      const margin = { top: 10, bottom: 20, left: 35, right: 20 };\n      const width = graphWidth - margin.left - margin.right;\n      const height = graphHeight - margin.top - margin.bottom;\n\n      //select root svg\n      const svg = d3.select(ref.current)\n          .attr(\"viewBox\", `0 0 ${graphWidth} ${graphHeight}`)\n          \n      //select group for graph\n      const chartArea = svg.select('.chartArea')\n          .attr('height', graphHeight)\n          .attr('class','chartArea')\n          .attr('width', graphWidth)\n          .attr(\"transform\", `translate(${margin.left},${margin.top})`);\n      \n      chartArea.selectAll('g').remove();\n\n      //add group for data points\n      const graph = chartArea\n      .append(\"g\")\n      .attr(\"transform\", `translate(-${margin.left},-${margin.top})`);\n\n      //remove all current groups within graph\n      graph.selectAll('g').remove();\n      graph.selectAll('path').remove();\n\n      if(chartData){\n\n        //create dotted line group and append to graph\n        const hoverLineGroup = graph.append('g')\n            .style('opacity',0)\n            .attr(\"transform\", `translate(${margin.left},${margin.top})`)\n\n        //create x line and append\n        const xHoverLine = hoverLineGroup.append('line')\n        .attr('stroke','#aaa')\n        .attr('stroke-width', 1)\n        .attr('stroke-dasharray',4)\n\n        //create y line and append\n        const yHoverLine = hoverLineGroup.append('line')\n        .attr('stroke','#aaa')\n        .attr('stroke-width', 1)\n        .attr('stroke-dasharray',4)\n\n        //add group for x axis and move it to the bottom\n        const xAxisGroup = chartArea.append('g')\n            .attr('transform', `translate(0,${height})`);\n      \n        //add group for y axis\n        const yAxisGroup = chartArea.append('g')\n            .attr(\"transform\", `translate(0, 0)`)\n\n        //scales\n        const xScale = xScaleTime(chartData, width)\n        const yScale = yScaleLinear(chartData, height)\n\n        //d3 line path generator\n        const pathGenerator = d3.line()\n          .x(function(d){ return xScale(d.x) })\n          .y(function(d){ return yScale(d.y) })\n\n\n        //build each line dynamically\n        chartData.lines.forEach(line => {\n\n          //tooltip\n          const ttip = getToolTip()\n          graph.call(ttip);\n\n          const path = graph.append('path')\n              .attr(\"transform\", `translate(${margin.left},${margin.top})`)\n\n          //add circles\n          const circs = graph.selectAll('circle.' + line.name)\n              .data(line.data)\n              \n          const circSize = chartData.dotSize ? chartData.dotSize : 5\n\n          //remove exit selction for circles\n          circs.exit().remove()\n\n          //update current circs\n          circs.attr('r', circSize)\n              .attr('fill', 'black')\n              .attr('cx', d => xScale(d.x))\n              .attr('cy', d => yScale(d.y))\n              .attr(\"transform\", `translate(${margin.left},${margin.top})`)\n              .on('mouseover', ttip.show)\n              .on('mouseout', ttip.hide)\n\n\n\n          //append the enter selection to the DOM\n          circs.enter()\n              .append('circle')\n              .attr('fill', 'black')\n              .attr('cx', d => xScale(d.x))\n              .attr('cy', d => yScale(d.y))\n              .attr('r', circSize)\n              .attr(\"transform\", `translate(${margin.left},${margin.top})`)\n              .attr('opacity',1)\n              .on('mouseover.tip', ttip.show)\n              .on('mouseover.lines', (e,d) => {\n              xHoverLine\n                  .attr('x1',xScale(d.x))\n                  .attr('x2',xScale(d.x))\n                  .attr('y1',yScale(d.y))\n                  .attr('y2',height)\n\n              yHoverLine\n                  .attr('x1',0)\n                  .attr('x2',xScale(d.x))\n                  .attr('y1',yScale(d.y))\n                  .attr('y2',yScale(d.y))\n\n              hoverLineGroup.style('opacity', 1)\n              })\n              .on('mouseout.tip', ttip.hide)\n              .on('mouseout.lines', (e,d) => {\n                  hoverLineGroup.style('opacity', 0)\n              })\n          \n              const pathLength = path.node().getTotalLength();\n\n          // update path data\n          path.data([line.data])\n              .attr('fill', 'none')\n              .attr('stroke', line.color)\n              .attr('stroke-width', 2)\n              .attr('d', pathGenerator)\n              .style('opacity',0.75)\n              .attr(\"stroke-dasharray\", pathLength + \" \" + pathLength)\n\n        \n\n        })\n\n        const xTicks = chartData.xTicks ? chartData.xTicks : 5\n        const yTicks = chartData.yTicks ? chartData.yTicks : 5\n\n        //axis label formatting functions\n        var xFormat = chartData ? dateFormatter : (d) => d\n        var yFormat = chartData ? decimalFormatter : (d) => d\n\n        //create and call the axes\n        const xAxis = d3.axisBottom(xScale)\n            .tickFormat(d => xFormat(d))\n            .ticks(xTicks)\n\n        const yAxis = d3.axisLeft(yScale)\n            .tickFormat(d => yFormat(d))\n            .ticks(yTicks)\n\n\n        xAxisGroup.call(xAxis)\n            .attr('class','chartAxis')\n        yAxisGroup.call(yAxis)\n            .attr('class','chartAxis')\n\n      }\n    }, [FBuser, chartData])\n\n    return (\n        <div className=\"flex justify-center\">\n          <div className={chartClass + ' w-full'}>\n              <svg ref={ref}>\n                  <g className=\"chartArea\">\n\n                  </g>\n              </svg>\n          </div>\n        </div>\n    )\n  }\n \nexport default LineChart;","import React, { useContext } from 'react';\nimport { DataContext } from '../../store/contexts/dataContext';\nconst interpolate = require('color-interpolate');\n\nconst ImportanceIcon = ({importance}) => {\n\n  const { weights } = useContext(DataContext)\n  const importances = weights ? weights.importanceArray : null\n\n  // const colors = interpolate([[0, 255, 0],[127,255,0],[255,255,0],[255,127,0],[255,0,0]])\n  const colors = interpolate([[255, 255, 255],[255,0,0]])\n  var color = colors(0)\n  const totalImportances = importances.length\n\n  const sortedImportances = importances.sort((a,b) => {\n    return a.weight - b.weight\n  })\n  \n  var numberOfDots = 1;\n  for(var i = 1; i <= sortedImportances.length; i++){\n    if(sortedImportances[i-1].id === importance){\n      numberOfDots = i;\n      color = colors((i-1)/(totalImportances-1))\n    }\n  }\n\n  \n\n  var dots = []\n  for (let i = 1; i <= numberOfDots; i++) {\n    dots.push(i);\n  }\n\n\n  return ( \n    <div className=\"flex\">\n      { dots && dots.map(dot => {\n        return(\n          <div className=\"h-3 w-3\" key={dot}>\n            <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n              <circle cx=\"12\" cy=\"12\" r=\"10\" stroke=\"black\" strokeWidth=\"1\" fill={color} />\n            </svg>\n          </div>\n        )\n      })}\n    </div>\n   );\n}\n \nexport default ImportanceIcon;","import React, { useContext } from 'react'\nimport moment from 'moment'\nimport ImportanceIcon from '../icons/ImportanceIcon'\nimport { ModalContext } from '../../store/contexts/modalContext'\n\n\nconst ItemCardWithProject = ({item}) => {\n\nconst { modalDispatch } = useContext(ModalContext)\n\nconst expectedUpdate = item.expectedUpdate ? moment.unix(item.expectedUpdate.seconds).format('MM/DD/YY') : null\n\nconst itemClick = (e) => {\n  modalDispatch({type: 'SHOW_SHEET', itemID: item.id})\n}\n\nconst projectClick = (e) => {\n  modalDispatch({type: 'SHOW_PROJECT_SHEET', projectID: item.projectID})\n}\n\n\nconst daysToText = item && item.daysTo === 1 ? 'Tomorrow' : item && item.daysTo === 0 ? 'Today' : item && item.daysTo > 0 ? item.daysTo + ' days' : item && item.daysTo === -1 ? '1 day ago' : item && item.daysTo < 0 ? item.daysTo * -1 + ' days ago' : null;\n\n  return ( \n    <div className={'rounded-md border-2 border-black my-2 w-full self-center grid grid-cols-12 '}>\n      <div onClick={projectClick} className='hover:bg-opacity-50 mainInfo flex flex-col col-span-4 p-2 bg-darkGray text-white'>\n        <p className='text-xs'>{item.score ? item.score.toFixed(2) : 0}</p>\n        <p className='text-xl'>{item.project ? item.project.name : ''}</p>\n        <ImportanceIcon importance={item.project ? item.project.importance : 3} />\n        <p className='text-sm'>{item.project ? item.project.description : ''}</p>\n      </div>\n      <div onClick={itemClick} className={\"relative hover:bg-opacity-75 col-span-8 p-2 \" + item.colorClass}>\n        <p className='text-xl'>{item.action}</p>\n        <p className='text-sm'>{expectedUpdate}</p>\n        <p className='text-base'>{item.actionTypeName}</p>\n        <p className=\"absolute right-1 top-0\">{daysToText}</p>\n      </div>\n    </div>\n   );\n}\n \nexport default ItemCardWithProject;","import React, { useContext } from 'react'\nimport moment from 'moment'\nimport { ModalContext } from '../../store/contexts/modalContext'\nimport { unCompleteItem } from '../../store/actions'\n\n\nconst ItemCard = ({item, done}) => {\n\nconst { modalDispatch } = useContext(ModalContext)\n\nconst expectedUpdate = item.expectedUpdate ? moment.unix(item.expectedUpdate.seconds).format('MM/DD/YY') : null\n\nconst click = (e) => {\n  if(done !== true){\n    modalDispatch({type: 'SHOW_SHEET', itemID: item.id})\n  }else{\n    unCompleteItem(item.id)\n  }\n}\n\n\n  return ( \n    <div onClick={click} className={'border-2 border-black my-2 w-full self-center grid grid-cols-12 '}>\n      <div className='mainInfo justify-center flex flex-col col-span-2 p-2 bg-black text-white'>\n        <p className='text-xl self-center'>{item.score ? item.score.toFixed(2) : 0}</p>\n      </div>\n      <div className={\"col-span-10 p-2 \" + item.colorClass}>\n        <p className='text-xl'>{item.actionTypeName}</p>\n        <p className='text-sm'>{expectedUpdate}</p>\n        <p className='text-base'>{item.action}</p>\n      </div>\n    </div>\n   );\n}\n \nexport default ItemCard;","import React from 'react'\nimport ItemCardWithProject from './ItemCardWithProject'\nimport ItemCard from './ItemCard'\n\nconst ItemCardContainer = ({item, showProject, done}) => {\n\n\n  return ( \n    <div className={'cursor-pointer'}>\n      { showProject ? (\n        <ItemCardWithProject item={item} />\n      ): (\n        <ItemCard item={item} done={done} />\n      )}\n    </div>\n   );\n}\n \nexport default ItemCardContainer;","import { useContext } from 'react';\nimport { DataContext } from './store/contexts/dataContext';\nimport { FilterContext } from './store/contexts/filterContext';\n\nexport default function useFilteredItems() {\n  const { items } = useContext(DataContext)\n  const { filterData } = useContext(FilterContext)\n\n  var sortedItems = items ? items.sort((a,b) => {\n    if(a.expectedUpdate === null) return 1\n    if(b.expectedUpdate === null) return -1\n    return b.score - a.score\n  }) : null;\n\n  if(filterData && filterData.importanceFilters && sortedItems){\n    const importanceFilters = filterData.importanceFilters\n    sortedItems = sortedItems.filter(item => {\n      if(importanceFilters[item.project.importance] === undefined) return true\n      return importanceFilters[item.project.importance]\n    })\n  }\n\n  if(filterData && sortedItems){\n    if(filterData.dayFilter !== 'all'){\n      const filterNumber = parseInt(filterData.dayFilter);\n      sortedItems = sortedItems.filter(item => {\n        return item.daysTo <= filterNumber\n      })\n    }\n  }\n\n  if(filterData && filterData.actionFilters && sortedItems){\n    const actionFilters = filterData.actionFilters\n    sortedItems = sortedItems.filter(item => {\n      if(actionFilters[item.actionType] === undefined) return true\n      return actionFilters[item.actionType]\n    })\n  }\n\n  return sortedItems;\n}","import React, { useContext } from 'react'\nimport { DataContext } from '../../store/contexts/dataContext';\nimport { FbContext } from '../../store/contexts/fbContext';\nimport ItemCardContainer from '../itemCards/ItemCardContainer';\nimport useFilteredItems from '../../UseFilteredItems'\n\nconst CardCollection = () => {\n\n  const { allLoaded } = useContext(DataContext)\n  const { FBuser } = useContext(FbContext)\n  const newItems = useFilteredItems()\n\n\n  if(!FBuser || !allLoaded){\n    return null\n  }\n\n\n  return ( \n    <div className=\"overflow-scroll h-full hideBar\">\n      { newItems && newItems.map(item => {\n        return <ItemCardContainer showProject={true} key={item.id} item={item} />\n      })}\n    </div>\n   );\n}\n \nexport default CardCollection;","import React from 'react'\nimport LineChart from '../leftBar/LineChart';\nimport CardCollection from './CardCollection'\n\n\nconst CenterColumn = () => {\n  return ( \n    <div className='flex flex-col w-full col-span-6 col-start-4 p-2 overflow-hidden'>\n      <LineChart />\n      <CardCollection />\n    </div>\n   );\n}\n \nexport default CenterColumn;","import React, { useState, useEffect, useRef, useContext } from 'react'\nimport { addOneOff } from '../../../store/actions'\nimport { ModalContext } from '../../../store/contexts/modalContext'\n\nconst AddOneOff = () => {\n\n  const [newOneOff, setNewOneOff] = useState('')\n  const { modalStatus } = useContext(ModalContext)\n  const ref = useRef(null);\n\n  useEffect(() => {\n\n    const keyupOne = (e) => {\n      if(e.code === \"Slash\" && document.activeElement.nodeName !== 'TEXTAREA' && document.activeElement.nodeName !== \"INPUT\" && !modalStatus.showProjectSheet && !modalStatus.showSheet){\n        ref.current.focus()\n      }\n    }\n\n    document.addEventListener(\"keyup\", keyupOne);\n\n    return(() => {\n      document.removeEventListener(\"keyup\", keyupOne);\n    })\n  })\n\n  const change = (e) => {\n    setNewOneOff(e.target.value)\n  }\n\n  const submit = (e) => {\n    e.preventDefault()\n    addOneOff(newOneOff)\n    setNewOneOff('')\n  }\n\n\n  return ( \n    <form onSubmit={submit}>\n      <input ref={ref} className=\"formInput mt-2\" placeholder=\"Add One Off\" value={newOneOff} onChange={change}></input>\n    </form>\n   );\n}\n \nexport default AddOneOff;","import React, { useState } from 'react'\nimport { completeOneOff, updateOneOff } from '../../../store/actions'\n\nconst OneOffItem = ({oneOff}) => {\n\n  const [editing,setEditing] = useState(false)\n  const [inputValue, setInputValue] = useState(oneOff.name)\n\n  const onCheck = () => {\n    completeOneOff(oneOff.id)\n  }\n\n  const double = (e) => {\n    setEditing(!editing)\n  }\n\n  const change = (e) => {\n    setInputValue(e.target.value)\n  }\n\n  const blur = (e) => {\n    updateOneOff(e.target.value, oneOff.id)\n    setEditing(false)\n  }\n\n  return (\n    <div onDoubleClick = {double} className=\"flex space-x-2 bg-gray-100 my-1\">\n      <input className='self-center' onChange={onCheck} type=\"checkbox\" />\n      { editing ? \n        <input autoFocus onBlur={blur} onChange={change} value={inputValue}></input>\n        :\n        <label className='self-center'>{oneOff.name}</label>\n      }\n    </div>\n   );\n}\n \nexport default OneOffItem;","import React, { useContext } from 'react'\nimport { DataContext } from '../../../store/contexts/dataContext';\nimport AddOneOff from './AddOneOff';\nimport OneOffItem from './OneOffItem';\n\n\nconst OneOffs = () => {\n\n  const { oneOffs } = useContext(DataContext)\n\n\n  var sortedOneOffs = oneOffs ? oneOffs.sort((a,b) => {\n    return a.created - b.created\n  }) : null\n\n  \n\n\n\n  return ( \n    <div className=\"w-full\">\n      <div className=\"m-auto w-48\">\n        <h1 className=\"text-lg font-bold\">One Off Items</h1>\n        { sortedOneOffs && sortedOneOffs.map(oneOff => {\n          return (\n            <OneOffItem oneOff={oneOff} key={oneOff.id} />\n          )\n        })}\n        <AddOneOff />\n      </div>\n    </div>\n   );\n}\n \nexport default OneOffs;","import React, { useContext, useEffect } from 'react'\nimport { FbContext } from '../../store/contexts/fbContext';\nimport { logHistory } from '../../store/actions'\nimport { DataContext } from '../../store/contexts/dataContext';\nimport { ModalContext } from '../../store/contexts/modalContext';\nimport { HistoryContext } from '../../store/contexts/historyContext';\n\nconst TotalScore = () => {\n\n  const { FBuser } = useContext(FbContext)\n  const { weights, totalScore, allLoaded } = useContext(DataContext)\n  const { modalDispatch } = useContext(ModalContext)\n  const { historyDispatch } = useContext(HistoryContext)\n\n\n  useEffect(() => {\n\n     if(allLoaded === true && FBuser !== null && weights !== null && weights.currentUserScore !== null && weights.currentUserScore.toFixed(2) !== totalScore.toFixed(2)){\n       logHistory(totalScore, historyDispatch)\n     }\n \n   }, [allLoaded, FBuser, totalScore, weights, historyDispatch])\n\n\n  const toggleChart = (e) => {\n    modalDispatch({type:'TOGGLE_CHART'})\n  }\n\n  return ( \n    <div className=\"mt-5\">\n      <div className=\"flex justify-center space-x-1\">\n        <h1 className=\"text-center text-4xl scoreLabel\">{ totalScore.toFixed(2) }</h1>\n        <svg onClick={toggleChart} className=\"w-5 cursor-pointer\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M7 12l3-3 3 3 4-4M8 21l4-4 4 4M3 4h18M4 4h16v12a1 1 0 01-1 1H5a1 1 0 01-1-1V4z\" />\n        </svg>\n      </div>\n    </div>\n   );\n}\n \nexport default TotalScore;","import React, { useContext } from 'react'\nimport { ModalContext } from '../../store/contexts/modalContext'\nimport ImportanceIcon from '../icons/ImportanceIcon'\n\n\nconst ProjectListItem = ({proj, weights}) => {\n\n  const { modalDispatch } = useContext(ModalContext)\n\n  const click = (e) => {\n    modalDispatch({type: 'SHOW_PROJECT_SHEET', projectID: proj.id})\n  }\n\n  return ( \n    <div onClick={click} className=\"transform hover:scale-110 transition ease-out duration-300 flex justify-between whitespace-nowrap px-2 space-x-2 text-white bg-darkGray rounded-lg cursor-pointer\">\n      <p className=\"overflow-hidden overflow-ellipsis\">{proj.totalScore.toFixed(2)} - {proj.name}</p>\n      <div className=\"self-center\">\n        <ImportanceIcon importance={proj.importance} importances={weights.importanceArray} />\n      </div>\n    </div>\n   );\n}\n \nexport default ProjectListItem;","import React from 'react'\n\n\nconst PlusIcon = () => {\n  return ( \n    <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M12 6v6m0 0v6m0-6h6m-6 0H6\" />\n    </svg>\n   );\n}\n \nexport default PlusIcon;","import React, { useContext } from 'react'\nimport ProjectListItem from './ProjectListItem';\nimport PlusIcon from '../icons/PlusIcon'\nimport { ModalContext } from '../../store/contexts/modalContext';\nimport { DataContext } from '../../store/contexts/dataContext';\n\nconst ProjectList = () => {\n\n  const { projects, items, weights } = useContext(DataContext)\n  const { modalDispatch } = useContext(ModalContext)\n\n  var newProjects = [];\n  if(projects && items){\n    newProjects = projects.map(proj => {\n      const itemsInProj = items.filter(item => {\n        if(!item.project) return false\n        return item.project.id === proj.id\n      })\n      var projScore = 0;\n      itemsInProj.forEach(item => projScore += item.score)\n      return {...proj, totalScore: projScore}\n    })\n  }\n\n  newProjects.sort((a,b) => {\n    return b.totalScore - a.totalScore\n  })\n\n  const addProject = (e) => {\n    modalDispatch({type: 'SHOW_PROJECT_SHEET', projectID: null})\n  }\n  \n\n  return ( \n    <div className=\"mt-10 px-7\">\n      <div className=\"flex space-x-1\">\n        <p className='self-center text-xl font-bold'>Projects</p>\n        <div onClick={addProject} className=\"self-center w-6 h-6 cursor-pointer\">\n          <PlusIcon />\n        </div>\n      </div>\n      <div className=\"flex flex-col space-y-1\">\n        { newProjects && newProjects.map(proj => {\n          return (\n            <ProjectListItem key={proj.id} proj={proj} weights={weights} />\n          )\n        })}\n      </div>\n    </div>\n   );\n}\n \nexport default ProjectList;","import React, { useContext } from \"react\";\nimport firebase from '../../config/fbConfig'\nimport { useCollectionData } from 'react-firebase-hooks/firestore';\nimport { FbContext } from \"./fbContext\";\n\n\nexport const CompletedItemsContext = React.createContext();\n\n\nexport const CompltetedItemsProvider = ({ children }) => {\n\n  const { FBuser } = useContext(FbContext)\n  const userID = FBuser ? FBuser.uid : null\n\n\n  const [completedItems, completedItemsLoading] = useCollectionData(firebase.firestore().collection('users/' + userID + '/items').where('deleted','==',false).where('completed','==',true),{\n    idField: 'id'\n  })\n\n\n\n\n  return (\n    <CompletedItemsContext.Provider value={{ completedItems, completedItemsLoading }}>{children}</CompletedItemsContext.Provider>\n  );\n};\n\n","import { useContext, useState, useEffect } from 'react';\nimport { DataContext } from './store/contexts/dataContext';\nimport { CompletedItemsContext } from './store/contexts/completedItemsContext';\nimport useFilteredItems from './UseFilteredItems'\nimport moment from 'moment'\n\nexport default function useMetrics() {\n\n  const { items, weights, oneOffs } = useContext(DataContext)\n  const { completedItems } = useContext(CompletedItemsContext)\n  const filteredItems = useFilteredItems()\n\n  //todays score\n  const [todaysScore, setTodaysScore] = useState(0)\n  useEffect(() => {\n    const todaysItems = items ? items.filter(item => {\n      return item.daysTo <= 0;\n    }) : null;\n    if(weights === null || oneOffs === undefined){\n      setTodaysScore(0)\n    }else{\n      setTodaysScore(addScores(todaysItems) + (weights.oneOff * oneOffs.length));\n    }\n  }, [items, oneOffs, weights])\n\n  //tomorrowsScore\n  const [tomorrowsScore, setTomorrowsScore] = useState(0)\n  useEffect(() => {\n    const tomorrowsItems = items ? items.filter(item => { \n      return item.daysTo === 1;\n    }) : null;\n    setTomorrowsScore(addScores(tomorrowsItems))\n  }, [items])\n\n  //thisweeksScore\n  const [thisWeeksScore, setThisWeeksScore] = useState(0)\n  useEffect(() => {\n    const thisWeeksItems = items ? items.filter(item => {\n      return moment.unix(item.expectedUpdate.seconds).startOf('days').isBefore(getNextMonday())\n    }) : null\n    setThisWeeksScore(addScores(thisWeeksItems))\n  }, [items])\n\n  //completedToday\n  const [completedScore, setCompletedScore] = useState(0)\n  useEffect(() => {\n    var completedScore = 0\n\n    if(completedItems){\n      completedItems.forEach(item => {\n        if(item.scoreOnComplete !== undefined && moment.unix(item.completedDate.seconds).startOf('days').isSame(moment().startOf('days'))){\n          completedScore += item.scoreOnComplete\n        }\n      })\n    }\n\n    setCompletedScore(completedScore)\n  }, [completedItems])\n\n  //created today\n  const [createdScore, setCreatedScore] = useState(0)\n  useEffect(() => {\n    var createdScore = 0\n\n    if(completedItems){\n      completedItems.forEach(item => {\n        if(item.scoreOnComplete !== undefined && moment.unix(item.created.seconds).startOf('days').isSame(moment().startOf('days'))){\n          createdScore += item.scoreOnComplete\n        }\n      })\n    }\n    if(items){\n      items.forEach(item => {\n        if(moment.unix(item.created.seconds).startOf('days').isSame(moment().startOf('days'))){\n          createdScore += item.score\n        }\n      })\n    }\n    setCreatedScore(createdScore)\n  }, [completedItems, items])\n\n  //filteredScore\n  const [filteredScore, setFilteredScore] = useState(0)\n  useEffect(() => {\n    setFilteredScore(addScores(filteredItems))\n  }, [filteredItems])\n\n\n  const addScores = (itemsToAdd) => {\n    if(itemsToAdd === null) return 0\n    var score = 0\n    itemsToAdd.forEach(item => {\n      score += item.score\n    })\n    return score\n  }\n\n  const getNextMonday = () => {\n    const currentCheck = moment().startOf('day').add(1,'d')\n    var nextMonday = null;\n    while (nextMonday === null){\n      if(currentCheck.day() === 1){\n        nextMonday = currentCheck\n      }else{\n        currentCheck.add(1,'d')\n      }\n    }\n    return nextMonday;\n  }\n\n  return {todaysScore, tomorrowsScore, thisWeeksScore, completedScore, createdScore, filteredScore};\n}","import React from 'react'\nimport useMetrics from '../../UseMetrics'\n\nconst CompletedToday = () => {\n\n  const { completedScore, createdScore } = useMetrics()\n\n  const formattedCompletedScore = completedScore ? completedScore.toFixed(2) : 0\n  const formattedCreatedScore = createdScore ? createdScore.toFixed(2) : 0\n\n  return ( \n    <div className=\"w-full mb-5\">\n      <p className=\"m-auto w-48\">Completed Today: {formattedCompletedScore}</p>\n      <p className=\"m-auto w-48\">Created Today: {formattedCreatedScore}</p>\n    </div>\n   );\n}\n \nexport default CompletedToday;","import React, { useState, useContext } from 'react'\nimport OneOffs from './OneOffs/OneOffs'\n// import Config from './todoConfig/Config'\nimport TotalScore from './TotalScore'\nimport ProjectList from './ProjectList'\nimport { FbContext } from '../../store/contexts/fbContext'\nimport { DataContext } from '../../store/contexts/dataContext'\nimport CompletedToday from './CompletedToday'\n\n\nconst LeftBar = () => {\n\n  const [showConfig] = useState(false)\n  // const [showConfig, setShowConfig] = useState(false)\n  const { FBuser } = useContext(FbContext)\n  const { allLoaded } = useContext(DataContext)\n\n  // const click = (e) => {\n  //   setShowConfig(!showConfig)\n  // }\n\n  return ( \n    <div className=\"col-span-3 max-h-screen overflow-hidden mb-2\" >\n      <div className=\"max-h-full overflow-scroll hideBar\">\n        { FBuser && allLoaded ? (\n          <div>\n            <TotalScore />\n            <CompletedToday />\n            <OneOffs />\n            <ProjectList />\n            {/* <p className=\"mt-10 cursor-pointer underline m-auto w-56\" onClick={click}>{showConfig ? 'Hide Config' : 'Show Config'}</p> */}\n            { showConfig ? (\n              <div>\n                {/* <Config /> */}\n              </div>\n            ) : null}\n          </div>\n        ): null}\n      </div>\n    </div>\n   );\n}\n \nexport default LeftBar;","import React, { useContext } from 'react'\nimport { ModalContext } from '../../../store/contexts/modalContext'\nimport { useDrag } from 'react-dnd'\n\n\nconst PlanningDayItem = ({daysItem}) => {\n\n  const [{isDragging}, drag] = useDrag(() => ({\n    type: 'ITEM',\n    item: {...daysItem},\n    collect: monitor => ({\n      isDragging: !!monitor.isDragging(),\n    })\n  }))\n\n  const { modalDispatch } = useContext(ModalContext)\n\n  const opacityClass = isDragging ? 'opacity-50' : 'opacity-100'\n\n  const itemClick = (e) => {\n    modalDispatch({type: 'SHOW_SHEET', itemID: daysItem.id})\n  }\n\n  const itemScore = daysItem.newScore ? Math.max(daysItem.newScore + daysItem.score,0) : daysItem.score\n\n  return(\n    <div ref={drag} onClick={itemClick} className={\"cursor-pointer my-1 overflow-hidden \" + daysItem.colorClass + \" \" + opacityClass} key={daysItem.id}>\n      <p className=\"text-xs lg:text-sm\">({itemScore.toFixed(2)}) {daysItem.action}</p>\n    </div>\n  )\n}\n \nexport default PlanningDayItem;","import React, { useContext } from 'react'\nimport { DataContext } from '../../../store/contexts/dataContext';\nimport moment from 'moment'\nimport PreviewDayItem from './PreviewDayItem';\nimport { useDrop } from 'react-dnd'\nimport { dropped } from '../../../store/actions'\n\nconst PreviewDay = ({day, simple}) => {\n\n\n  const [cp, drop] = useDrop(\n    () => ({\n      accept: 'ITEM',\n      drop: (i,m) => {\n        dropped(m.getItem(),day)\n      },\n      collect: (monitor) => {\n        const item = monitor.getItem();\n        if(!item || monitor.isOver() === false){\n          return {\n            hovered: false,\n            item: null\n          }\n        }\n\n        if(!moment.unix(item.expectedUpdate.seconds).startOf('days').isSame(day.date.startOf('days'))){\n          const diff = moment.unix(item.expectedUpdate.seconds).startOf('days').diff(day.date.startOf('days'))\n          item.newScore = (item.dayDrop * (diff/1000/60/60/24))\n          \n        }else{\n          item.newScore = 0\n        }\n        \n        return {\n          hovered: monitor.isOver(),\n          item\n        }\n      }\n    }),\n    [day]\n  )\n\n  const { items } = useContext(DataContext)\n\n  const getPreviousMonday = () => {\n    const currentCheck = moment().startOf('day')\n    var previousMonday = null;\n    while (previousMonday === null){\n      if(currentCheck.day() === 1){\n        previousMonday = currentCheck\n      }else{\n        currentCheck.subtract(1,'d')\n      }\n    }\n    return previousMonday;\n  }\n\n\n  const daysItems = items ? items.filter(item => {\n    return moment.unix(item.expectedUpdate.seconds).startOf('days').isSame(day.date.startOf('day'))\n  }).sort((a,b) => {\n    return b.score - a.score\n  }) : null\n\n  if(cp.item && cp.hovered === true){\n    const addOnID = cp.item.id\n    var same = false\n    daysItems.forEach(item => {\n      if(item.id === addOnID){\n        same = true;\n      }\n    })\n    if(!same){\n      daysItems.push(cp.item)\n      daysItems.sort((a,b) => {\n        const bS = b.newScore ? Math.max(b.newScore + b.score,0) : b.score;\n        const aS = a.newScore ? Math.max(a.newScore + a.score,0) : a.score;\n        return bS - aS\n      });\n    }\n  }\n\n  var overdueItems = items ? items.filter(item => {\n    if(day.date.isSame(getPreviousMonday()) && moment.unix(item.expectedUpdate.seconds).startOf('days').isBefore(day.date)){\n      return true\n    }\n    return false\n  }) : null\n\n  var daysScore = 0;\n\n  if(daysItems){\n    daysItems.forEach(item => {\n      if(item.newScore && item.newScore !== 0){\n        daysScore += Math.max((item.score + item.newScore),0)\n      }else{\n        daysScore += item.score\n      }\n    })\n  }\n\n\n  const bgClass = day.today === 0 ? 'bg-doToday rounded-full p-1 text-white' : day.today === -1 ? 'bg-gray-400 rounded-full p-1' : 'bg-gray-200 rounded-full p-1'\n\n  return ( \n    <div ref={drop} className={\"pt-1 h-1/3 flex flex-col overflow-hidden border-l-2 border-r-2 border-darkGray \"}>\n      <div className=\"border-b-4 border-darkGray\">\n        <p className={\"text-center font-bold \"}><span className={bgClass}>{day.weekday}</span></p>\n        <p className=\"text-center\">{daysScore.toFixed(2)}</p>\n      </div>\n      <div className=\"px-1 flex-shrink overflow-scroll\">\n        <div className=\"\">\n        { overdueItems && overdueItems.length > 0 ? \n            <p className=\"font-bold\">Past Weeks:</p>\n            :\n            null\n          }\n          {overdueItems && overdueItems.length > 0 && overdueItems.map(overdueItem => {\n            return(\n              <PreviewDayItem daysItem={overdueItem} key={overdueItem.id} />\n            )\n          })\n          }\n          { overdueItems && overdueItems.length > 0 ? \n            <hr className=\"border-4 border-darkGray\"></hr>\n            :\n            null\n          }\n          { daysItems && daysItems.map(daysItem => {\n            return(\n              <PreviewDayItem daysItem={daysItem} key={daysItem.id} />\n            )\n          })}\n        </div>\n      </div>\n    </div>\n   );\n}\n \nexport default PreviewDay;","import React from 'react'\nimport moment from 'moment'\nimport PreviewDay from './PreviewDay'\n\nconst PreviewDays = () => {\n\n  const daysToShow = 3\n  const days = []\n\n\n  for(var i = 0; i < daysToShow; i++){\n    const thisDay = moment().startOf('day').add(i,'day')\n    while(thisDay.day() === 6 || thisDay.day() === 0){\n      thisDay.add(i,'day')\n    }\n    days.push({\n      weekday: thisDay.format('dddd'),\n      date: thisDay,\n      today: i === 0 ? 0 : 1\n    })\n  }\n\n\n  return ( \n    <div className=\"h-full\">\n      <div className=\"h-full\">\n        { days && days.map(day => {\n          return <PreviewDay key={day.date.format('MM-DD-YYYY')} day={day} simple={true} />\n        })}\n      </div>\n    </div>\n  );\n}\n \nexport default PreviewDays;","import React, { useContext } from 'react'\nimport { DataContext } from '../../store/contexts/dataContext'\nimport { FilterContext } from '../../store/contexts/filterContext'\n\n\nconst ActionTypeFilter = () => {\n\n  const { weights } = useContext(DataContext)\n  const { filterData, filterDispatch } = useContext(FilterContext)\n\n\n  var filters = []\n  if(weights){\n    weights.actionTypeArray.forEach(aType => {\n      filters.push({\n        id: aType.id,\n        name: aType.name\n      })\n    })\n  }else{\n    return null\n  }\n\n\n  const onCheck = (e) => {\n    filterDispatch({type: 'SET_ACTION_FILTER', actionType: e.target.id, value: e.target.checked})\n  }\n\n  const selectAll = (e) => {\n    filterDispatch({type: 'ALL_ACTION', value: true, actionTypes: weights.actionTypes})\n  }\n\n  const deSelectAll = (e) => {\n    filterDispatch({type: 'ALL_ACTION', value: false, actionTypes: weights.actionTypes})\n  }\n\n  return ( \n    <div className=\"mt-5\">\n      <p className=\"text-xl font-bold\">Filter Action Type</p>\n      <div className=\"flex flex-col\">\n        { filters.map(filt => {\n          return(\n            <div className=\"flex space-x-1\" key={filt.id}>\n              <input className=\"self-center form-checkbox text-darkGray\" id={filt.id} onChange={onCheck} checked={!filterData.actionFilters || filterData.actionFilters[filt.id] === undefined ? true : filterData.actionFilters[filt.id]} type=\"checkbox\" />\n              <label className=\"self-center\">{filt.name}</label>\n            </div>\n          )\n        })}\n      </div>\n      <div className=\"flex space-x-2\">\n        <button className=\"btn mt-2\" onClick={selectAll}>Select All</button>\n        <button className=\"btn mt-2\" onClick={deSelectAll}>De-select All</button>\n      </div>\n    </div>\n   );\n}\n \nexport default ActionTypeFilter;","import React, { useContext, useEffect, useState } from 'react'\nimport { FilterContext } from '../../store/contexts/filterContext'\n\n\nconst DayFilter = () => {\n\n  const { filterData, filterDispatch } = useContext(FilterContext)\n  const [value, setValue] = useState('1000000')\n\n  useEffect(() => {\n    if(filterData){\n      setValue(filterData.dayFilter)\n    }\n  }, [filterData])\n\n  const change = (e) => {\n    filterDispatch({type: 'SET_DAY_FILTER', value: e.target.value})\n  }\n\n  const filterTypes = filterData.dayFilters\n\n  return ( \n    <div className=\"mt-5\">\n      <p className=\"text-xl font-bold\">Filter Date</p>\n      <div>\n        { filterTypes.map(filt => {\n          return (\n            <div key={filt.id} className=\"flex space-x-1\">\n              <input className=\"self-center form-radio text-darkGray\" onChange={change} type=\"radio\" name={filt.filtName} value={filt.value} checked={value === filt.value}></input>\n              <label className=\"self-center\">{filt.name}</label>\n            </div>\n          )\n        })}\n      </div>\n    </div>\n   );\n}\n \nexport default DayFilter;","import React, { useContext } from 'react';\nimport { DataContext } from '../../store/contexts/dataContext';\nimport { FilterContext } from '../../store/contexts/filterContext';\n\n\n\nconst ImportanceFilters = () => {\n\n  const { weights } = useContext(DataContext)\n  const { filterDispatch, filterData } = useContext(FilterContext)\n  var filters = []\n\n\n  if(weights){\n    weights.importanceArray.forEach(importance => {\n      filters.push({\n        id: importance.id,\n        name: importance.name,\n        weight: importance.weight\n      })\n    })\n    filters = filters.sort((a,b) => {\n      return b.weight - a.weight\n    })\n  }else{\n    return null\n  }\n\n  const onCheck = (e) => {\n    filterDispatch({type: 'SET_IMPORTANCE_FILTER', importance: e.target.id, value: e.target.checked})\n  }\n\n  const selectAll = (e) => {\n    filterDispatch({type: 'ALL_IMPORTANCE', value: true, importances: weights.importanceTypes})\n  }\n\n  const deSelectAll = (e) => {\n    filterDispatch({type: 'ALL_IMPORTANCE', value: false, importances: weights.importanceTypes})\n  }\n\n\n  return ( \n    <div>\n      <p className=\"text-xl font-bold\">Filter Importance</p>\n      <div className=\"flex flex-col\">\n        { filters.map(filt => {\n          return(\n            <div className=\"flex space-x-1\" key={filt.id}>\n              <input className=\"self-center form-checkbox text-darkGray focus:outline-none\" id={filt.id} onChange={onCheck} checked={!filterData.importanceFilters || filterData.importanceFilters[filt.id] === undefined ? true : filterData.importanceFilters[filt.id]} type=\"checkbox\" />\n              <label className=\"self-center\">{filt.name}</label>\n            </div>\n          )\n        })}\n      </div>\n      <div className=\"flex space-x-2\">\n        <button className=\"btn mt-2\" onClick={selectAll}>Select All</button>\n        <button className=\"btn mt-2\" onClick={deSelectAll}>De-select All</button>\n      </div>\n    </div>\n   );\n}\n \nexport default ImportanceFilters;","import React, { useContext } from 'react'\nimport { DataContext } from '../../store/contexts/dataContext';\nimport { FilterContext } from '../../store/contexts/filterContext';\nimport ActionTypeFilter from './ActionTypeFilter';\nimport DayFilter from './DayFilter';\nimport ImportanceFilters from './ImportanceFilters';\n\n\nconst Filters = () => {\n\n  const { filterDispatch } = useContext(FilterContext)\n  const { weights } = useContext(DataContext)\n  const importances = weights ? weights.importanceTypes : {}\n  const actionTypes = weights ? weights.actionTypes : {}\n\n\n  const removeAllFilters = (e) => {\n    filterDispatch({type: 'ALL_IMPORTANCE', value: true, importances})\n    filterDispatch({type: 'ALL_ACTION', value: true, actionTypes})\n    filterDispatch({type: 'SET_DAY_FILTER', value: 'all'})\n  }\n\n  return ( \n    <div className=\"mb-10 p-2\">\n      <ImportanceFilters />\n      <DayFilter />\n      <ActionTypeFilter />\n      <button onClick={removeAllFilters} className=\"doneBtn mt-10\">Clear Filters</button>\n    </div>\n   );\n}\n \nexport default Filters;","\nexport const stateReducer = (state, action) => {\n  switch(action.type){\n    case 'TOGGLE_VIEW':\n      return {\n        ...state,\n        workingView: !state.workingView\n      }\n    case 'TOGGLE_FILTERS':\n      return {\n        ...state,\n        showFilters: !state.showFilters\n      }\n    default: \n      return state\n  }\n}","import React, { useReducer } from \"react\";\nimport { stateReducer } from '../reducers/stateReducer'\n\nexport const StateContext = React.createContext();\n\n\nexport const StateProvider = ({ children }) => {\n\n  const [stateStatus, stateDispatch] = useReducer(stateReducer, {\n    showFilters: true\n  });\n\n\n\n\n  return (\n    <StateContext.Provider value={{ ...stateStatus, stateDispatch }}>{children}</StateContext.Provider>\n  );\n};\n\n","import React, { useContext } from 'react';\nimport { DataContext } from '../../store/contexts/dataContext';\nimport { FbContext } from '../../store/contexts/fbContext';\nimport { DndProvider } from 'react-dnd'\nimport { HTML5Backend } from 'react-dnd-html5-backend'\nimport PreviewDays from './preview/PreviewDays';\nimport Filters from './Filters';\nimport { StateContext } from '../../store/contexts/stateContext';\n\nconst RightBar = () => {\n\n  const { FBuser } = useContext(FbContext)\n  const { allLoaded } = useContext(DataContext)\n  const { showFilters } = useContext(StateContext)\n\n  if(!FBuser || !allLoaded){\n    return null\n  }\n\n\n  return ( \n    <div className=\"col-span-3 max-h-screen\">\n      <div className=\"h-full\">\n        { showFilters ? \n          <Filters />\n          :\n          <DndProvider backend={HTML5Backend}>\n            <PreviewDays />\n          </DndProvider>\n        }\n      </div>\n    </div>\n   );\n}\n \nexport default RightBar;","import React from 'react'\nimport CenterColumn from './centerColumn/CenterColumn';\nimport LeftBar from './leftBar/LeftBar';\nimport RightBar from './rightBar/RightBar';\n\n\nconst WorkingView = () => {\n  return ( \n    <div className=\"max-h-screen grid grid-cols-12 h-screen pb-14\">\n      <LeftBar />\n      <CenterColumn />\n      <RightBar />\n    </div>\n   );\n}\n \nexport default WorkingView;","import React, { useContext } from 'react'\nimport { ConfigContext } from '../store/contexts/configContext'\nimport PlanningView from './PlanningView'\nimport WorkingView from './WorkingView'\nimport { Switch, Route, Redirect } from 'react-router-dom'\n\n\n\nconst Main = () => {\n\n  const { config } = useContext(ConfigContext)\n  \n  if(config && config.downForMaintenance === true){\n    return(\n      <p className=\"text-3xl\">Down for maintenance</p>\n    )\n  }\n\n  return ( \n    <div className=\"\">\n      <Switch>\n        <Route exact path='/' component={WorkingView} />\n        <Route exact path='/planning' component={PlanningView} />\n        <Route exact path='/working' component={WorkingView} />\n        <Route path='/'> <Redirect to=\"/\" /> </Route>\n      </Switch>\n    </div>\n   );\n}\n \nexport default Main;","import React from 'react'\nimport TextareaAutosize from 'react-textarea-autosize';\n\n\nconst EditDescription = ({value, change}) => {\n\n  return ( \n    <div className=\"mt-2\">\n      <p>Description</p>\n      <TextareaAutosize id='description' onChange={change} className={'focus:outline-none border-2 border-black '} value={value}></TextareaAutosize>\n    </div>\n   );\n}\n \nexport default EditDescription;","import React, { useContext } from 'react'\nimport { DataContext } from '../../../store/contexts/dataContext';\n\n\nconst EditImportance = ({value, change}) => {\n\n  const { weights } = useContext(DataContext)\n\n  var importances = weights ? weights.importanceArray : null\n  if(importances){\n    importances = importances.sort((a,b) => {\n      return b.weight - a.weight\n    })\n  }\n\n  return ( \n    <div className=\"mt-2\">\n      <p>Importance</p>\n      <select className='border-2 border-black' id='importance' onChange={change} value={value}>\n      { importances && importances.map(importance => {\n        return(\n          <option key={importance.id} value={importance.id}>{importance.name}</option>\n        )\n      })}\n      </select>\n    </div>\n   );\n}\n \nexport default EditImportance;","import React from 'react'\n\n\nconst EditName = ({value, change}) => {\n  return ( \n    <div>\n      <p>Name</p>\n      <input className='formInput' onChange={change} id='name' value={value}></input>\n    </div>\n   );\n}\n \nexport default EditName;","import React, { useContext, useState, useEffect } from 'react'\nimport EditDescription from './EditDescription';\nimport EditImportance from './EditImportance';\nimport EditName from './EditName';\nimport { deleteProject, updateProject, addProject } from '../../../store/actions'\nimport ItemCardContainer from '../../itemCards/ItemCardContainer';\nimport ExitIcon from '../../icons/ExitIcon';\nimport PlusIcon from '../../icons/PlusIcon';\nimport { ModalContext } from '../../../store/contexts/modalContext';\nimport { DataContext } from '../../../store/contexts/dataContext';\nimport useCompletedItems from '../../../UseCompletedItems'\n\nconst ProjectEditModal = () => {\n\n\n  const { projects } = useContext(DataContext)\n  const { modalStatus, modalDispatch } = useContext(ModalContext)\n\n  const [newProject, setNewProject] = useState({\n    name: '',\n    description:'',\n    importance: 3\n  })\n\n  const [changed, setChanged] = useState(false)\n\n  const [isNew, setNew] = useState(true)\n\n  const itemsInProj = newProject.items ? newProject.items.sort((a,b) => {\n    return b.score - a.score\n  }) : null\n\n  const doneItems = useCompletedItems(modalStatus.projectID)\n\n  useEffect(() => {\n    if(modalStatus && modalStatus.projectID){\n      if(projects){\n        setNewProject(projects.filter(proj => {return proj.id === modalStatus.projectID})[0])\n        setNew(false)\n      }else{\n        setNew(true)\n      }\n    }\n  }, [modalStatus, projects])\n\n\n  useEffect(() => {\n    if(newProject.name === ''){\n      setChanged(false)\n    }else{\n      setChanged(true)\n    }\n  },[newProject.name])\n\n\n\n  const change = (e) => {\n    setNewProject({\n      ...newProject,\n      [e.target.id]: e.target.value\n    })\n  }\n\n  const deleteClicked = (e) => {\n    if(window.confirm('Are you sure you want to delete? Deleting this project will also delete all of your actions under the project.') === true){\n      deleteProject(newProject.id)\n      modalDispatch({type:'HIDE_PROJECT_SHEET'})\n    }\n  }\n\n  const doneClick = (e) => {\n    if(!changed) return\n    updateProject(newProject)\n    modalDispatch({type:'HIDE_PROJECT_SHEET'})\n  }\n\n  const addClick = (e) => {\n    if(!changed) return\n    addProject(newProject)\n    modalDispatch({type:'HIDE_PROJECT_SHEET'})\n  }\n\n  const exitClick = (e) => {\n    modalDispatch({type:'HIDE_PROJECT_SHEET'})\n  }\n\n  const addItem = (e) => {\n    modalDispatch({type: 'SHOW_SHEET', itemProjectID: newProject.id})\n  }\n\n\n  return ( \n    <div className=\"relative overflow-scroll bg-white h-5/6 w-1/2 mt-10 p-5\">\n      <div onClick={exitClick} className=\"h-10 w-10 absolute top-0 right-0\">\n        <ExitIcon />\n      </div>\n      { isNew ? (\n        <p className=\"text-xl font-bold\">New Project</p>\n      ):(\n        <p className=\"text-xl font-bold\">Edit Project</p>\n      )}\n      <EditName value={newProject.name} change={change} />\n      <EditDescription value={newProject.description} change={change} />\n      <EditImportance value={newProject.importance} change={change} />\n      {\n        isNew ? (\n          <div className=\"flex space-x-2 mt-5\">\n            <button onClick={addClick} className={changed ? \"doneBtn\" : 'inactiveBtn'}>Add</button>\n          </div>\n        ) : (\n          <div>\n            <div className=\"flex space-x-2 mt-5\">\n              <button onClick={doneClick} className={changed ? \"doneBtn\" : \"inactiveBtn\"}>Save</button>\n              <button onClick={deleteClicked} className=\"importantBtn\">Delete</button>\n            </div>\n            <div>\n            </div>\n          </div>\n        )\n      }\n      { isNew ? null : (\n        <div>\n        <div>\n          <div className=\"flex space-x-1 mt-10\">\n            <p className=\"text-xl font-bold self-center\">ToDos In Project</p>\n            <div onClick={addItem} className=\"w-7 h-7 cursor-pointer self-center\">\n              <PlusIcon />\n            </div>\n          </div>\n          { itemsInProj && itemsInProj.map(item => {\n            return(\n              <ItemCardContainer showProject={false} key={item.id} item={item} />\n            )\n          })}\n        </div>\n\n        <div>\n          <p className=\"text-xl font-bold self-center\">Recently Completed</p>\n          { doneItems && doneItems.map(item => {\n            return(\n              <ItemCardContainer showProject={false} key={item.id} item={item} done={true} />\n            )\n          })}\n        </div>\n\n        </div>\n\n\n      )}\n    </div>\n   );\n}\n \nexport default ProjectEditModal;","import { useContext, useState, useEffect } from 'react';\nimport { CompletedItemsContext } from './store/contexts/completedItemsContext';\nimport  moment from 'moment'\n\n\nexport default function useHistory(projectID) {\n\n  const [items, setItems] = useState([])\n  const { completedItems } = useContext(CompletedItemsContext)\n\n\n  useEffect(() => {\n    const newItems = completedItems.filter(item => {\n      return item.projectID === projectID\n    }).map(item => {\n      return {...item, score:item.scoreOnComplete, expectedUpdate: item.completedDate}\n    }).sort((a,b) => {\n      if(moment.unix(a.completedDate.seconds).isBefore(moment.unix(b.completedDate.seconds))){\n        return 1\n      }else if(moment.unix(b.completedDate.seconds).isBefore(moment.unix(a.completedDate.seconds))){\n        return -1\n      }\n      return 0\n    }).slice(0, 5)\n    setItems(newItems)\n  }, [completedItems,projectID])\n\n\n  return items;\n}","import React, { useContext } from 'react'\nimport { ModalContext } from '../../../store/contexts/modalContext'\nimport ProjectEditModal from './ProjectEditModal'\n\nconst ProjectEditSheet = () => {\n\n  const { modalStatus, modalDispatch } = useContext(ModalContext)\n\n  const onClick = (e) => {\n    if(e.target.id === 'project-bg'){\n      modalDispatch({type:'HIDE_PROJECT_SHEET'})\n    }\n  }\n\n  if(modalStatus.showProjectSheet === false){\n    return null\n  }\n\n\n  return ( \n    <div onClick={onClick} id=\"project-bg\" className='flex justify-center w-screen h-screen bg-gray-400 bg-opacity-50 fixed inset-0'>\n      <ProjectEditModal />\n    </div>\n   );\n}\n \nexport default ProjectEditSheet;","import { useEffect, useContext } from 'react'\nimport { ModalContext } from '../store/contexts/modalContext'\nimport { completeItem } from '../store/actions'\nimport { DataContext } from '../store/contexts/dataContext'\nimport { useHistory, useLocation } from 'react-router-dom'\nimport { StateContext } from '../store/contexts/stateContext'\n\nconst EscDetect = () => {\n\n  const { modalStatus, modalDispatch } = useContext(ModalContext)\n  const { items, weights } = useContext(DataContext)\n  const { stateDispatch } = useContext(StateContext)\n  const history = useHistory()\n  const loc = useLocation()\n\n  useEffect(() => {\n\n    const keyEvent = (e) => {\n      if(e.code === \"Escape\"){\n        if(modalStatus.showSheet){\n          modalDispatch({type:'HIDE_SHEET'})\n        }else if(modalStatus.showProjectSheet){\n          modalDispatch({type:'HIDE_PROJECT_SHEET'})\n        }\n      }\n    }\n\n    const keyDownEvent = (e) => {\n      if(document.activeElement.nodeName === 'TEXTAREA' || document.activeElement.nodeName === \"INPUT\") return;\n      if(e.code === \"KeyD\" && modalStatus.itemID){\n        completeItem(modalStatus.itemID, items, weights)\n        modalDispatch({type:'HIDE_SHEET'})\n      }\n      if(e.code === \"KeyQ\"){\n        if(loc.pathname === '/' || loc.pathname === '/working'){\n          history.push('/planning')\n        }else{\n          history.push('/working')\n        }\n      }\n      if(e.code === 'KeyP' && modalStatus.itemID){\n        const item = items.filter(i => {\n          return i.id === modalStatus.itemID\n        })[0]\n        modalDispatch({type: 'SHOW_PROJECT_SHEET', projectID: item.projectID})\n        modalDispatch({type: 'HIDE_SHEET'})\n      }\n      if(e.code === \"KeyN\"){\n        if(modalStatus.projectID){\n          modalDispatch({type:'SHOW_SHEET',itemProjectID: modalStatus.projectID})\n        }else{\n          modalDispatch({type:'SHOW_SHEET'}) \n        }\n      }\n      if(e.code === \"KeyW\"){\n        stateDispatch({type: 'TOGGLE_FILTERS'})\n      }\n\n    }\n\n    document.addEventListener(\"keyup\", keyEvent);\n    document.addEventListener(\"keydown\", keyDownEvent);\n\n    return(() => {\n      document.removeEventListener(\"keyup\", keyEvent);\n      document.removeEventListener(\"keydown\", keyDownEvent);\n    })\n  })\n\n  return null\n}\n \nexport default EscDetect;","import React, { useContext } from \"react\";\nimport firebase from '../../config/fbConfig'\nimport { useCollectionData } from 'react-firebase-hooks/firestore';\nimport { FbContext } from \"./fbContext\";\n\n\nexport const ItemsContext = React.createContext();\n\n\nexport const ItemsProvider = ({ children }) => {\n\n  const { FBuser } = useContext(FbContext)\n  const userID = FBuser ? FBuser.uid : null\n\n\n  const [items, itemsLoading] = useCollectionData(firebase.firestore().collection('users/' + userID + '/items').where('deleted','==',false).where('completed','==',false),{\n    idField: 'id'\n  })\n\n\n\n\n  return (\n    <ItemsContext.Provider value={{ items, itemsLoading }}>{children}</ItemsContext.Provider>\n  );\n};\n\n","import React, { useContext } from \"react\";\nimport firebase from '../../config/fbConfig'\nimport { useCollectionData } from 'react-firebase-hooks/firestore';\nimport { FbContext } from \"./fbContext\";\n\n\nexport const OneOffsContext = React.createContext();\n\n\nexport const OneOffsProvider = ({ children }) => {\n\n  const { FBuser } = useContext(FbContext)\n  const userID = FBuser ? FBuser.uid : null\n\n\n  const [oneOffs, oneOffsLoading] = useCollectionData(firebase.firestore().collection('users/'+ userID +'/oneOffs').where('done','==',false), {\n    idField: 'id'\n  });\n\n\n\n  return (\n    <OneOffsContext.Provider value={{ oneOffs, oneOffsLoading }}>{children}</OneOffsContext.Provider>\n  );\n};\n\n","import React, { useContext } from \"react\";\nimport firebase from '../../config/fbConfig'\nimport { useCollectionData } from 'react-firebase-hooks/firestore';\nimport { FbContext } from \"./fbContext\";\n\n\nexport const ProjectsContext = React.createContext();\n\n\nexport const ProjectsProvider = ({ children }) => {\n\n  const { FBuser } = useContext(FbContext)\n  const userID = FBuser ? FBuser.uid : null\n\n\n  const [projects, projectsLoading] = useCollectionData(firebase.firestore().collection('users/' + userID + '/projects').where('deleted','==',false),{\n    idField: 'id'\n  })\n\n\n\n  return (\n    <ProjectsContext.Provider value={{ projects, projectsLoading }}>{children}</ProjectsContext.Provider>\n  );\n};\n\n","import React, { useContext } from \"react\";\nimport firebase from '../../config/fbConfig'\nimport { useDocumentData } from 'react-firebase-hooks/firestore';\nimport { FbContext } from \"./fbContext\";\n\n\nexport const WeightsContext = React.createContext();\n\n\nexport const WeightsProvider = ({ children }) => {\n\n  const { FBuser } = useContext(FbContext)\n  const userID = FBuser ? FBuser.uid : null\n\n\n  const [userData, weightsLoading] = useDocumentData(firebase.firestore().collection('users').doc(\"/\" + userID))\n\n  const actionTypes = userData && userData.actionTypes ? userData.actionTypes : null;\n  const dayDrop = userData && userData.dayDrop ? userData.dayDrop : null;\n  const importanceTypes = userData && userData.importanceTypes ? userData.importanceTypes : null;\n  const oneOff = userData && userData.oneOff ? userData.oneOff : null;\n  const currentUserScore = userData && userData.currentScore !== null ? userData.currentScore : null;\n\n\n  const weights = actionTypes && dayDrop && importanceTypes && oneOff ? {\n    actionTypes,\n    dayDrop,\n    importanceTypes,\n    oneOff,\n    currentUserScore\n  } : null\n\n\n  return (\n    <WeightsContext.Provider value={{ weights, weightsLoading }}>{children}</WeightsContext.Provider>\n  );\n};\n\n","import moment from 'moment';\n\n\n\nexport const hydrateData = (items, weights, projects, oneOffs) => {\n\n  items = items ? items.filter(item => {\n    if(item.completed === false && item.deleted === false){\n      return true\n    }\n    return false\n  }) : null\n\n  const newWeights = weights ? hydrateWeights(weights) : null\n  const newItems = items && newWeights && projects ? hydrateItems(items, newWeights, projects) : null\n  const newProjects = newItems && projects ? hydrateProjects(newItems, projects) : null\n\n\n  var totalScore = addScores(newItems)\n\n  if(oneOffs){\n    oneOffs.forEach(oneOff => {\n      totalScore += weights.oneOff\n    })\n  }\n\n  const allDataPulled = items && weights && projects && oneOffs ? true : false\n\n  // currentItems = items\n  // currentWeights = weights\n  // currentProjects = projects\n\n  return {items: newItems, weights: newWeights, projects: newProjects, totalScore, allDataPulled}\n}\n\n\n\nconst addScores = (itemsToAdd) => {\n  if(itemsToAdd === null) return 0\n  var score = 0\n  itemsToAdd.forEach(item => {\n    score += item.score\n  })\n  return score\n}\n\n\nconst hydrateProjects = (items, projects) => {\n  const newProjects = projects.map(proj => {\n    const itemsInProj = itemsInProject(items, proj)\n    var projScore = 0;\n    itemsInProj.forEach(item => projScore += item.score)\n    return {...proj, totalScore: projScore, items: itemsInProj}\n  })\n  return newProjects\n}\n\nconst itemsInProject = (items, project) => {\n  if(project && items){\n    return items.filter(item => {\n      return item.projectID === project.id\n    })\n  }else{\n    return null\n  }\n}\n\nconst hydrateWeights = (weights) => {\n  weights.importanceArray = importanceArray(weights.importanceTypes)\n  weights.actionTypeArray = actionTypeArray(weights.actionTypes)\n  return weights\n}\n\n\nconst importanceArray = (importanceTypes) => {\n  const keys = Object.keys(importanceTypes)\n  var importanceArray = []\n  for (const key of keys) {\n    importanceArray.push(importanceTypes[key])\n  }\n  importanceArray = importanceArray.sort((a,b) => {\n    return a.id - b.id\n  })\n  \n  return importanceArray\n}\n\nconst actionTypeArray = (actionTypes) => {\n  const keys = Object.keys(actionTypes)\n  var actionTypeArray = []\n  for(const key of keys){\n    actionTypeArray.push(actionTypes[key])\n  }\n  actionTypeArray = actionTypeArray.sort((a,b) => {\n    return a.id - b.id\n  })\n  return actionTypeArray\n}\n\n\n\nconst hydrateItems = (items, weights, projects) => {\n  if(!items || !weights || !projects) return null\n  for(var i = 0; i < items.length; i++){\n    items[i] = hydrateItem(items[i], weights, projects)\n  }\n  return items\n}\n\n\n\nconst hydrateItem = (item, weights, projects) =>{\n\n\n  if(weights && item && projects){\n    const project = projects.filter(proj => {\n      return proj.id === item.projectID\n    })[0]\n\n    const itemDeleted = project ? false : true;\n    if(itemDeleted) return null\n\n    const importance = weights.importanceArray.filter(iType => {\n      return iType.id === project.importance\n    })[0]\n\n    const actionType = weights.actionTypeArray.filter(aType => {\n      return aType.id === item.actionType\n    })[0]\n\n    const daysTo = weekDaysBetween(item.expectedUpdate)\n    const score = item.expectedUpdate ? Math.max(0,(1 * importance.weight * actionType.weight) - (daysTo * weights.dayDrop)) : 0;\n\n\n    const colorClass = itemColorClass(item)\n  \n    return {...item, deleted: itemDeleted, importanceName: importance.name, importanceWeight: importance.weight, actionTypeName: actionType.name, actionTypeWeight: actionType.weight, daysTo, score, colorClass, project, dayDrop: weights.dayDrop}\n    \n  }\n  return item\n}\n\n\nconst weekDaysBetween = (timestamp) => {\n  if(timestamp === null) return 0;\n  const expectedUpdate = moment.unix(timestamp.seconds).startOf('days')\n  const now = moment().startOf('days');\n  var end = moment(expectedUpdate).startOf('days')\n  var start = moment(now).startOf('days')\n  var multiplier = 1\n  const dailyInfo = [false, true, true, true, true, true, false]\n  let totalDays = 0;\n\n  if(expectedUpdate.isSame(now)){\n    return 0;\n  }\n  if(expectedUpdate.isBefore(now)){\n    start = moment(expectedUpdate)\n    end = moment(now)\n    multiplier = -1;\n  }\n\n  while(!start.isSame(end)){\n    start.add(1,'d')\n    if(dailyInfo[start.day()]){\n      totalDays++;\n    }\n  }\n\n  return totalDays * multiplier\n\n}\n\nconst itemColorClass = (item) => {\n  if(item.expectedUpdate === null) return 'bg-white'\n  const now = moment().startOf('day');\n  const expectedUpdate = moment.unix(item.expectedUpdate.seconds).startOf('day')\n\n  if(expectedUpdate.isBefore(now) && item.actionType !== 5 && item.actionType !== 6){\n    return 'bg-overdue text-white'\n  }else if(expectedUpdate.isSame(now) && (item.actionType === 1 || item.actionType === 4)){\n    return 'bg-doToday text-white'\n  }else if(expectedUpdate.isSame(now) && (item.actionType === 2 || item.actionType === 3)){\n    return 'bg-notDoToday text-white'\n  }else if(item.actionType === 1 || item.actionType === 4){\n    return 'bg-doLater'\n  }else if(item.actionType === 2 || item.actionType === 3){\n    return 'bg-notDoLater'\n  }\n\n  return 'bg-neverDo'\n\n}","import React, { useEffect, useContext } from 'react'\nimport { DataContext } from '../store/contexts/dataContext'\nimport { hydrateData } from '../store/hydrateData'\nimport { ItemsContext } from '../store/contexts/itemsContext'\nimport { OneOffsContext } from '../store/contexts/oneOffsContext'\nimport { ProjectsContext } from '../store/contexts/projectsContext'\nimport { WeightsContext } from '../store/contexts/weightsContext'\n\n\nconst DataHydrator = () => {\n\n  const { items, itemsLoading } = useContext(ItemsContext)\n  const { oneOffs, oneOffsLoading } = useContext(OneOffsContext)\n  const { projects, projectsLoading } = useContext(ProjectsContext)\n  const { weights, weightsLoading } = useContext(WeightsContext)\n  const { dataDispatch } = useContext(DataContext)\n\n  const allLoaded = !itemsLoading && !oneOffsLoading && !projectsLoading && !weightsLoading ? true : false;\n\n\n  useEffect(() => {\n    if(allLoaded){\n      console.log('data effect')\n      dataDispatch({type: 'SET_DATA', data: hydrateData(items, weights, projects, oneOffs)})\n    }\n  }, [items, projects, weights, oneOffs, dataDispatch, allLoaded])\n\n\n  useEffect(() => {\n    console.log('oneoff effect')\n    dataDispatch({type: 'SET_ONE_OFFS', oneOffs: oneOffs})\n  },[dataDispatch, oneOffs])\n\n  useEffect(() => {\n    console.log('all loaded effect')\n    dataDispatch({type: 'SET_ALL_LOADED', allLoaded: allLoaded})\n  }, [allLoaded, dataDispatch])\n\n\n\n  return ( \n    <div></div>\n   );\n}\n \nexport default DataHydrator;","import React, { useContext, useState, useEffect } from 'react'\nimport { FilterContext } from '../../store/contexts/filterContext'\nimport useMetrics from '../../UseMetrics'\nimport moment from 'moment'\nimport { DataContext } from '../../store/contexts/dataContext'\nimport { useLocation } from 'react-router-dom'\n\n\nconst UpcomingWork = () => {\n\n  const { todaysScore, tomorrowsScore, thisWeeksScore, filteredScore } = useMetrics()\n  const { filterData, filterDispatch } = useContext(FilterContext)\n  const [weekDays, setWeekDays] = useState(\"0\")\n  const { weights } = useContext(DataContext)\n  const importances = weights ? weights.importanceTypes : {}\n  const actionTypes = weights ? weights.actionTypes : {}\n  const loc = useLocation()\n\n  const isPlanning = () => {\n    if(loc.pathname === '/planning') return true;\n    return false\n  }\n\n  useEffect(() => {\n    var days = 0;\n    const today = moment()\n    while(today.day() !== 0){\n      today.add(1,'day')\n      if(today.day() !== 0 && today.day()  !== 6){\n        days++\n      }\n    }\n    setWeekDays(days.toString())\n\n  }, [])\n\n\n  const todayClick = (e) => {\n    if(isPlanning()) return\n    if(filterData.dayFilter === \"0\"){\n      filterDispatch({type: 'SET_DAY_FILTER', value: \"all\"})\n    }else{\n      filterDispatch({type: 'SET_DAY_FILTER', value: \"0\"})\n    }\n  }\n\n  const tomorrowClick = (e) => {\n    if(isPlanning()) return\n    if(filterData.dayFilter === \"1\"){\n      filterDispatch({type: 'SET_DAY_FILTER', value: \"all\"})\n    }else{\n      filterDispatch({type: 'SET_DAY_FILTER', value: \"1\"})\n    }\n  }\n\n  const weekClick = (e) => {\n    if(isPlanning()) return\n    if(filterData.dayFilter === weekDays.toString()){\n      filterDispatch({type: 'SET_DAY_FILTER', value: \"all\"})\n    }else{\n      filterDispatch({type: 'SET_DAY_FILTER', value: weekDays.toString()})\n    }\n  }\n\n  const totalClick = (e) => {\n    if(isPlanning()) return\n    filterDispatch({type: 'ALL_IMPORTANCE', value: true, importances})\n    filterDispatch({type: 'ALL_ACTION', value: true, actionTypes})\n    filterDispatch({type: 'SET_DAY_FILTER', value: 'all'})\n  }\n\n\n  const todayColorClass = filterData.dayFilter === \"0\" ? 'text-yellow-300' : 'text-white'\n  const tomorrowColorClass = filterData.dayFilter === \"1\" ? 'text-yellow-300' : 'text-white'\n  const weekColorClass = filterData.dayFilter === weekDays ? 'text-yellow-300' : 'text-white'\n\n  return ( \n    <div className=\"grid grid-cols-4 text-white\">\n      <div className={\"cursor-pointer\"} onClick={totalClick}>\n        <p className=\"text-center text-2xl\">{filteredScore.toFixed(2)}</p>\n        <p className=\"text-center\">Filtered View</p>\n      </div>\n      <div className={\"cursor-pointer \" + todayColorClass} onClick={todayClick}>\n        <p className=\"text-center text-2xl\">{todaysScore.toFixed(2)}</p>\n        <p className=\"text-center\">Today</p>\n      </div>\n      <div className={\"cursor-pointer \" + tomorrowColorClass} onClick={tomorrowClick}>\n        <p className=\"text-center text-2xl\">{tomorrowsScore.toFixed(2)}</p>\n        <p className=\"text-center\">Tomorrow</p>\n      </div>\n      <div className={\"cursor-pointer \" + weekColorClass} onClick={weekClick}>\n        <p className=\"text-center text-2xl\">{thisWeeksScore.toFixed(2)}</p>\n        <p className=\"text-center\">Rest of Week</p>\n      </div>\n    </div>\n   );\n}\n \nexport default UpcomingWork;","import React, { useContext } from 'react'\nimport { DataContext } from '../../store/contexts/dataContext'\nimport { FbContext } from '../../store/contexts/fbContext'\nimport { ModalContext } from '../../store/contexts/modalContext'\n\nconst AddItem = () => {\n\n  const { FBuser } = useContext(FbContext)\n  const { modalDispatch } = useContext(ModalContext)\n  const { projects } = useContext(DataContext)\n\n  var sortedProjects = []\n  if(projects){\n    sortedProjects  = projects.sort((a,b) => {\n      return b.totalScore - a.totalScore\n    })\n  }\n\n\n  // const addItem = () => {\n  //   modalDispatch({type:'SHOW_SHEET'})\n  // }\n\n  const changed = (e) => {\n    console.log(e.target.value)\n    modalDispatch({type: 'SHOW_SHEET', itemProjectID: e.target.value})\n  }\n\n\n  if(FBuser === null) return false\n\n  return ( \n    // <button className=\"doneBtn\" onClick={addItem}>Add ToDo</button>\n    <select autoFocus className='border-2 border-none pl-5 w-32 bg-doToday rounded-md text-white' id='projectID' onChange={changed} value=''>\n      <option disabled value={''}>Add ToDo</option>\n      { sortedProjects && sortedProjects.map(project => {\n        return <option key={project.id} value={project.id}>{project.name}</option> \n      })}\n    </select>\n   );\n}\n \nexport default AddItem;","import React from 'react'\n\n\nconst CalendarIcon = () => {\n  return ( \n    <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6 text-white\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z\" />\n    </svg>\n   );\n}\n \nexport default CalendarIcon;","import React from 'react'\n\n\nconst ListIcon = () => {\n  return ( \n    <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6 text-white\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M4 6h16M4 10h16M4 14h16M4 18h16\" />\n    </svg>\n   );\n}\n \nexport default ListIcon;","import React from 'react'\nimport { useLocation, NavLink } from 'react-router-dom'\nimport CalendarIcon from '../icons/CalendarIcon'\nimport ListIcon from '../icons/ListIcon'\n\n\nconst ToggleView = () => {\n\n  const loc = useLocation()\n\n\n  const to = () => {\n    if(loc.pathname === '/working' || loc.pathname === '/'){\n      return \"/planning\"\n    }else{\n      return \"/working\"\n    }\n  }\n\n  if(loc.pathname === '/planning'){\n    return ( \n      <NavLink className=\"\" to={to}><ListIcon /></NavLink>\n     );\n  }\n\n  return ( \n    <NavLink className=\"\" to={to}><CalendarIcon /></NavLink>\n   );\n}\n \nexport default ToggleView;","import React from 'react'\n\n\nconst LogoutIcon = ({click}) => {\n  return ( \n    <svg onClick={click} xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6 text-white cursor-pointer\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1\" />\n    </svg>\n   );\n}\n \nexport default LogoutIcon;","import React from 'react';\nimport LogoutIcon from '../icons/LogoutIcon';\nimport { logout } from '../../store/actions'\n\nconst Logout = () => {\n\n  const logoutClick = (e) => {\n    logout();\n  }\n\n  return ( \n    <LogoutIcon click={logoutClick} />\n   );\n}\n \nexport default Logout;","import React, { useContext } from 'react'\nimport UpcomingWork from '../centerColumn/UpcomingWork';\nimport AddItem from '../leftBar/AddItem';\nimport ToggleView from './ToggleView';\nimport { useLocation } from 'react-router-dom'\nimport { StateContext } from '../../store/contexts/stateContext';\nimport Logout from '../auth/Logout';\n\n\nconst LoggedInNav = () => {\n\n  const { showFilters, stateDispatch } = useContext(StateContext)\n  const loc = useLocation()\n\n  const toggleFilter = (e) => {\n    stateDispatch({type: 'TOGGLE_FILTERS'})\n  }\n\n  return ( \n    <div className=\"grid grid-cols-12\">\n      <div className=\"flex col-span-3 self-center justify-self-start space-x-4\">\n        <Logout />\n        <ToggleView />\n        <AddItem />\n      </div>\n      <div className=\"col-span-6\">\n        <UpcomingWork />\n      </div>\n      <div className=\"col-span-3 self-center justify-self-end\">\n        { loc.pathname !== \"/planning\" ? \n          <button className=\"btn\" onClick={toggleFilter}>{showFilters ? \"Preview\" : \"Filter\"}</button>\n        : null\n        }\n      </div>\n    </div>\n   );\n}\n \nexport default LoggedInNav;","import React, { useState } from 'react'\nimport { login } from '../../store/actions'\n\n\nconst Login = () => {\n\n  const [creds, setCreds] = useState({\n    email: '',\n    pass: ''\n  })\n\n  const submit = (e) => {\n    e.preventDefault();\n    login(creds.email, creds.pass)\n    setCreds({\n      email: '',\n      pass: ''\n    })\n  }\n\n  const handleChange = (e) => {\n    setCreds({\n      ...creds,\n      [e.target.id] : e.target.value\n    })\n  }\n\n  return ( \n    <div>\n      <form onSubmit={submit}>\n        <input onChange={handleChange} value={creds.email} id=\"email\" className=\"formInput\" type=\"email\"></input>\n        <input onChange={handleChange} value={creds.pass} id=\"pass\" className=\"formInput\" type=\"password\"></input>\n        <button className=\"btn\" type=\"submit\">Login</button>\n      </form>\n    </div>\n   );\n}\n \nexport default Login;","import React from 'react'\nimport Login from '../auth/Login'\n\nconst LoggedOutNav = () => {\n  return ( \n    <div className=\"\">\n      <Login />\n    </div>\n   );\n}\n \nexport default LoggedOutNav;","import React, { useContext } from 'react'\nimport { FbContext } from '../../store/contexts/fbContext';\nimport LoggedInNav from './LoggedInNav'\nimport LoggedOutNav from './LoggedOutNav';\n\nconst Nav = () => {\n\nconst { FBuser } = useContext(FbContext)\n\n\n  return ( \n    <div className=\"\">\n      <div className=\"bg-darkGray w-full h-14 px-2\">\n        { FBuser ?\n          <LoggedInNav />\n          :\n          <LoggedOutNav />\n        }\n      </div>\n    </div>\n   );\n}\n \nexport default Nav;","import EditSheet from \"./components/modals/EditSheet/EditSheet\";\nimport { FbProvider } from './store/contexts/fbContext.js'\nimport Main from \"./components/Main\";\nimport ProjectEditSheet from \"./components/modals/projectEdit/ProjectEditSheet\";\nimport EscDetect from \"./components/EscDetect\";\nimport { FilterContextProvider } from \"./store/contexts/filterContext\";\nimport { ModalProvider } from \"./store/contexts/modalContext\";\nimport { DataContextProvider } from \"./store/contexts/dataContext\";\nimport { ItemsProvider } from \"./store/contexts/itemsContext\";\nimport { OneOffsProvider } from \"./store/contexts/oneOffsContext\";\nimport { ProjectsProvider } from \"./store/contexts/projectsContext\";\nimport { WeightsProvider } from \"./store/contexts/weightsContext\";\nimport { HistoryProvider } from \"./store/contexts/historyContext\";\nimport { ConfigProvider } from \"./store/contexts/configContext\";\nimport DataHydrator from \"./components/DataHydrator\";\nimport { CompltetedItemsProvider } from \"./store/contexts/completedItemsContext\";\nimport Nav from \"./components/nav/Nav\";\nimport { StateProvider } from \"./store/contexts/stateContext\";\nimport { HashRouter } from 'react-router-dom'\n\n\n\n\nconst App = () => {\n  return (\n    <FbProvider>\n      <FilterContextProvider>\n        <ModalProvider>\n          <DataContextProvider>\n            <ItemsProvider>\n              <OneOffsProvider>\n                <ProjectsProvider>\n                  <WeightsProvider>\n                    <HistoryProvider>\n                      <ConfigProvider>\n                        <CompltetedItemsProvider>\n                          <StateProvider>\n                            <DataHydrator />\n                            <div className=\"App max-h-screen\">\n                              <HashRouter basename=\"/\">\n                                <Nav />\n                                <Main />\n                                <EscDetect />\n                              </HashRouter>\n                              <ProjectEditSheet />\n                              <EditSheet />\n                            </div>\n                          </StateProvider>\n                        </CompltetedItemsProvider>\n                      </ConfigProvider>\n                    </HistoryProvider>\n                  </WeightsProvider>\n                </ProjectsProvider>\n              </OneOffsProvider>\n            </ItemsProvider>\n          </DataContextProvider>\n        </ModalProvider>\n      </FilterContextProvider>\n    </FbProvider>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './styles/tailwind.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n\n"],"sourceRoot":""}