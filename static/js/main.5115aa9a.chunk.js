(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{183:function(e,t,c){"use strict";c.r(t);var n=c(2),a=c.n(n),r=c(25),o=c.n(r),i=(c(83),c(5)),s=c(3),l=function(e,t){switch(t.type){case"SHOW_SHEET":return Object(s.a)(Object(s.a)({},e),{},{showSheet:!0,itemID:t.itemID,itemProjectID:t.itemProjectID});case"SHOW_PROJECT_SHEET":return Object(s.a)(Object(s.a)({},e),{},{showProjectSheet:!0,projectID:t.projectID});case"HIDE_SHEET":return Object(s.a)(Object(s.a)({},e),{},{showSheet:!1,itemID:null,itemProjectID:null});case"HIDE_PROJECT_SHEET":return Object(s.a)(Object(s.a)({},e),{},{showProjectSheet:!1,projectID:null});case"TOGGLE_CHART":return Object(s.a)(Object(s.a)({},e),{},{showChart:!e.showChart});default:return e}},d=c(0),u=a.a.createContext(),j=function(e){var t=e.children,c=Object(n.useReducer)(l,{showSheet:!1,showProjectSheet:!1,itemID:null,showChart:!1}),a=Object(i.a)(c,2),r=a[0],o=a[1];return Object(d.jsx)(u.Provider,{value:{modalStatus:r,modalDispatch:o},children:t})},f=c(12),b=c(32),p=function(e){var t=e.value,c=e.change;return Object(d.jsxs)("div",{className:"mt-2",children:[Object(d.jsx)("p",{children:"Action"}),Object(d.jsx)(b.a,{id:"action",onChange:c,className:"focus:outline-none border-2 border-black ",value:t})]})},O=function(e,t){switch(t.type){case"SET_DATA":return Object(s.a)(Object(s.a)({},e),{},{items:t.data.items,projects:t.data.projects,weights:t.data.weights,totalScore:t.data.totalScore,todaysScore:t.data.todaysScore,tomorrowsScore:t.data.tomorrowsScore,thisWeeksScore:t.data.thisWeeksScore,allDataPulled:t.data.allDataPulled});case"SET_HISTORY":return Object(s.a)(Object(s.a)({},e),{},{history:t.history});case"SET_ONE_OFFS":return Object(s.a)(Object(s.a)({},e),{},{oneOffs:t.oneOffs});case"SET_ALL_LOADED":return Object(s.a)(Object(s.a)({},e),{},{allLoaded:t.allLoaded});default:return e}},m=a.a.createContext(),h=function(e){var t=e.children,c=Object(n.useReducer)(O,{projects:null,items:null,weights:null,oneOffs:null,history:null,totalScore:0,todaysScore:0,tomorrowsScore:0,thisWeeksScore:0,allLoaded:!1}),a=Object(i.a)(c,2),r=a[0],o=a[1];return Object(d.jsx)(m.Provider,{value:{projects:r.projects,items:r.items,weights:r.weights,oneOffs:r.oneOffs,history:r.history,totalScore:r.totalScore,todaysScore:r.todaysScore,tomorrowsScore:r.tomorrowsScore,thisWeeksScore:r.thisWeeksScore,allLoaded:r.allLoaded,dataDispatch:o},children:t})},x=function(e){var t=e.value,c=e.change,a=Object(n.useContext)(m).weights,r=a?a.actionTypeArray:null;return r&&(r=r.sort((function(e,t){return t.weight-e.weight}))),Object(d.jsxs)("div",{className:"mt-2",children:[Object(d.jsx)("p",{children:"Action Type"}),Object(d.jsx)("select",{className:"border-2 border-black",onChange:c,id:"actionType",value:t,children:r&&r.map((function(e){return Object(d.jsx)("option",{value:e.id,children:e.name},e.id)}))})]})},v=c(8),y=c.n(v),g=c(73),w=c.n(g),T=(c(86),function(e){var t=e.value,c=e.change,n=t&&t.seconds?y.a.unix(t.seconds).toDate():t||null;return Object(d.jsxs)("div",{className:"mt-2",children:[Object(d.jsx)("p",{children:"Expected Update"}),Object(d.jsx)(w.a,{id:"expectedUpdate",filterDate:function(e){return!0},isClearable:!1,className:"formInput",selected:n,onChange:function(e,t){null!==e&&c(e)}})]})}),N=c(34);c(186),c(173),c(184);N.a.initializeApp({apiKey:"AIzaSyCSu3ggsS66Mo1OullwbFJIg9mibC9E9wY",authDomain:"todo-8303f.firebaseapp.com",projectId:"todo-8303f",storageBucket:"todo-8303f.appspot.com",messagingSenderId:"928128254937",appId:"1:928128254937:web:a3f32fafc7ca5ba6c40fc8"}),N.a.firestore();var C=N.a,E=function(e,t){for(var c=0,n=Object.keys(e);c<n.length;c++){var a=n[c];isNaN(parseFloat(e[a].weight))||(t[a]=Object(s.a)(Object(s.a)({},e[a]),{},{weight:parseFloat(e[a].weight)}))}C.firestore().collection("users").doc(D()).get().then((function(e){C.firestore().collection("users").doc(D()).update({importanceTypes:t})}))},S=function(e,t){for(var c=0,n=Object.keys(e);c<n.length;c++){var a=n[c];isNaN(parseFloat(e[a].weight))||(t[a]=Object(s.a)(Object(s.a)({},e[a]),{},{weight:parseFloat(e[a].weight)}))}C.firestore().collection("users").doc(D()).get().then((function(e){C.firestore().collection("users").doc(D()).update({actionTypes:t})}))},D=function(){return C.auth().currentUser.uid},k=function(e){var t=e.value,c=e.change,a=Object(n.useContext)(m).projects,r=[];return a&&(r=a.sort((function(e,t){return t.totalScore-e.totalScore}))),Object(d.jsxs)("div",{className:"mt-2",children:[Object(d.jsx)("p",{children:"Project"}),Object(d.jsxs)("select",{className:"border-2 border-black",id:"projectID",value:t,onChange:c,children:[Object(d.jsx)("option",{disabled:!0,value:"",children:"Select a Project"}),r&&r.map((function(e){return Object(d.jsx)("option",{value:e.id,children:e.name},e.id)}))]})]})},I=function(){return Object(d.jsx)("svg",{className:"cursor-pointer",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})},F=function(){var e=Object(n.useRef)(null),t=Object(n.useContext)(m),c=t.items,a=(t.weights,Object(n.useContext)(u)),r=a.modalStatus,o=a.modalDispatch,l=Object(n.useState)({action:"",actionType:1,expectedUpdate:new Date,projectID:""}),j=Object(i.a)(l,2),b=j[0],O=j[1],h=Object(n.useState)(!1),v=Object(i.a)(h,2),y=v[0],g=v[1],w=Object(n.useState)(!0),N=Object(i.a)(w,2),E=N[0],S=N[1];Object(n.useEffect)((function(){r&&r.itemID&&(c?(O(c.filter((function(e){return e.id===r.itemID}))[0]),S(!1)):S(!0)),r.itemProjectID&&O({action:"",actionType:1,expectedUpdate:new Date,projectID:r.itemProjectID})}),[r,c]),Object(n.useEffect)((function(){""===b.projectID||""===b.action?g(!1):g(!0)}),[b.projectID,b.action]);var F=function(e){O(Object(s.a)(Object(s.a)({},b),{},Object(f.a)({},e.target.id,e.target.value)))};return Object(d.jsxs)("div",{ref:e,id:"modal",className:"relative overflow-scroll bg-white h-5/6 mt-10 p-5",children:[Object(d.jsx)("div",{onClick:function(e){o({type:"HIDE_SHEET"})},className:"h-10 w-10 absolute top-0 right-0",children:Object(d.jsx)(I,{})}),E?Object(d.jsx)("p",{className:"text-xl font-bold",children:"New Item"}):Object(d.jsx)("p",{className:"text-xl font-bold",children:"Edit Item"}),Object(d.jsx)(k,{value:b.projectID,change:F}),Object(d.jsx)(x,{value:b.actionType,change:F}),Object(d.jsx)(T,{value:b.expectedUpdate,change:function(e){O(Object(s.a)(Object(s.a)({},b),{},{expectedUpdate:e}))}}),Object(d.jsx)(p,{value:b.action,change:F}),E?Object(d.jsx)("div",{className:"flex space-x-2 mt-5",children:Object(d.jsx)("button",{onClick:function(e){y&&(!function(e){var t=new Date;C.firestore().collection("users/"+D()+"/items").add({action:e.action,actionType:parseInt(e.actionType),expectedUpdate:e.expectedUpdate,deleted:!1,completed:!1,projectID:e.projectID,created:t})}(b),o({type:"HIDE_SHEET"}))},className:y?"doneBtn":"inactiveBtn",children:"Add"})}):Object(d.jsxs)("div",{children:[Object(d.jsxs)("div",{className:"flex space-x-2 mt-5",children:[Object(d.jsx)("button",{onClick:function(e){y&&(!function(e){C.firestore().collection("users/"+D()+"/items").doc(e.id).update({action:e.action,actionType:parseInt(e.actionType),expectedUpdate:e.expectedUpdate,projectID:e.projectID})}(b),o({type:"HIDE_SHEET"}))},className:y?"doneBtn":"inactiveBtn",children:"Save"}),Object(d.jsx)("button",{onClick:function(e){!0===window.confirm("Are you sure you want to complete?")&&(!function(e,t,c){var n=t.filter((function(t){return t.id===e}))[0],a=new Date;C.firestore().collection("users/"+D()+"/items").doc(e).update({completed:!0,completedDate:a,actionTypeWeightEnd:n.actionTypeWeight,importanceWeightEnd:n.importanceWeight,dayDropEnd:n.dayDrop,scoreOnComplete:n.score})}(b.id,c),o({type:"HIDE_SHEET"}))},className:"completeBtn",children:"Complete Task"}),Object(d.jsx)("button",{onClick:function(e){!0===window.confirm("Are you sure you want to delete?")&&(!function(e,t,c){var n=t.filter((function(t){return t.id===e}))[0],a=new Date;C.firestore().collection("users/"+D()+"/items").doc(e).update({deleted:!0,deletedDate:a,actionTypeWeightEnd:n.actionTypeWeight,importanceWeightEnd:n.importanceWeight,dayDropEnd:n.dayDrop,scoreOnDelete:n.score})}(b.id,c),o({type:"HIDE_SHEET"}))},className:"importantBtn",children:"Delete Item"})]}),Object(d.jsx)("div",{})]})]})},A=function(){var e=Object(n.useContext)(u),t=e.modalStatus,c=e.modalDispatch;return!1===t.showSheet?null:Object(d.jsx)("div",{onClick:function(e){"edit-bg"===e.target.id&&c({type:"HIDE_SHEET"})},id:"edit-bg",className:"flex justify-center w-screen h-screen bg-gray-400 bg-opacity-50 fixed inset-0",children:Object(d.jsx)(F,{})})},_=c(78),L=a.a.createContext(),H=function(e){var t=e.children,c=Object(_.a)(C.auth()),n=Object(i.a)(c,1)[0];return Object(d.jsx)(L.Provider,{value:{FBuser:n},children:t})},P=function(){var e=Object(n.useContext)(L).FBuser,t=Object(n.useContext)(u).modalDispatch;return null!==e&&Object(d.jsx)("button",{className:"ml-10 mt-5 mb-10 btn",onClick:function(){t({type:"SHOW_SHEET"})},children:"Add Action"})},B=function(){var e=Object(n.useContext)(L).FBuser,t=Object(n.useState)({email:"",pass:""}),c=Object(i.a)(t,2),a=c[0],r=c[1];if(e)return Object(d.jsx)("button",{onClick:function(e){C.auth().signOut()},className:"btn",children:"Logout"});var o=function(e){r(Object(s.a)(Object(s.a)({},a),{},Object(f.a)({},e.target.id,e.target.value)))};return Object(d.jsx)("div",{children:Object(d.jsxs)("form",{onSubmit:function(e){var t,c;e.preventDefault(),t=a.email,c=a.pass,C.auth().signInWithEmailAndPassword(t,c),r({email:"",pass:""})},children:[Object(d.jsx)("input",{onChange:o,value:a.email,id:"email",className:"formInput",type:"email"}),Object(d.jsx)("input",{onChange:o,value:a.pass,id:"pass",className:"formInput",type:"password"}),Object(d.jsx)("button",{className:"btn",type:"submit",children:"Login"})]})})},W=function(){var e=Object(n.useState)(""),t=Object(i.a)(e,2),c=t[0],a=t[1];return Object(d.jsx)("form",{onSubmit:function(e){e.preventDefault(),function(e){var t=D(),c=new Date;C.firestore().collection("users/"+D()+"/oneOffs").add({name:e,done:!1,userID:t,created:c})}(c),a("")},children:Object(d.jsx)("input",{className:"formInput mt-2",placeholder:"Add One Off",value:c,onChange:function(e){a(e.target.value)}})})},R=function(e){var t=e.oneOff;return Object(d.jsxs)("div",{className:"flex space-x-2 bg-gray-100 my-1",children:[Object(d.jsx)("input",{className:"self-center",onChange:function(){var e;e=t.id,C.firestore().collection("users/"+D()+"/oneOffs").doc(e).update({done:!0})},type:"checkbox"}),Object(d.jsx)("label",{className:"self-center",children:t.name})]})},M=function(){var e=Object(n.useContext)(m).oneOffs,t=e?e.sort((function(e,t){return e.created-t.created})):null;return Object(d.jsx)("div",{className:"w-full",children:Object(d.jsxs)("div",{className:"m-auto w-48",children:[Object(d.jsx)("h1",{className:"text-lg font-bold",children:"One Off Items"}),t&&t.map((function(e){return Object(d.jsx)(R,{oneOff:e},e.id)})),Object(d.jsx)(W,{})]})})},U=function(e){var t=e.actionTypes,c=Object(n.useState)([]),a=Object(i.a)(c,2),r=a[0],o=a[1];Object(n.useEffect)((function(){t&&o(t)}),[t]);for(var l=function(e){o(Object(s.a)(Object(s.a)({},r),{},Object(f.a)({},e.target.attributes.actionid.nodeValue,Object(s.a)(Object(s.a)({},r[e.target.attributes.actionid.nodeValue]),{},{weight:e.target.value}))))},u=function(e){o(Object(s.a)(Object(s.a)({},r),{},Object(f.a)({},e.target.attributes.actionid.nodeValue,Object(s.a)(Object(s.a)({},r[e.target.attributes.actionid.nodeValue]),{},{name:e.target.value}))))},j=function(e){var c=isNaN(parseFloat(e.target.value))?t[e.target.attributes.actionid.nodeValue].weight:parseFloat(e.target.value);S(Object(s.a)(Object(s.a)({},r),{},Object(f.a)({},e.target.attributes.actionid.nodeValue,Object(s.a)(Object(s.a)({},r[e.target.attributes.actionid.nodeValue]),{},{weight:c}))),t)},b=function(e){var c=""===e.target.value?t[e.target.attributes.actionid.nodeValue].name:e.target.value;c!==t[e.target.attributes.actionid.nodeValue].name&&S(Object(s.a)(Object(s.a)({},r),{},Object(f.a)({},e.target.attributes.actionid.nodeValue,Object(s.a)(Object(s.a)({},r[e.target.attributes.actionid.nodeValue]),{},{name:c}))),t)},p=[],O=0,m=Object.keys(r);O<m.length;O++){var h=m[O];p.push(r[h])}return p=p.sort((function(e,t){return t.weight-e.weight})),Object(d.jsxs)("div",{className:"m-auto w-56 mt-10",children:[Object(d.jsx)("p",{className:"text-lg font-bold",children:"Action Type Weights"}),Object(d.jsx)("div",{className:"flex flex-col space-y-1",children:p&&p.map((function(e){return Object(d.jsxs)("div",{className:"grid grid-cols-12",children:[Object(d.jsx)("input",{onBlur:b,onChange:u,actionid:e.id,value:e.name,className:"col-span-7 formInput"}),Object(d.jsx)("input",{onBlur:j,value:e.weight,actionid:e.id,id:e.id,onChange:l,className:"formInputSmall col-span-4 col-start-9"})]},e.id)}))}),Object(d.jsx)("button",{className:"btn mt-2",onClick:function(e){!function(e){var t=Object.keys(e).length+1,c="actionTypes."+t;C.firestore().collection("users").doc(D()).update(Object(f.a)({},c,{id:t,name:"New",weight:0}))}(t)},children:"Add"})]})},V=function(e){var t=e.importanceTypes,c=Object(n.useState)([]),a=Object(i.a)(c,2),r=a[0],o=a[1];Object(n.useEffect)((function(){t&&o(t)}),[t]);for(var l=function(e){o(Object(s.a)(Object(s.a)({},r),{},Object(f.a)({},e.target.attributes.importanceid.nodeValue,Object(s.a)(Object(s.a)({},r[e.target.attributes.importanceid.nodeValue]),{},{weight:e.target.value}))))},u=function(e){o(Object(s.a)(Object(s.a)({},r),{},Object(f.a)({},e.target.attributes.importanceid.nodeValue,Object(s.a)(Object(s.a)({},r[e.target.attributes.importanceid.nodeValue]),{},{name:e.target.value}))))},j=function(e){var c=isNaN(parseFloat(e.target.value))?t[e.target.attributes.importanceid.nodeValue].weight:parseFloat(e.target.value);E(Object(s.a)(Object(s.a)({},r),{},Object(f.a)({},e.target.attributes.importanceid.nodeValue,Object(s.a)(Object(s.a)({},r[e.target.attributes.importanceid.nodeValue]),{},{weight:c}))),t)},b=function(e){var c=""===e.target.value?t[e.target.attributes.importanceid.nodeValue].name:e.target.value;E(Object(s.a)(Object(s.a)({},r),{},Object(f.a)({},e.target.attributes.importanceid.nodeValue,Object(s.a)(Object(s.a)({},r[e.target.attributes.importanceid.nodeValue]),{},{name:c}))),t)},p=[],O=0,m=Object.keys(r);O<m.length;O++){var h=m[O];p.push(r[h])}return p=p.sort((function(e,t){return t.weight-e.weight})),Object(d.jsxs)("div",{className:"m-auto w-56 mt-10",children:[Object(d.jsx)("p",{className:"text-lg font-bold",children:"Importance Weights"}),Object(d.jsx)("div",{className:"flex flex-col space-y-1",children:p&&p.map((function(e){return Object(d.jsxs)("div",{className:"grid grid-cols-12",children:[Object(d.jsx)("input",{onBlur:b,value:e.name,onChange:u,importanceid:e.id,className:"col-span-7 formInput"}),Object(d.jsx)("input",{onBlur:j,value:e.weight,importanceid:e.id,onChange:l,className:"formInputSmall col-span-4 col-start-9"})]},e.id)}))}),Object(d.jsx)("button",{onClick:function(e){!function(e){var t=Object.keys(e).length+1,c="importanceTypes."+t;C.firestore().collection("users").doc(D()).update(Object(f.a)({},c,{id:t,name:"New",weight:0}))}(t)},className:"btn mt-2",children:"Add"})]})},J=function(){var e=Object(n.useContext)(m).weights;return Object(d.jsx)("div",{className:"w-full",children:Object(d.jsx)("div",{children:e?Object(d.jsxs)("div",{children:[Object(d.jsx)(V,{importanceTypes:e.importanceTypes}),Object(d.jsx)(U,{actionTypes:e.actionTypes})]}):null})})},Y=function(){var e=Object(n.useContext)(L).FBuser,t=Object(n.useContext)(m),c=t.weights,a=t.totalScore,r=t.allLoaded,o=Object(n.useContext)(u).modalDispatch;Object(n.useEffect)((function(){!0===r&&null!==e&&null!==c&&null!==c.currentUserScore&&c.currentUserScore.toFixed(2)!==a.toFixed(2)&&function(e){var t=new Date;C.firestore().collection("users").doc(D()).get().then((function(c){c.data().currentScore.toFixed(2)!==e.toFixed(2)&&(console.log("log history. current:",c.data().currentScore,"new",e),C.firestore().collection("users").doc(D()).update({currentScore:parseFloat(e.toFixed(2))}).then((function(c){C.firestore().collection("users/"+D()+"/history").add({date:t,score:parseFloat(e.toFixed(2))})})))}))}(a)}),[r,e,a,c]);return Object(d.jsx)("div",{className:"my-5",children:Object(d.jsxs)("div",{className:"flex justify-center space-x-1",children:[Object(d.jsx)("h1",{className:"text-center text-4xl scoreLabel",children:a.toFixed(2)}),Object(d.jsx)("svg",{onClick:function(e){o({type:"TOGGLE_CHART"})},className:"w-5 cursor-pointer",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 12l3-3 3 3 4-4M8 21l4-4 4 4M3 4h18M4 4h16v12a1 1 0 01-1 1H5a1 1 0 01-1-1V4z"})})]})})},z=c(175),G=function(e){for(var t=e.importance,c=Object(n.useContext)(m).weights,a=c?c.importanceArray:null,r=z([[255,255,255],[255,0,0]]),o=r(0),i=a.length,s=a.sort((function(e,t){return e.weight-t.weight})),l=1,u=1;u<=s.length;u++)s[u-1].id===t&&(l=u,o=r((u-1)/(i-1)));for(var j=[],f=1;f<=l;f++)j.push(f);return Object(d.jsx)("div",{className:"flex",children:j&&j.map((function(e){return Object(d.jsx)("div",{className:"h-3 w-3",children:Object(d.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(d.jsx)("circle",{cx:"12",cy:"12",r:"10",stroke:"black",strokeWidth:"1",fill:o})})},e)}))})},K=function(e){var t=e.proj,c=e.weights,a=Object(n.useContext)(u).modalDispatch;return Object(d.jsxs)("div",{onClick:function(e){a({type:"SHOW_PROJECT_SHEET",projectID:t.id})},className:"transform hover:scale-110 transition ease-out duration-300 flex justify-between whitespace-nowrap px-2 space-x-2 text-white bg-black rounded-lg cursor-pointer",children:[Object(d.jsxs)("p",{className:"overflow-hidden overflow-ellipsis",children:[t.totalScore.toFixed(2)," - ",t.name]}),Object(d.jsx)("div",{className:"self-center",children:Object(d.jsx)(G,{importance:t.importance,importances:c.importanceArray})})]})},q=function(){return Object(d.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})},Q=function(){var e=Object(n.useContext)(m),t=e.projects,c=e.items,a=e.weights,r=Object(n.useContext)(u).modalDispatch,o=[];t&&c&&(o=t.map((function(e){var t=c.filter((function(t){return!!t.project&&t.project.id===e.id})),n=0;return t.forEach((function(e){return n+=e.score})),Object(s.a)(Object(s.a)({},e),{},{totalScore:n})}))),o.sort((function(e,t){return t.totalScore-e.totalScore}));return Object(d.jsxs)("div",{className:"m-auto w-60 mt-10",children:[Object(d.jsxs)("div",{className:"flex space-x-1",children:[Object(d.jsx)("p",{className:"self-center text-xl font-bold",children:"Projects"}),Object(d.jsx)("div",{onClick:function(e){r({type:"SHOW_PROJECT_SHEET",projectID:null})},className:"self-center w-6 h-6 cursor-pointer",children:Object(d.jsx)(q,{})})]}),Object(d.jsx)("div",{className:"flex flex-col space-y-1",children:o&&o.map((function(e){return Object(d.jsx)(K,{proj:e,weights:a},e.id)}))})]})},X=function(){var e=Object(n.useState)(!1),t=Object(i.a)(e,2),c=t[0],a=t[1],r=Object(n.useContext)(L).FBuser,o=Object(n.useContext)(m).allLoaded;return Object(d.jsx)("div",{className:"col-span-3 h-screen overflow-hidden",children:Object(d.jsxs)("div",{className:"h-full overflow-scroll hideBar pb-10",children:[Object(d.jsx)(B,{}),Object(d.jsx)("button",{className:"btn",onClick:function(e){console.log("test")},children:"Test"}),r&&o?Object(d.jsxs)("div",{children:[Object(d.jsx)(P,{}),Object(d.jsx)(Y,{}),Object(d.jsx)(M,{}),Object(d.jsx)(Q,{}),Object(d.jsx)("p",{className:"mt-10 cursor-pointer underline m-auto w-56",onClick:function(e){a(!c)},children:c?"Hide Config":"Show Config"}),c?Object(d.jsx)("div",{children:Object(d.jsx)(J,{})}):null]}):null]})})},Z=function(e,t){switch(t.type){case"SETUP_IMPORTANCE_FILTERS":var c={};return t.importances.forEach((function(e){c[e.id]=!0})),Object(s.a)(Object(s.a)({},e),{},{importanceFilters:c});case"SET_IMPORTANCE_FILTER":return Object(s.a)(Object(s.a)({},e),{},{importanceFilters:Object(s.a)(Object(s.a)({},e.importanceFilters),{},Object(f.a)({},t.importance,t.value))});case"ALL_IMPORTANCE":for(var n={},a=0,r=Object.keys(t.importances);a<r.length;a++){n[r[a]]=t.value}return Object(s.a)(Object(s.a)({},e),{},{importanceFilters:n});case"SET_ACTION_FILTER":return Object(s.a)(Object(s.a)({},e),{},{actionFilters:Object(s.a)(Object(s.a)({},e.actionFilters),{},Object(f.a)({},t.actionType,t.value))});case"ALL_ACTION":for(var o={},i=0,l=Object.keys(t.actionTypes);i<l.length;i++){o[l[i]]=t.value}return Object(s.a)(Object(s.a)({},e),{},{actionFilters:o});case"SET_DAY_FILTER":return Object(s.a)(Object(s.a)({},e),{},{dayFilter:t.value});default:return e}},$=a.a.createContext(),ee=function(e){var t=e.children,c=Object(n.useReducer)(Z,{dayFilter:"all",dayFilters:[{name:"All",value:"all",id:"all",filtName:"dateFilter"},{name:"Today",value:"0",id:"today",filtName:"dateFilter"},{name:"Next Day",value:"1",id:"nextDay",filtName:"dateFilter"},{name:"Next 2 Days",value:"2",id:"nextTwoDays",filtName:"dateFilter"},{name:"Overdue",value:"-1",id:"overdue",filtName:"dateFilter"}]}),a=Object(i.a)(c,2),r=a[0],o=a[1];return Object(d.jsx)($.Provider,{value:{filterData:r,filterDispatch:o},children:t})},te=function(){var e=Object(n.useContext)(m).weights,t=Object(n.useContext)($),c=t.filterData,a=t.filterDispatch,r=[];if(!e)return null;e.actionTypeArray.forEach((function(e){r.push({id:e.id,name:e.name})}));var o=function(e){a({type:"SET_ACTION_FILTER",actionType:e.target.id,value:e.target.checked})};return Object(d.jsxs)("div",{className:"mt-5",children:[Object(d.jsx)("p",{className:"text-xl font-bold",children:"Filter Action Type"}),Object(d.jsx)("div",{className:"flex flex-col",children:r.map((function(e){return Object(d.jsxs)("div",{className:"flex space-x-1",children:[Object(d.jsx)("input",{className:"self-center",id:e.id,onChange:o,checked:!c.actionFilters||void 0===c.actionFilters[e.id]||c.actionFilters[e.id],type:"checkbox"}),Object(d.jsx)("label",{className:"self-center",children:e.name})]},e.id)}))}),Object(d.jsxs)("div",{className:"flex space-x-2",children:[Object(d.jsx)("button",{className:"btn mt-2",onClick:function(t){a({type:"ALL_ACTION",value:!0,actionTypes:e.actionTypes})},children:"Select All"}),Object(d.jsx)("button",{className:"btn mt-2",onClick:function(t){a({type:"ALL_ACTION",value:!1,actionTypes:e.actionTypes})},children:"De-select All"})]})]})},ce=function(){var e=Object(n.useContext)($),t=e.filterData,c=e.filterDispatch,a=Object(n.useState)("1000000"),r=Object(i.a)(a,2),o=r[0],s=r[1];Object(n.useEffect)((function(){t&&s(t.dayFilter)}),[t]);var l=function(e){c({type:"SET_DAY_FILTER",value:e.target.value})},u=t.dayFilters;return Object(d.jsxs)("div",{className:"mt-5",children:[Object(d.jsx)("p",{className:"text-xl font-bold",children:"Filter Date"}),Object(d.jsx)("div",{children:u.map((function(e){return Object(d.jsxs)("div",{className:"flex space-x-1",children:[Object(d.jsx)("input",{className:"self-center",onChange:l,type:"radio",name:e.filtName,value:e.value,checked:o===e.value}),Object(d.jsx)("label",{className:"self-center",children:e.name})]},e.id)}))})]})},ne=function(){var e=Object(n.useContext)(m).weights,t=Object(n.useContext)($),c=t.filterDispatch,a=t.filterData,r=[];if(!e)return null;e.importanceArray.forEach((function(e){r.push({id:e.id,name:e.name,weight:e.weight})})),r=r.sort((function(e,t){return t.weight-e.weight}));var o=function(e){c({type:"SET_IMPORTANCE_FILTER",importance:e.target.id,value:e.target.checked})};return Object(d.jsxs)("div",{children:[Object(d.jsx)("p",{className:"text-xl font-bold",children:"Filter Importance"}),Object(d.jsx)("div",{className:"flex flex-col",children:r.map((function(e){return Object(d.jsxs)("div",{className:"flex space-x-1",children:[Object(d.jsx)("input",{className:"self-center",id:e.id,onChange:o,checked:!a.importanceFilters||void 0===a.importanceFilters[e.id]||a.importanceFilters[e.id],type:"checkbox"}),Object(d.jsx)("label",{className:"self-center",children:e.name})]},e.id)}))}),Object(d.jsxs)("div",{className:"flex space-x-2",children:[Object(d.jsx)("button",{className:"btn mt-2",onClick:function(t){c({type:"ALL_IMPORTANCE",value:!0,importances:e.importanceTypes})},children:"Select All"}),Object(d.jsx)("button",{className:"btn mt-2",onClick:function(t){c({type:"ALL_IMPORTANCE",value:!1,importances:e.importanceTypes})},children:"De-select All"})]})]})},ae=function(){var e=Object(n.useContext)(m),t=e.weights,c=e.allLoaded,a=Object(n.useContext)($).filterDispatch,r=Object(n.useContext)(L).FBuser,o=t?t.importanceTypes:{},i=t?t.actionTypes:{};return r&&c?Object(d.jsxs)("div",{className:"col-span-3 p-5 h-screen overflow-hidden",children:[Object(d.jsx)(ne,{}),Object(d.jsx)(ce,{}),Object(d.jsx)(te,{}),Object(d.jsx)("button",{onClick:function(e){a({type:"ALL_IMPORTANCE",value:!0,importances:o}),a({type:"ALL_ACTION",value:!0,actionTypes:i}),a({type:"SET_DAY_FILTER",value:"all"})},className:"importantBtn mt-10",children:"Remove All Filters"})]}):null},re=c(30),oe=c(31),ie=(c(33),Object(s.a)(Object(s.a)({},re),{},{tip:oe.a})),se=function(e){return y()(e).format("MM/DD/YY")},le=function(e){return e.toFixed(2)},de=function(e,t){var c=function(e){var t=0,c=null;return e.lines.forEach((function(e){e.data.forEach((function(e){t=Math.max(e.y,t),c=c?Math.min(e.y,c):e.y}))})),{max:t,min:c-=.1*(t-c)}}(e);return ie.scaleLinear().range([0,t]).domain([c.max,c.min])},ue=function(e,t){var c=function(e){var t=new Date,c=0;return e.lines.forEach((function(e){e.data.forEach((function(e){c=Math.max(e.x,c),t=Math.min(e.x,t)}))})),{max:c,min:t}}(e);return ie.scaleTime().range([0,t]).domain([c.min,c.max])},je=function(){return ie.tip().attr("class","tip card").html((function(e,t){var c=se(t.x),n=le(t.y),a=function(e){return y()(e).format("h:mm a")}(t.x),r="";return r+='<div class="score">'.concat(n,"</div>"),r+='<div class="name">'.concat(c,"</div>"),r+='<div class="cost">'.concat(a,"</div>")})).direction("s").offset([15,0])},fe=c(18),be=a.a.createContext(),pe=function(e){var t=e.children,c=Object(n.useContext)(L).FBuser,a=c?c.uid:null,r=Object(fe.a)(C.firestore().collection("users/"+a+"/items").where("deleted","==",!1),{idField:"id"}),o=Object(i.a)(r,2),s=o[0],l=o[1];return Object(d.jsx)(be.Provider,{value:{items:s,itemsLoading:l},children:t})},Oe=null,me=null,he=null,xe=function(e){return{lines:[{name:"Score History",data:e}],minY:0,xTicks:6,yTicks:7,dots:!0,dotSize:2}},ve=function(e){for(var t=Ee(),c=y()(new Date).startOf("days").toDate(),n=[],a=[],r=e.length,o=(he.dayDrop,y()(t).startOf("days").toDate());o<=y()(c).toDate();o.setDate(o.getDate()+1)){for(var i=0,s=0;s<r;s++){var l=!0===e[s].completed?ye(e[s],o):ge(e[s],o);i+=l,n.push({date:o,item:e[s],score:l})}a.push({x:y()(o).toDate(),y:i})}return a},ye=function(e,t){var c=we(e.completedDate,t);return e.completedDate>t?Math.max(0,1*e.importanceTypeWeight*e.actionTypeWeight-c*he.dayDrop):0},ge=function(e,t){var c=we(y.a.unix(e.expectedUpdate.seconds).startOf("days"),t);return y.a.unix(e.created.seconds).startOf("days").isSameOrBefore(y()(t))?Math.max(0,1*e.importanceWeight*e.actionTypeWeight-c*he.dayDrop):0},we=function(e,t){e=y()(e),t=y()(t);var c=y()(e).startOf("days"),n=y()(t).startOf("days"),a=1,r=[!1,!0,!0,!0,!0,!0,!1],o=0;if(e.isSame(t))return 0;for(e.isBefore(t)&&(n=y()(e),c=y()(t),a=-1);!n.isSame(c);)n.add(1,"d"),r[n.day()]&&o++;return o*a},Te=function(){return Oe.map((function(e){return!0===e.completed?Ne(e):Ce(e)}))},Ne=function(e){return{completedDate:y.a.unix(e.completedDate.seconds).startOf("days").toDate(),created:y.a.unix(e.created.seconds).startOf("days").toDate(),scoreOnComplete:e.scoreOnComplete,expectedUpdate:y.a.unix(e.expectedUpdate.seconds).startOf("days").toDate(),importanceTypeWeight:e.importanceWeightEnd,actionTypeWeight:e.actionTypeWeightEnd,completed:e.completed}},Ce=function(e){return me.filter((function(t){return t.id===e.id}))[0]},Ee=function(){var e=y()().startOf("days");return Oe.forEach((function(t){y.a.unix(t.created.seconds).startOf("days").isBefore(e)&&(e=y.a.unix(t.created.seconds).startOf("days"))})),e},Se=Object(s.a)(Object(s.a)({},re),{},{tip:oe.a}),De=function(){var e=Object(n.useContext)(L).FBuser,t=Object(n.useContext)(m),c=(t.history,t.items),a=t.weights,r=Object(n.useContext)(be).items,o=Object(n.useContext)(u).modalStatus,i=null,s=o.showChart?"block":"hidden";i=function(e,t,c){var n;if(null!==t&&void 0!==t){Oe=e,me=t,he=c,n=Te();var a=ve(n);return xe(a)}}(r,c,a);var l=Object(n.useRef)();return Object(n.useEffect)((function(){var e=10,t=35,c=500-t-20,n=200-e-20,a=Se.select(l.current).attr("viewBox","0 0 ".concat(500," ").concat(200)).select(".chartArea").attr("height",200).attr("class","chartArea").attr("width",500).attr("transform","translate(".concat(t,",").concat(e,")"));a.selectAll("g").remove();var r=a.append("g").attr("transform","translate(-".concat(t,",-").concat(e,")"));if(r.selectAll("g").remove(),r.selectAll("path").remove(),i){var o=r.append("g").style("opacity",0).attr("transform","translate(".concat(t,",").concat(e,")")),s=o.append("line").attr("stroke","#aaa").attr("stroke-width",1).attr("stroke-dasharray",4),d=o.append("line").attr("stroke","#aaa").attr("stroke-width",1).attr("stroke-dasharray",4),u=a.append("g").attr("transform","translate(0,".concat(n,")")),j=a.append("g").attr("transform","translate(0, 0)"),f=ue(i,c),b=de(i,n),p=Se.line().x((function(e){return f(e.x)})).y((function(e){return b(e.y)}));i.lines.forEach((function(c){var a=je();r.call(a);var l=r.append("path").attr("transform","translate(".concat(t,",").concat(e,")")),u=r.selectAll("circle."+c.name).data(c.data),j=i.dotSize?i.dotSize:5;u.exit().remove(),u.attr("r",j).attr("fill","black").attr("cx",(function(e){return f(e.x)})).attr("cy",(function(e){return b(e.y)})).attr("transform","translate(".concat(t,",").concat(e,")")).on("mouseover",a.show).on("mouseout",a.hide),u.enter().append("circle").attr("fill","black").attr("cx",(function(e){return f(e.x)})).attr("cy",(function(e){return b(e.y)})).attr("r",j).attr("transform","translate(".concat(t,",").concat(e,")")).attr("opacity",1).on("mouseover.tip",a.show).on("mouseover.lines",(function(e,t){s.attr("x1",f(t.x)).attr("x2",f(t.x)).attr("y1",b(t.y)).attr("y2",n),d.attr("x1",0).attr("x2",f(t.x)).attr("y1",b(t.y)).attr("y2",b(t.y)),o.style("opacity",1)})).on("mouseout.tip",a.hide).on("mouseout.lines",(function(e,t){o.style("opacity",0)}));var O=l.node().getTotalLength();l.data([c.data]).attr("fill","none").attr("stroke","black").attr("stroke-width",2).attr("d",p).style("opacity",.75).attr("stroke-dasharray",O+" "+O)}));var O=i.xTicks?i.xTicks:5,m=i.yTicks?i.yTicks:5,h=i?se:function(e){return e},x=i?le:function(e){return e},v=Se.axisBottom(f).tickFormat((function(e){return h(e)})).ticks(O),y=Se.axisLeft(b).tickFormat((function(e){return x(e)})).ticks(m);u.call(v).attr("class","chartAxis"),j.call(y).attr("class","chartAxis")}}),[e,i]),Object(d.jsx)("div",{className:"flex justify-center",children:Object(d.jsx)("div",{className:s+" w-full",children:Object(d.jsx)("svg",{ref:l,children:Object(d.jsx)("g",{className:"chartArea"})})})})},ke=function(e){var t=e.item,c=Object(n.useContext)(u).modalDispatch,a=t.expectedUpdate?y.a.unix(t.expectedUpdate.seconds).format("MM/DD/YY"):null,r=t&&1===t.daysTo?"Tomorrow":t&&0===t.daysTo?"Today":t&&t.daysTo>0?t.daysTo+" days":t&&-1===t.daysTo?"1 day ago":t&&t.daysTo<0?-1*t.daysTo+" days ago":null;return Object(d.jsxs)("div",{className:"rounded-md border-2 border-black my-2 w-full self-center grid grid-cols-12 ",children:[Object(d.jsxs)("div",{onClick:function(e){c({type:"SHOW_PROJECT_SHEET",projectID:t.projectID})},className:"hover:bg-opacity-50 mainInfo flex flex-col col-span-4 p-2 bg-black text-white",children:[Object(d.jsx)("p",{className:"text-xs",children:t.score?t.score.toFixed(2):0}),Object(d.jsx)("p",{className:"text-xl",children:t.project?t.project.name:""}),Object(d.jsx)(G,{importance:t.project?t.project.importance:3}),Object(d.jsx)("p",{className:"text-sm",children:t.project?t.project.description:""})]}),Object(d.jsxs)("div",{onClick:function(e){c({type:"SHOW_SHEET",itemID:t.id})},className:"relative hover:bg-opacity-75 col-span-8 p-2 "+t.colorClass,children:[Object(d.jsx)("p",{className:"text-xl",children:t.action}),Object(d.jsx)("p",{className:"text-sm",children:a}),Object(d.jsx)("p",{className:"text-base",children:t.actionTypeName}),Object(d.jsx)("p",{className:"absolute right-1 top-0",children:r})]})]})},Ie=function(e){var t=e.item,c=Object(n.useContext)(u).modalDispatch,a=t.expectedUpdate?y.a.unix(t.expectedUpdate.seconds).format("MM/DD/YY"):null;return Object(d.jsxs)("div",{onClick:function(e){c({type:"SHOW_SHEET",itemID:t.id})},className:"border-2 border-black my-2 w-full self-center grid grid-cols-12 ",children:[Object(d.jsx)("div",{className:"mainInfo justify-center flex flex-col col-span-2 p-2 bg-black text-white",children:Object(d.jsx)("p",{className:"text-xl self-center",children:t.score?t.score.toFixed(2):0})}),Object(d.jsxs)("div",{className:"col-span-10 p-2 "+t.colorClass,children:[Object(d.jsx)("p",{className:"text-xl",children:t.actionTypeName}),Object(d.jsx)("p",{className:"text-sm",children:a}),Object(d.jsx)("p",{className:"text-base",children:t.action})]})]})},Fe=function(e){var t=e.item,c=e.showProject;return Object(d.jsx)("div",{className:"cursor-pointer",children:c?Object(d.jsx)(ke,{item:t}):Object(d.jsx)(Ie,{item:t})})},Ae=function(){var e=Object(n.useContext)(m),t=e.items,c=e.allLoaded,a=Object(n.useContext)($).filterData,r=Object(n.useContext)(L).FBuser,o=t?t.sort((function(e,t){return null===e.expectedUpdate?1:null===t.expectedUpdate?-1:t.score-e.score})):null;if(a&&a.importanceFilters&&o){var i=a.importanceFilters;o=o.filter((function(e){return void 0===i[e.project.importance]||i[e.project.importance]}))}if(a&&o&&"all"!==a.dayFilter){var s=parseInt(a.dayFilter);o=o.filter((function(e){return e.daysTo<=s}))}if(a&&a.actionFilters&&o){var l=a.actionFilters;o=o.filter((function(e){return void 0===l[e.actionType]||l[e.actionType]}))}return r&&c?Object(d.jsx)("div",{className:"overflow-scroll h-full hideBar",children:o&&o.map((function(e){return Object(d.jsx)(Fe,{showProject:!0,item:e},e.id)}))}):null},_e=function(){var e=Object(n.useContext)(m),t=e.todaysScore,c=e.tomorrowsScore,a=e.thisWeeksScore;return Object(d.jsxs)("div",{className:"grid grid-cols-3",children:[Object(d.jsxs)("div",{children:[Object(d.jsx)("p",{className:"text-center text-2xl",children:t.toFixed(2)}),Object(d.jsx)("p",{className:"text-center",children:"Today"})]}),Object(d.jsxs)("div",{children:[Object(d.jsx)("p",{className:"text-center text-2xl",children:c.toFixed(2)}),Object(d.jsx)("p",{className:"text-center",children:"Tomorrow"})]}),Object(d.jsxs)("div",{children:[Object(d.jsx)("p",{className:"text-center text-2xl",children:a.toFixed(2)}),Object(d.jsx)("p",{className:"text-center",children:"Rest of Week"})]})]})},Le=function(){return Object(d.jsxs)("div",{className:"flex flex-col w-full col-span-6 col-start-4 p-2 h-screen overflow-hidden",children:[Object(d.jsx)(_e,{}),Object(d.jsx)(De,{}),Object(d.jsx)(Ae,{})]})},He=a.a.createContext(),Pe=function(e){var t=e.children,c=C.firestore().collection("config").doc("2TttT72yuM5PAvGMjgJT"),n=Object(fe.b)(c),a=Object(i.a)(n,2),r=a[0],o=a[1];return Object(d.jsx)(He.Provider,{value:{config:r,configLoading:o},children:t})},Be=function(){var e=Object(n.useContext)(He).config;return e&&!0===e.downForMaintenance?Object(d.jsx)("p",{className:"text-3xl",children:"Down for maintenance"}):Object(d.jsxs)("div",{className:"grid grid-cols-12",children:[Object(d.jsx)(X,{}),Object(d.jsx)(Le,{}),Object(d.jsx)(ae,{})]})},We=function(e){var t=e.value,c=e.change;return Object(d.jsxs)("div",{className:"mt-2",children:[Object(d.jsx)("p",{children:"Description"}),Object(d.jsx)(b.a,{id:"description",onChange:c,className:"focus:outline-none border-2 border-black ",value:t})]})},Re=function(e){var t=e.value,c=e.change,a=Object(n.useContext)(m).weights,r=a?a.importanceArray:null;return r&&(r=r.sort((function(e,t){return t.weight-e.weight}))),Object(d.jsxs)("div",{className:"mt-2",children:[Object(d.jsx)("p",{children:"Importance"}),Object(d.jsx)("select",{className:"border-2 border-black",id:"importance",onChange:c,value:t,children:r&&r.map((function(e){return Object(d.jsx)("option",{value:e.id,children:e.name},e.id)}))})]})},Me=function(e){var t=e.value,c=e.change;return Object(d.jsxs)("div",{children:[Object(d.jsx)("p",{children:"Name"}),Object(d.jsx)("input",{className:"formInput",onChange:c,id:"name",value:t})]})},Ue=function(){var e=Object(n.useContext)(m).projects,t=Object(n.useContext)(u),c=t.modalStatus,a=t.modalDispatch,r=Object(n.useState)({name:"",description:"",importance:3}),o=Object(i.a)(r,2),l=o[0],j=o[1],b=Object(n.useState)(!1),p=Object(i.a)(b,2),O=p[0],h=p[1],x=Object(n.useState)(!0),v=Object(i.a)(x,2),y=v[0],g=v[1],w=l.items;Object(n.useEffect)((function(){c&&c.projectID&&(e?(j(e.filter((function(e){return e.id===c.projectID}))[0]),g(!1)):g(!0))}),[c,e]),Object(n.useEffect)((function(){""===l.name?h(!1):h(!0)}),[l.name]);var T=function(e){j(Object(s.a)(Object(s.a)({},l),{},Object(f.a)({},e.target.id,e.target.value)))};return Object(d.jsxs)("div",{className:"relative overflow-scroll bg-white h-5/6 w-1/2 mt-10 p-5",children:[Object(d.jsx)("div",{onClick:function(e){a({type:"HIDE_PROJECT_SHEET"})},className:"h-10 w-10 absolute top-0 right-0",children:Object(d.jsx)(I,{})}),y?Object(d.jsx)("p",{className:"text-xl font-bold",children:"New Project"}):Object(d.jsx)("p",{className:"text-xl font-bold",children:"Edit Project"}),Object(d.jsx)(Me,{value:l.name,change:T}),Object(d.jsx)(We,{value:l.description,change:T}),Object(d.jsx)(Re,{value:l.importance,change:T}),y?Object(d.jsx)("div",{className:"flex space-x-2 mt-5",children:Object(d.jsx)("button",{onClick:function(e){O&&(!function(e){C.firestore().collection("users/"+D()+"/projects").add({description:e.description,importance:parseInt(e.importance),name:e.name,deleted:!1})}(l),a({type:"HIDE_PROJECT_SHEET"}))},className:O?"doneBtn":"inactiveBtn",children:"Add"})}):Object(d.jsxs)("div",{children:[Object(d.jsxs)("div",{className:"flex space-x-2 mt-5",children:[Object(d.jsx)("button",{onClick:function(e){O&&(!function(e){C.firestore().collection("users/"+D()+"/projects").doc(e.id).update({description:e.description,importance:parseInt(e.importance),name:e.name})}(l),a({type:"HIDE_PROJECT_SHEET"}))},className:O?"doneBtn":"inactiveBtn",children:"Save"}),Object(d.jsx)("button",{onClick:function(e){var t;!0===window.confirm("Are you sure you want to delete? Deleting this project will also delete all of your actions under the project.")&&(t=l.id,C.firestore().collection("users/"+D()+"/projects").doc(t).update({deleted:!0}).then((function(e){C.firestore().collection("users/"+D()+"/items").where("project","==",t).where("deleted","!=",!0).get().then((function(e){var t=C.firestore().batch();e.docs.forEach((function(e){var c=C.firestore().collection("users/"+D()+"/items").doc(e.id);t.update(c,{deleted:!0})})),t.commit()}))})),a({type:"HIDE_PROJECT_SHEET"}))},className:"importantBtn",children:"Delete"})]}),Object(d.jsx)("div",{})]}),y?null:Object(d.jsxs)("div",{children:[Object(d.jsxs)("div",{className:"flex space-x-1 mt-10",children:[Object(d.jsx)("p",{className:"text-xl font-bold self-center",children:"Actions In Project"}),Object(d.jsx)("div",{onClick:function(e){a({type:"SHOW_SHEET",itemProjectID:l.id})},className:"w-7 h-7 cursor-pointer self-center",children:Object(d.jsx)(q,{})})]}),w&&w.map((function(e){return Object(d.jsx)(Fe,{showProject:!1,item:e},e.id)}))]})]})},Ve=function(){var e=Object(n.useContext)(u),t=e.modalStatus,c=e.modalDispatch;return!1===t.showProjectSheet?null:Object(d.jsx)("div",{onClick:function(e){"project-bg"===e.target.id&&c({type:"HIDE_PROJECT_SHEET"})},id:"project-bg",className:"flex justify-center w-screen h-screen bg-gray-400 bg-opacity-50 fixed inset-0",children:Object(d.jsx)(Ue,{})})},Je=function(){var e=Object(n.useContext)(u),t=e.modalStatus,c=e.modalDispatch;return Object(n.useEffect)((function(){var e=function(e){"Escape"===e.code&&(t.showSheet?c({type:"HIDE_SHEET"}):t.showProjectSheet&&c({type:"HIDE_PROJECT_SHEET"}))};return document.addEventListener("keyup",e),function(){document.removeEventListener("keyup",e)}})),null},Ye=a.a.createContext(),ze=function(e){var t=e.children,c=Object(n.useContext)(L).FBuser,a=c?c.uid:null,r=Object(fe.a)(C.firestore().collection("users/"+a+"/oneOffs").where("done","==",!1),{idField:"id"}),o=Object(i.a)(r,2),s=o[0],l=o[1];return Object(d.jsx)(Ye.Provider,{value:{oneOffs:s,oneOffsLoading:l},children:t})},Ge=a.a.createContext(),Ke=function(e){var t=e.children,c=Object(n.useContext)(L).FBuser,a=c?c.uid:null,r=Object(fe.a)(C.firestore().collection("users/"+a+"/projects").where("deleted","==",!1),{idField:"id"}),o=Object(i.a)(r,2),s=o[0],l=o[1];return Object(d.jsx)(Ge.Provider,{value:{projects:s,projectsLoading:l},children:t})},qe=a.a.createContext(),Qe=function(e){var t=e.children,c=Object(n.useContext)(L).FBuser,a=c?c.uid:null,r=Object(fe.b)(C.firestore().collection("users").doc("/"+a)),o=Object(i.a)(r,2),s=o[0],l=o[1],u=s&&s.actionTypes?s.actionTypes:null,j=s&&s.dayDrop?s.dayDrop:null,f=s&&s.importanceTypes?s.importanceTypes:null,b=s&&s.oneOff?s.oneOff:null,p=s&&null!==s.currentScore?s.currentScore:null;console.log(p);var O=u&&j&&f&&b?{actionTypes:u,dayDrop:j,importanceTypes:f,oneOff:b,currentUserScore:p}:null;return Object(d.jsx)(qe.Provider,{value:{weights:O,weightsLoading:l},children:t})},Xe=a.a.createContext(),Ze=function(e){var t=e.children,c=Object(n.useContext)(L).FBuser,a=c?c.uid:null,r=Object(fe.a)(C.firestore().collection("users/"+a+"/history").orderBy("date","asc")),o=Object(i.a)(r,2),s=o[0],l=o[1];return Object(d.jsx)(Xe.Provider,{value:{history:s,historyLoading:l},children:t})},$e=function(e,t,c,n){e=e?e.filter((function(e){return!1===e.completed&&!1===e.deleted})):null;var a=t?it(t):null,r=e&&a&&c?dt(e,a,c):null,o=r&&c?rt(r,c):null,i=at(r),s=nt(r),l=ct(r),d=et(r);return n&&n.forEach((function(e){i+=t.oneOff})),{items:r,weights:a,projects:o,totalScore:i,todaysScore:s,tomorrowsScore:l,thisWeeksScore:d,allDataPulled:!!(e&&t&&c&&n)}},et=function(e){var t=e?e.filter((function(e){return y.a.unix(e.expectedUpdate.seconds).startOf("days").isBefore(tt())})):null;return at(t)},tt=function(){for(var e=y()().startOf("day").add(1,"d"),t=null;null===t;)1===e.day()?t=e:e.add(1,"d");return t},ct=function(e){var t=e?e.filter((function(e){return 1===e.daysTo})):null;return at(t)},nt=function(e){var t=e?e.filter((function(e){return e.daysTo<=0})):null;return at(t)},at=function(e){if(null===e)return 0;var t=0;return e.forEach((function(e){t+=e.score})),t},rt=function(e,t){return t.map((function(t){var c=ot(e,t),n=0;return c.forEach((function(e){return n+=e.score})),Object(s.a)(Object(s.a)({},t),{},{totalScore:n,items:c})}))},ot=function(e,t){return t&&e?e.filter((function(e){return e.projectID===t.id})):null},it=function(e){return e.importanceArray=st(e.importanceTypes),e.actionTypeArray=lt(e.actionTypes),e},st=function(e){for(var t=[],c=0,n=Object.keys(e);c<n.length;c++){var a=n[c];t.push(e[a])}return t=t.sort((function(e,t){return e.id-t.id})),t},lt=function(e){for(var t=[],c=0,n=Object.keys(e);c<n.length;c++){var a=n[c];t.push(e[a])}return t=t.sort((function(e,t){return e.id-t.id})),t},dt=function(e,t,c){if(!e||!t||!c)return null;for(var n=0;n<e.length;n++)e[n]=ut(e[n],t,c);return e},ut=function(e,t,c){if(t&&e&&c){var n=c.filter((function(t){return t.id===e.projectID}))[0],a=!n;if(a)return null;var r=t.importanceArray.filter((function(e){return e.id===n.importance}))[0],o=t.actionTypeArray.filter((function(t){return t.id===e.actionType}))[0],i=jt(e.expectedUpdate),l=e.expectedUpdate?Math.max(0,1*r.weight*o.weight-i*t.dayDrop):0,d=ft(e);return Object(s.a)(Object(s.a)({},e),{},{deleted:a,importanceName:r.name,importanceWeight:r.weight,actionTypeName:o.name,actionTypeWeight:o.weight,daysTo:i,score:l,colorClass:d,project:n,dayDrop:t.dayDrop})}return e},jt=function(e){if(null===e)return 0;var t=y.a.unix(e.seconds).startOf("days"),c=y()().startOf("days"),n=y()(t).startOf("days"),a=y()(c).startOf("days"),r=1,o=[!1,!0,!0,!0,!0,!0,!1],i=0;if(t.isSame(c))return 0;for(t.isBefore(c)&&(a=y()(t),n=y()(c),r=-1);!a.isSame(n);)a.add(1,"d"),o[a.day()]&&i++;return i*r},ft=function(e){if(null===e.expectedUpdate)return"bg-white";var t=y()().startOf("day"),c=y.a.unix(e.expectedUpdate.seconds).startOf("day");return c.isBefore(t)&&5!==e.actionType&&6!==e.actionType?"bg-red-600 text-white":!c.isSame(t)||1!==e.actionType&&4!==e.actionType?!c.isSame(t)||2!==e.actionType&&3!==e.actionType?1===e.actionType||4===e.actionType?"bg-purple-300":2===e.actionType||3===e.actionType?"bg-gray-400":"bg-gray-300":"bg-gray-600 text-white":"bg-purple-700 text-white"},bt=function(){var e=Object(n.useContext)(be),t=e.items,c=e.itemsLoading,a=Object(n.useContext)(Ye),r=a.oneOffs,o=a.oneOffsLoading,i=Object(n.useContext)(Ge),s=i.projects,l=i.projectsLoading,u=Object(n.useContext)(qe),j=u.weights,f=u.weightsLoading,b=Object(n.useContext)(Xe),p=b.history,O=b.historyLoading,h=Object(n.useContext)(m).dataDispatch,x=!(c||o||l||f||O);return Object(n.useEffect)((function(){x&&(console.log("data effect"),h({type:"SET_DATA",data:$e(t,j,s,r)}))}),[t,s,j,r,h,x]),Object(n.useEffect)((function(){console.log("history effect"),h({type:"SET_HISTORY",history:p})}),[h,p]),Object(n.useEffect)((function(){console.log("oneoff effect"),h({type:"SET_ONE_OFFS",oneOffs:r})}),[h,r]),Object(n.useEffect)((function(){console.log("all loaded effect"),h({type:"SET_ALL_LOADED",allLoaded:x})}),[x,h]),Object(d.jsx)("div",{})},pt=function(){return Object(d.jsx)(H,{children:Object(d.jsx)(ee,{children:Object(d.jsx)(j,{children:Object(d.jsx)(h,{children:Object(d.jsx)(pe,{children:Object(d.jsx)(ze,{children:Object(d.jsx)(Ke,{children:Object(d.jsx)(Qe,{children:Object(d.jsx)(Ze,{children:Object(d.jsxs)(Pe,{children:[Object(d.jsx)(bt,{}),Object(d.jsxs)("div",{className:"App",children:[Object(d.jsx)(Be,{}),Object(d.jsx)(Ve,{}),Object(d.jsx)(A,{}),Object(d.jsx)(Je,{})]})]})})})})})})})})})})};o.a.render(Object(d.jsx)(a.a.StrictMode,{children:Object(d.jsx)(pt,{})}),document.getElementById("root"))},83:function(e,t,c){}},[[183,1,2]]]);
//# sourceMappingURL=main.5115aa9a.chunk.js.map